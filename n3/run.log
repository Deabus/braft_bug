WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:03:50.749670 14439 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:03:50.939415 14439 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:03:50.941373 14439 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:03:51.017939 14439 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
W1218 01:03:51.020138 14439 protobuf_file.cpp:91] open file failed, path: ./data/log/log_meta: FILE_ERROR_NOT_FOUND
W1218 01:03:51.020838 14439 log.cpp:699] ./data/log is empty
I1218 01:03:51.050658 14439 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 1 time: 28012
I1218 01:03:51.054250 14439 snapshot.cpp:465] Deleting ./data/snapshot/temp
W1218 01:03:51.060928 14439 protobuf_file.cpp:91] open file failed, path: ./data/raft_meta/raft_meta: FILE_ERROR_NOT_FOUND
I1218 01:03:51.063470 14439 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 1 votedfor 0.0.0.0:0:0 time: 1906
I1218 01:03:51.066004 14439 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 1 last_log_id: (index=0,term=0) conf:  old_conf: 
I1218 01:03:51.082252 14439 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:03:55.371384 14498 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:03:55.391723 14498 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 0 and last_snapshot_index 0 is less than 1, will clear bufferred logs and return success
W1218 01:03:59.528971 14503 cli_service.cpp:158] Receive set_peer to Atomic:10.1.3.3:8700:0 from 10.1.3.3:55090
I1218 01:03:59.531222 14503 node.cpp:909] node Atomic:10.1.3.3:8700:0 reset_peers to 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 from empty
I1218 01:03:59.682181 14503 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 2 votedfor 0.0.0.0:0:0 time: 107739
I1218 01:04:05.196075 14484 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 3 current_term 2 granted 1 rejected_by_lease 0
I1218 01:04:05.269812 14485 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 2 start pre_vote
I1218 01:04:05.313977 14503 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 3 current_term 2 log_is_ok 1 votable_time 0
I1218 01:04:05.331998 14503 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 3 votedfor 0.0.0.0:0:0 time: 16239
I1218 01:04:05.374164 14503 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 3 votedfor 10.1.1.3:8700:0 time: 12930
W1218 01:04:05.416445 14496 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 2 current_ctx_version 4
W1218 01:04:05.435670 14484 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 2 current_ctx_version 4
W1218 01:04:05.449019 14493 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 2 current_ctx_version 4
W1218 01:04:05.539433 14493 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.5.3:8700:0 ctx_version 2 current_ctx_version 4
I1218 01:04:05.715790 14503 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=3, status=Follower receives message from new leader with the same term.}
I1218 01:04:05.716820 14486 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 4 current_term 3 granted 1 rejected_by_lease 0
I1218 01:04:05.721897 14496 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.5.3:8700:0 in term 4 current_term 3 granted 1 rejected_by_lease 0
I1218 01:04:05.761550 14484 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000001' with fd=10
I1218 01:04:06.011482 14484 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:04:25.400744 14498 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:04:25.472568 14498 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000001
I1218 01:04:25.474195 14498 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000001
I1218 01:04:25.477839 14498 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=1 last_included_term=3
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:04:49.217010 15149 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:04:49.889043 15139 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:04:49.914199 15139 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:04:49.916217 15139 server.cpp:499] Fail to start Server
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:05:44.341266 15764 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:05:45.606910 15749 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:05:45.930006 15749 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:05:46.026949 15749 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:05:46.379808 15749 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:05:46.427121 15749 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 1 time: 44772
I1218 01:05:46.436403 15749 log.cpp:1115] load open segment, path: ./data/log first_index: 1
I1218 01:05:46.513309 15749 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:05:46.817593 15831 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:05:46.850744 15831 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 1 last_included_term: 3 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:05:46.864321 15749 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 3 votedfor 10.1.1.3:8700:0 time: 899
I1218 01:05:46.868489 15749 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 3 last_log_id: (index=1,term=3) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:05:46.908258 15749 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:05:57.857442 15824 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 3 start pre_vote
I1218 01:05:58.964959 15822 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 6 current_term 3 log_is_ok 1 votable_time 0
W1218 01:05:58.974007 15820 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=186 addr=10.1.1.3:8700} (0x0x631000078800): Connection timed out
I1218 01:05:59.043502 15822 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 6 votedfor 0.0.0.0:0:0 time: 38793
W1218 01:05:59.072347 15841 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:05:59.178165 15822 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 6 votedfor 10.1.2.3:8700:0 time: 107143
I1218 01:05:59.223177 15827 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 6 current_term 6 granted 1 rejected_by_lease 0
I1218 01:05:59.271785 15827 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=6, status=Follower receives message from new leader with the same term.}
W1218 01:05:59.291750 15841 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 2 current_ctx_version 6
W1218 01:05:59.293670 15826 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 2 current_ctx_version 6
I1218 01:05:59.327785 15833 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 6 current_term 6 granted 1 rejected_by_lease 0
I1218 01:05:59.557075 15827 node.cpp:2634] node Atomic:10.1.3.3:8700:0 received InstallSnapshotRequest last_included_log_index=2 last_include_log_term=5 from 10.1.2.3:8700:0 when last_log_id=(index=1,term=3)
I1218 01:06:00.679744 15841 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000002
I1218 01:06:00.681295 15841 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000002
I1218 01:06:00.726027 15841 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000001
I1218 01:06:00.960803 15841 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:06:01.434849 15841 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 2 last_included_term: 5 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:06:01.597790 15809 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 3 time: 612864
I1218 01:06:01.701166 15809 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000001'
I1218 01:06:02.574115 15822 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000003' with fd=7
I1218 01:06:02.586179 15841 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:06:07.378159 15820 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:06:07.504900 15824 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000003
I1218 01:06:07.506361 15824 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000003
I1218 01:06:07.528007 15824 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000002
I1218 01:06:07.580478 15824 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=3 last_included_term=6
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:06:30.497717 16192 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:06:30.559592 16192 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:06:30.561599 16192 server.cpp:499] Fail to start Server
I1218 01:06:30.804565 15828 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=6, status=Lost connection from leader 10.1.2.3:8700:0}
I1218 01:06:30.820062 15818 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 6 start pre_vote
W1218 01:06:31.015794 15820 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=469 addr=10.1.4.3:8700} (0x0x6310000f1300): Connection refused
W1218 01:06:31.261340 15829 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:06:31.575887 15824 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E2][10.1.1.3:8700][E2]peer_id not exist
W1218 01:06:31.633270 15818 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
I1218 01:06:41.253880 15825 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 6 start pre_vote
I1218 01:06:41.316416 15824 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 7 current_term 6 granted 1 rejected_by_lease 0
I1218 01:06:41.325079 15826 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:06:41.347687 15826 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 3 and last_snapshot_index 3 is less than 1, will clear bufferred logs and return success
W1218 01:06:41.369194 15820 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:06:41.441622 15825 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 6 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:06:41.512571 15803 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 7 current_term 6 granted 1 rejected_by_lease 0
I1218 01:06:41.537086 15818 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 6 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:06:41.538112 15818 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 6 start vote and grant vote self
I1218 01:06:41.735625 15801 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 4 time: 325784
I1218 01:06:41.739763 15818 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 7 votedfor 10.1.3.3:8700:0 time: 31256
I1218 01:06:41.743342 15829 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 7 current_term 7 log_is_ok 1 votable_time 0
W1218 01:06:41.824687 15826 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:06:41.879411 15826 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 7 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:06:41.880976 15801 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000003'
I1218 01:06:41.913146 15818 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 7 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:06:42.449450 15818 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 7 current_term 7 granted 1 rejected_by_lease 0
I1218 01:06:42.563414 15826 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 7 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:06:42.632001 15826 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 8 current_ctx_version 9
I1218 01:06:46.614856 15826 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 8 current_term 7 granted 1 rejected_by_lease 0
I1218 01:06:46.728878 15801 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 8 current_term 7 log_is_ok 1 votable_time 0
I1218 01:06:46.786334 15801 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 8 votedfor 0.0.0.0:0:0 time: 55575
I1218 01:06:46.844729 15801 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 8 votedfor 10.1.1.3:8700:0 time: 35602
I1218 01:06:47.389305 15818 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=8, status=Follower receives message from new leader with the same term.}
I1218 01:06:48.039990 15828 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000004' with fd=8
I1218 01:06:48.638278 15829 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:06:50.949785 15764 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:06:53.005342 15764 sampler.cpp:192] bvar is busy at sampling for 2 seconds!

=================================================================
==16192==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f06bb5d509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f06bb5d509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f06bb5d509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:07:02.981472 16475 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:07:03.098942 16475 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:07:03.100406 16475 server.cpp:499] Fail to start Server
I1218 01:07:03.376158 15801 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 8 start pre_vote
I1218 01:07:03.377023 15828 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=8, status=Lost connection from leader 10.1.1.3:8700:0}
W1218 01:07:03.667146 15803 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=651 addr=10.1.1.3:8700} (0x0x631000140800): Connection refused
W1218 01:07:03.757217 15826 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=655 addr=10.1.4.3:8700} (0x0x631000141300): Connection refused
W1218 01:07:03.904570 15824 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:07:05.985710 15825 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 8 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:07:08.320230 15818 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 9 current_term 8 granted 1 rejected_by_lease 0
I1218 01:07:09.091831 15801 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 9 current_term 8 log_is_ok 1 votable_time 0
I1218 01:07:09.203338 15801 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 9 votedfor 0.0.0.0:0:0 time: 108978
I1218 01:07:09.261056 15801 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 9 votedfor 10.1.2.3:8700:0 time: 54954
I1218 01:07:09.811997 15828 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 9 start pre_vote
W1218 01:07:10.192625 15820 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 16 current_ctx_version 18
I1218 01:07:10.213675 15818 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=9, status=Follower receives message from new leader with the same term.}
W1218 01:07:10.300879 15820 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 16 current_ctx_version 18
W1218 01:07:10.544728 15820 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:07:11.368825 15820 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
W1218 01:07:11.428687 15818 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 16 current_ctx_version 18
I1218 01:07:11.493748 15820 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000004
I1218 01:07:11.507539 15820 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000004
I1218 01:07:11.559602 15820 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000003
I1218 01:07:11.664170 15818 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:07:11.759600 15820 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=4 last_included_term=8
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:07:24.453670 16662 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:07:24.485726 16662 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:07:24.576233 16662 server.cpp:499] Fail to start Server
I1218 01:07:26.387893 15829 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=9, status=Lost connection from leader 10.1.2.3:8700:0}
I1218 01:07:26.466356 15828 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 9 start pre_vote
W1218 01:07:26.964547 15818 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:07:27.102085 15818 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 9 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:07:27.373608 15818 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 9 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:07:27.382872 15818 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 9 start vote and grant vote self
I1218 01:07:27.605203 15818 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 10 votedfor 10.1.3.3:8700:0 time: 118165
W1218 01:07:27.676081 15824 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 19 current_ctx_version 20
I1218 01:07:27.705173 15825 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 10 granted 1 rejected_by_lease 0 disrupted 0

=================================================================
==16475==ERROR: LeakSanitizer: detected memory leaks
I1218 01:07:27.714354 15803 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 10 granted 1 rejected_by_lease 0 disrupted 0

Direct leak of 88 byte(s) in 1 object(s) allocated from:
I1218 01:07:27.796053 15803 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 10 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:07:27.829246 15803 replicator.cpp:143] Replicator=6627134537745@10.1.1.3:8700:0 is started, group Atomic
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
I1218 01:07:27.889566 15803 replicator.cpp:143] Replicator=9904194584577@10.1.2.3:8700:0 is started, group Atomic
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
W1218 01:07:27.914063 15829 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:07:27.923485 15803 replicator.cpp:143] Replicator=9921374453761@10.1.4.3:8700:0 is started, group Atomic
I1218 01:07:27.926342 15803 replicator.cpp:143] Replicator=9938554322945@10.1.5.3:8700:0 is started, group Atomic
W1218 01:07:27.996460 15826 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 3 current_ctx_version 4
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f11abf1609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
W1218 01:07:28.125149 15824 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E110]Fail to connect Socket{id=838 addr=10.1.2.3:8700} (0x0x631000190ac0): Connection timed out [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=838 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=838 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=838
    #4 0x7f11abf1609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
W1218 01:07:28.200888 15818 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
I1218 01:07:28.224907 15829 socket.cpp:2570] Checking Socket{id=838 addr=10.1.2.3:8700} (0x631000190ac0)
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
I1218 01:07:28.312434 15824 socket.cpp:2630] Revived Socket{id=838 addr=10.1.2.3:8700} (0x631000190ac0) (Connectable)
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f11abf1609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:07:28.510254 15803 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:07:28.545281 15803 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:07:28.665537 15803 server.cpp:291] Node becomes leader
W1218 01:07:30.985275 15828 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:07:34.698868 15829 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:07:37.532756 15828 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:07:40.620903 15826 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:07:41.461187 15824 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:07:41.573295 15824 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000006
I1218 01:07:41.574393 15824 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000006
I1218 01:07:41.620798 15824 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000004
I1218 01:07:41.679723 15824 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=6 last_included_term=10
I1218 01:07:41.754696 15824 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 5 time: 58382
W1218 01:07:42.876962 15829 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E1014]Got EOF of Socket{id=8589935243fd=7 addr=10.1.1.3:8700:41990} (0x0x631000140800) [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
I1218 01:07:42.974380 15818 socket.cpp:2570] Checking Socket{id=8589935243 addr=10.1.1.3:8700} (0x631000140800)
W1218 01:07:43.403446 15824 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==16662==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7efeb507709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7efeb507709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7efeb507709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:07:46.325337 15826 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:07:48.326216 15829 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
W1218 01:07:49.099980 15818 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:07:51.965708 15803 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:07:53.426043 15820 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
W1218 01:07:54.635042 15818 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:07:57.384830 15818 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:07:58.645026 15824 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
W1218 01:08:00.514580 15829 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=111, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:03.424249 15820 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=121, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:03.803635 15801 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
W1218 01:08:06.265414 15803 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=131, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:08.976784 15825 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
W1218 01:08:09.220301 15829 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=141, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:11.500566 15824 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:08:11.503063 15824 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 6 and last_snapshot_index 6 is less than 1, will clear bufferred logs and return success
I1218 01:08:11.563093 15801 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 7 time: 57774
I1218 01:08:11.565325 15801 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000004'
I1218 01:08:12.088649 15826 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415403
I1218 01:08:12.251497 15829 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:12.258966 15829 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:12.783238 15824 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415404
I1218 01:08:13.388754 15820 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:14.156845 15828 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415405
W1218 01:08:14.159667 15826 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=61, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
I1218 01:08:14.239938 15820 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:14.753754 15825 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415406
I1218 01:08:14.802277 15803 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:15.319479 15824 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415407
I1218 01:08:15.384080 15803 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:15.613140 15803 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=161, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:15.904109 15829 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415408
I1218 01:08:15.936893 15820 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:16.444597 15818 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415409
I1218 01:08:16.489962 15820 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:17.019574 15829 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415410
I1218 01:08:17.068576 15824 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:17.575083 15820 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415411
I1218 01:08:17.632930 15824 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:18.146252 15825 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415412
I1218 01:08:18.171382 15824 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:18.439710 15826 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=171, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:18.685881 15820 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415413
I1218 01:08:18.763079 15825 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:19.288403 15825 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=71, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
I1218 01:08:19.310091 15818 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415414
I1218 01:08:19.525151 15801 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:20.117247 15820 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415415
I1218 01:08:20.188508 15829 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:20.710083 15828 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415416
I1218 01:08:20.745354 15826 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:21.286096 15801 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415417
I1218 01:08:21.328769 15803 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:21.743654 15801 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=181, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:21.856344 15818 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415418
I1218 01:08:22.333071 15826 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:22.883527 15824 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415419
I1218 01:08:22.929775 15826 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:23.437806 15828 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415420
I1218 01:08:23.501420 15829 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:24.018788 15818 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415421
I1218 01:08:24.044507 15829 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:24.477104 15829 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=81, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
I1218 01:08:24.571277 15824 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415422
I1218 01:08:25.116284 15801 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:25.231700 15801 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:25.916769 15820 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415423
I1218 01:08:26.032486 15803 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:26.556800 15803 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415424
W1218 01:08:26.569595 15764 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:08:26.602155 15818 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:27.122156 15820 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415425
I1218 01:08:27.189131 15825 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:27.700381 15826 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415426
I1218 01:08:27.759143 15824 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:27.900173 15824 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=201, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:28.290195 15803 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415427
I1218 01:08:28.324774 15824 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:28.688952 15801 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E1014]Got EOF of Socket{id=840fd=10 addr=10.1.4.3:8700:53918} (0x0x631000191040) [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=840 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=840 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=840
W1218 01:08:28.690326 15825 input_messenger.cpp:381] Fail to read from Socket{id=838 fd=9 addr=10.1.2.3:8700:49940} (0x631000190ac0): Connection reset by peer [104]
W1218 01:08:28.708142 15825 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=838fd=9 addr=10.1.2.3:8700:49940} (0x0x631000190ac0): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=838 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=838 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=838
I1218 01:08:28.783803 15818 socket.cpp:2570] Checking Socket{id=840 addr=10.1.4.3:8700} (0x631000191040)
I1218 01:08:28.811820 15826 socket.cpp:2570] Checking Socket{id=838 addr=10.1.2.3:8700} (0x631000190ac0)
I1218 01:08:28.867360 15828 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415428
I1218 01:08:28.986167 15801 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:29.494311 15801 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415429
I1218 01:08:29.572870 15818 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:29.633708 15828 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=91, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935243
I1218 01:08:30.163915 15824 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415430
I1218 01:08:30.243052 15818 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:30.802039 15828 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415431
I1218 01:08:30.872705 15824 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:30.873446 15824 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:31.393627 15818 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415432
I1218 01:08:31.473222 15826 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:32.005947 15825 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415433
I1218 01:08:32.069109 15803 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:32.634231 15818 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415434
I1218 01:08:32.697146 15829 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:08:33.221979 15801 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 10 last_included_term 10 last_included_index 6 uri remote://10.1.3.3:8700/554129125739415435
I1218 01:08:33.316857 15829 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 6 last_included_term 10 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:33.601691 15824 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 10 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:08:33.644706 15818 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:08:33.714840 15824 replicator.cpp:989] Group Atomic Replicator=6627134537745 is going to quit
I1218 01:08:33.717509 15824 replicator.cpp:1258] Replicator=6627134537745 is going to quit
I1218 01:08:33.776849 15824 replicator.cpp:989] Group Atomic Replicator=9904194584577 is going to quit
I1218 01:08:33.778102 15824 replicator.cpp:1258] Replicator=9904194584577 is going to quit
I1218 01:08:33.801936 15824 replicator.cpp:989] Group Atomic Replicator=9921374453761 is going to quit
I1218 01:08:33.815838 15824 replicator.cpp:1258] Replicator=9921374453761 is going to quit
I1218 01:08:33.826740 15824 replicator.cpp:989] Group Atomic Replicator=9938554322945 is going to quit
I1218 01:08:33.827956 15824 replicator.cpp:1258] Replicator=9938554322945 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:08:36.208410 17338 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:08:36.228988 17338 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:08:36.230927 17338 server.cpp:499] Fail to start Server
I1218 01:08:39.124486 15820 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 10 start pre_vote
W1218 01:08:39.623077 15829 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=8589935341 addr=10.1.1.3:8700} (0x0x63100017d5c0): Connection timed out
W1218 01:08:39.722144 15828 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:08:39.831878 15820 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 10 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:08:39.874913 15818 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 10 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:08:39.876696 15818 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 10 start vote and grant vote self
W1218 01:08:40.017551 15826 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:08:40.064883 15818 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 11 votedfor 10.1.3.3:8700:0 time: 144887
I1218 01:08:40.139818 15829 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 11 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:08:40.184150 15829 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 11 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:08:40.185662 15829 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 11 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:08:40.200655 15829 replicator.cpp:143] Replicator=6618544603171@10.1.1.3:8700:0 is started, group Atomic
I1218 01:08:40.397384 15829 replicator.cpp:143] Replicator=5587752452171@10.1.2.3:8700:0 is started, group Atomic
I1218 01:08:40.464797 15829 replicator.cpp:143] Replicator=6601364734005@10.1.4.3:8700:0 is started, group Atomic
I1218 01:08:40.510785 15829 replicator.cpp:143] Replicator=11050950852609@10.1.5.3:8700:0 is started, group Atomic
W1218 01:08:40.661754 15818 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:40.835454 15820 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 5 current_ctx_version 6
I1218 01:08:40.853102 15828 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000007' with fd=10
I1218 01:08:41.129029 15829 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:08:41.157524 15829 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:08:41.325868 15829 server.cpp:291] Node becomes leader
I1218 01:08:41.511698 15820 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:08:41.804482 15825 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000007
I1218 01:08:41.805932 15825 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000007
I1218 01:08:41.852702 15825 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000006
I1218 01:08:41.977615 15825 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=7 last_included_term=11
W1218 01:08:43.340642 15801 input_messenger.cpp:381] Fail to read from Socket{id=17179869937 fd=8 addr=10.1.1.3:8700:42374} (0x63100017e0c0): Connection reset by peer [104]
W1218 01:08:43.357272 15801 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869937fd=8 addr=10.1.1.3:8700:42374} (0x0x63100017e0c0): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937
I1218 01:08:43.465313 15825 socket.cpp:2570] Checking Socket{id=17179869937 addr=10.1.1.3:8700} (0x63100017e0c0)
W1218 01:08:43.476548 15829 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:46.162309 15824 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:48.473174 15825 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937
W1218 01:08:49.040477 15801 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:52.057636 15825 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:53.792498 15820 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937
W1218 01:08:55.080224 15829 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:58.087090 15826 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:08:59.000476 15826 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937
W1218 01:09:00.054991 15826 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E1014]Got EOF of Socket{id=25769804524fd=9 addr=10.1.2.3:8700:60676} (0x0x63100017d300) [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804524 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804524 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804524
I1218 01:09:00.157994 15818 socket.cpp:2570] Checking Socket{id=25769804524 addr=10.1.2.3:8700} (0x63100017d300)

=================================================================
==17338==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f5af6c8609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f5af6c8609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f5af6c8609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:09:01.044255 15803 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:09:01.404242 15825 input_messenger.cpp:381] Fail to read from Socket{id=8589935065 fd=11 addr=10.1.4.3:8700:55678} (0x6310000f1e00): Connection reset by peer [104]
W1218 01:09:01.419262 15825 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935065fd=11 addr=10.1.4.3:8700:55678} (0x0x6310000f1e00): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935065 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935065 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935065
I1218 01:09:01.528167 15826 socket.cpp:2570] Checking Socket{id=8589935065 addr=10.1.4.3:8700} (0x6310000f1e00)
W1218 01:09:04.273579 15803 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869937
W1218 01:09:04.332233 15829 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:09:05.301071 15824 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804524 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804524 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804524 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804524
W1218 01:09:05.929260 15824 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 11 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:09:06.011940 15825 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:09:06.132148 15824 replicator.cpp:989] Group Atomic Replicator=6618544603171 is going to quit
I1218 01:09:06.133896 15824 replicator.cpp:1258] Replicator=6618544603171 is going to quit
I1218 01:09:06.141739 15824 replicator.cpp:989] Group Atomic Replicator=5587752452171 is going to quit
I1218 01:09:06.145612 15824 replicator.cpp:1258] Replicator=5587752452171 is going to quit
I1218 01:09:06.147805 15824 replicator.cpp:989] Group Atomic Replicator=6601364734005 is going to quit
I1218 01:09:06.148609 15824 replicator.cpp:1258] Replicator=6601364734005 is going to quit
I1218 01:09:06.151834 15824 replicator.cpp:989] Group Atomic Replicator=11050950852609 is going to quit
I1218 01:09:06.152812 15824 replicator.cpp:1258] Replicator=11050950852609 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:09:09.165789 17611 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:09:09.204392 17611 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:09:09.206061 17611 server.cpp:499] Fail to start Server
I1218 01:09:11.205173 15826 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 11 start pre_vote
W1218 01:09:11.475824 15820 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:09:11.703510 15803 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:09:11.706341 15803 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 7 and last_snapshot_index 7 is less than 1, will clear bufferred logs and return success
I1218 01:09:11.737828 15820 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 11 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:09:12.047154 15826 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 8 time: 331534
I1218 01:09:12.091194 15826 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000007'
I1218 01:09:12.144143 15803 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 11 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:09:12.157302 15803 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 11 start vote and grant vote self
I1218 01:09:12.231516 15803 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 12 votedfor 10.1.3.3:8700:0 time: 25856
W1218 01:09:12.361619 15829 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:09:12.456171 15818 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 12 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:09:12.696486 15818 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 12 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:09:12.698092 15818 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 12 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:09:12.709506 15818 replicator.cpp:143] Replicator=5673651798030@10.1.1.3:8700:0 is started, group Atomic
I1218 01:09:12.822408 15818 replicator.cpp:143] Replicator=5690831667201@10.1.2.3:8700:0 is started, group Atomic
I1218 01:09:12.829182 15818 replicator.cpp:143] Replicator=5708011536385@10.1.4.3:8700:0 is started, group Atomic
I1218 01:09:12.873042 15818 replicator.cpp:143] Replicator=5725191405569@10.1.5.3:8700:0 is started, group Atomic
W1218 01:09:12.993791 15801 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:09:13.053776 15824 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000008' with fd=8
I1218 01:09:13.179062 15829 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:09:13.183355 15829 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:09:13.229156 15825 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E2][10.1.4.3:8700][E2]peer_id not exist
W1218 01:09:13.277715 15803 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 error: [E2][10.1.4.3:8700][E2]peer_id not exist
I1218 01:09:13.342360 15829 server.cpp:291] Node becomes leader
W1218 01:09:15.592222 15764 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:09:16.240578 15801 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:09:19.160074 15803 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:09:50.804629 18073 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:09:51.607460 18073 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:09:51.636433 18073 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:09:52.521389 18073 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:09:52.575757 18073 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 8 time: 49785
I1218 01:09:52.594276 18073 log.cpp:1115] load open segment, path: ./data/log first_index: 8
I1218 01:09:52.893230 18073 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:09:53.163313 18155 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:09:53.338192 18155 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 7 last_included_term: 11 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:09:53.473893 18073 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 12 votedfor 10.1.3.3:8700:0 time: 22594
I1218 01:09:54.042714 18073 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 12 last_log_id: (index=8,term=12) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:09:54.209441 18073 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:09:58.432608 18153 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:09:58.452083 18153 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 7 and last_snapshot_index 7 is less than 1, will clear bufferred logs and return success
I1218 01:09:59.398675 18130 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 12 start pre_vote
W1218 01:09:59.988431 18128 node.cpp:1502] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 term 13 expect 12
W1218 01:10:00.060016 18151 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:10:00.120683 18128 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 13 votedfor 0.0.0.0:0:0 time: 129253
W1218 01:10:00.123221 18147 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 2 current_ctx_version 3
W1218 01:10:00.294926 18135 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E1014]Got EOF of Socket{id=93fd=8 addr=10.1.1.3:8700:50552} (0x0x631000050800)
I1218 01:10:01.225865 18155 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 14 current_term 13 granted 1 rejected_by_lease 0
I1218 01:10:01.616941 18147 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 14 current_term 13 log_is_ok 1 votable_time 0
I1218 01:10:01.681188 18147 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 14 votedfor 0.0.0.0:0:0 time: 60537
I1218 01:10:01.776829 18147 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 14 votedfor 10.1.2.3:8700:0 time: 63881
I1218 01:10:02.027266 18128 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=14, status=Follower receives message from new leader with the same term.}
I1218 01:10:02.141986 18155 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 15 current_term 14 granted 1 rejected_by_lease 0
I1218 01:10:03.429594 18147 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:10:03.436115 18147 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:10:03.437693 18147 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:10:22.938026 18139 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 14 start pre_vote
I1218 01:10:22.952637 18153 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=14, status=Lost connection from leader 10.1.2.3:8700:0}
W1218 01:10:23.111311 18130 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=285 addr=10.1.5.3:8700} (0x0x6310000a1880): Connection refused
W1218 01:10:23.119179 18153 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=283 addr=10.1.4.3:8700} (0x0x6310000a1300): Connection refused
W1218 01:10:23.140537 18141 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=279 addr=10.1.1.3:8700} (0x0x6310000a0800): Connection refused
W1218 01:10:23.142181 18130 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=281 addr=10.1.2.3:8700} (0x0x6310000a0d80): Connection refused
I1218 01:10:28.277318 18130 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 14 start pre_vote
W1218 01:10:28.295621 18141 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=101 addr=10.1.2.3:8700} (0x0x631000051e00): Connection refused
W1218 01:10:28.304983 18139 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=8589934873 addr=10.1.1.3:8700} (0x0x6310000a0d80): Connection refused
W1218 01:10:28.311081 18141 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=103 addr=10.1.4.3:8700} (0x0x631000052380): Connection refused
W1218 01:10:28.336941 18130 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=105 addr=10.1.5.3:8700} (0x0x631000052900): Connection refused
I1218 01:10:28.459251 18141 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:10:28.925535 18130 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000010
I1218 01:10:28.974020 18130 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000010
I1218 01:10:29.212396 18130 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000007
I1218 01:10:29.451566 18130 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=10 last_included_term=14
I1218 01:10:34.096917 18141 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 14 start pre_vote
W1218 01:10:34.540227 18130 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=8589934695 addr=10.1.1.3:8700} (0x0x631000052380): Connection timed out
W1218 01:10:34.529811 18139 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=373 addr=10.1.4.3:8700} (0x0x6310000c8ac0): Connection refused
W1218 01:10:34.554231 18130 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E110]Fail to connect Socket{id=8589934871 addr=10.1.2.3:8700} (0x0x6310000a0800): Connection timed out
W1218 01:10:34.567701 18141 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E110]Fail to connect Socket{id=375 addr=10.1.5.3:8700} (0x0x6310000c9040): Connection timed out
I1218 01:10:39.923174 18141 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 14 start pre_vote
W1218 01:10:40.044512 18139 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=8589934967 addr=10.1.1.3:8700} (0x0x6310000c9040): Connection refused
W1218 01:10:40.093317 18153 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=378 addr=10.1.2.3:8700} (0x0x6310000c9880): Connection refused
W1218 01:10:40.123749 18130 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=380 addr=10.1.4.3:8700} (0x0x6310000c9e00): Connection refused
W1218 01:10:40.125873 18139 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=382 addr=10.1.5.3:8700} (0x0x6310000ca380): Connection refused
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:10:42.601580 18642 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:10:42.628576 18642 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:10:42.649048 18642 server.cpp:499] Fail to start Server
I1218 01:10:45.777254 18141 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 14 start pre_vote
I1218 01:10:46.228091 18140 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 13 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:10:46.388068 18139 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:10:46.390005 18139 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 14 start vote and grant vote self
W1218 01:10:46.431471 18130 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 12 current_ctx_version 13
I1218 01:10:46.733652 18139 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 15 votedfor 10.1.3.3:8700:0 time: 111733
W1218 01:10:46.794027 18153 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 12 current_ctx_version 13
I1218 01:10:46.904829 18140 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 15 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:10:46.907877 18141 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 15 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:10:46.911119 18141 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 15 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:10:46.920521 18141 replicator.cpp:143] Replicator=4518305595393@10.1.1.3:8700:0 is started, group Atomic
I1218 01:10:47.067396 18141 replicator.cpp:143] Replicator=4535485464577@10.1.2.3:8700:0 is started, group Atomic
I1218 01:10:47.137945 18141 replicator.cpp:143] Replicator=4552665333761@10.1.4.3:8700:0 is started, group Atomic
I1218 01:10:47.197055 18141 replicator.cpp:143] Replicator=4569845202945@10.1.5.3:8700:0 is started, group Atomic
W1218 01:10:47.272676 18130 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 01:10:47.346858 18153 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:10:47.457998 18141 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 16 current_term 15 granted 0 rejected_by_lease 0
I1218 01:10:47.483008 18155 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.4.3:8700:0 in term 16 current_term 15 log_is_ok 0 votable_time 0
I1218 01:10:47.544641 18135 server.cpp:296] Node stepped down : Raft node receives higher term request_vote_request.
I1218 01:10:47.578291 18155 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:10:47.594110 18151 replicator.cpp:1258] Replicator=4535485464577 is going to quit
I1218 01:10:47.597007 18135 replicator.cpp:1258] Replicator=4552665333761 is going to quit
I1218 01:10:47.663784 18128 replicator.cpp:1258] Replicator=4518305595393 is going to quit
I1218 01:10:47.736411 18145 replicator.cpp:1258] Replicator=4569845202945 is going to quit
I1218 01:10:47.813212 18155 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 16 votedfor 0.0.0.0:0:0 time: 149368
I1218 01:10:47.963092 18145 server.cpp:312] Node start following { leader_id=10.1.4.3:8700:0, term=16, status=Follower receives message from new leader with the same term.}
W1218 01:10:48.056788 18134 log_manager.cpp:592] Truncating storage to last_index_kept=10
I1218 01:10:48.307540 18143 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:10:53.239382 18096 sampler.cpp:192] bvar is busy at sampling for 2 seconds!

=================================================================
==18642==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f1218eee09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f1218eee09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f1218eee09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:10:58.772495 18130 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:10:58.944406 18140 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000011
I1218 01:10:58.946077 18140 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000011
I1218 01:10:58.970353 18140 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000010
I1218 01:10:59.052381 18140 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=11 last_included_term=16
I1218 01:10:59.267736 18130 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 11 time: 52580
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:11:00.782671 18830 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:11:01.577277 18812 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:11:01.587153 18812 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:11:01.588768 18812 server.cpp:499] Fail to start Server
I1218 01:11:05.053426 18141 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 16 start pre_vote
I1218 01:11:05.060341 18139 server.cpp:309] Node stops following { leader_id=10.1.4.3:8700:0, term=16, status=Lost connection from leader 10.1.4.3:8700:0}
I1218 01:11:05.201372 18145 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.5.3:8700:0 in term 17 current_term 16 granted 1 rejected_by_lease 0
I1218 01:11:05.206177 18143 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 16 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:05.743798 18136 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 16 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:05.744900 18136 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 16 start vote and grant vote self
I1218 01:11:06.034332 18136 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 17 votedfor 10.1.3.3:8700:0 time: 120660
W1218 01:11:06.071827 18143 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 16 current_ctx_version 17
I1218 01:11:06.084285 18141 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 17 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:06.086372 18139 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.5.3:8700:0 in term 17 current_term 17 log_is_ok 1 votable_time 0
W1218 01:11:06.097340 18153 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 16 current_ctx_version 17
I1218 01:11:06.143911 18141 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 17 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:06.145614 18141 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 17 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:11:06.191507 18141 replicator.cpp:143] Replicator=5501853106182@10.1.1.3:8700:0 is started, group Atomic
I1218 01:11:06.276525 18141 replicator.cpp:143] Replicator=4638564679681@10.1.2.3:8700:0 is started, group Atomic
I1218 01:11:06.280009 18141 replicator.cpp:143] Replicator=4655744548865@10.1.4.3:8700:0 is started, group Atomic
I1218 01:11:06.282344 18141 replicator.cpp:143] Replicator=4672924418049@10.1.5.3:8700:0 is started, group Atomic
W1218 01:11:06.384384 18130 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 3 current_ctx_version 4
W1218 01:11:06.399721 18153 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 3 current_ctx_version 4
I1218 01:11:06.569911 18155 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:11:06.582218 18155 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:11:06.796263 18128 server.cpp:291] Node becomes leader
W1218 01:11:10.684298 18139 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:14.880980 18141 input_messenger.cpp:381] Fail to read from Socket{id=409 fd=10 addr=10.1.4.3:8700:58888} (0x6310000cedc0): Connection reset by peer [104]
W1218 01:11:14.895970 18141 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=409fd=10 addr=10.1.4.3:8700:58888} (0x0x6310000cedc0): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=409 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=409 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=409
I1218 01:11:15.032086 18140 socket.cpp:2570] Checking Socket{id=409 addr=10.1.4.3:8700} (0x6310000cedc0)
W1218 01:11:15.369220 18130 input_messenger.cpp:381] Fail to read from Socket{id=407 fd=9 addr=10.1.2.3:8700:51370} (0x6310000ce840): Connection reset by peer [104]
W1218 01:11:15.396878 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=407fd=9 addr=10.1.2.3:8700:51370} (0x0x6310000ce840): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=407 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=407 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=407
I1218 01:11:15.495325 18141 socket.cpp:2570] Checking Socket{id=407 addr=10.1.2.3:8700} (0x6310000ce840)
W1218 01:11:16.491256 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:17.631476 18139 input_messenger.cpp:381] Fail to read from Socket{id=25769804063 fd=8 addr=10.1.1.3:8700:52856} (0x6310000a1e00): Connection reset by peer [104]
W1218 01:11:17.651345 18139 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=25769804063fd=8 addr=10.1.1.3:8700:52856} (0x0x6310000a1e00): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804063 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804063 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804063
I1218 01:11:17.739967 18130 socket.cpp:2570] Checking Socket{id=25769804063 addr=10.1.1.3:8700} (0x6310000a1e00)
W1218 01:11:20.101202 18140 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=409 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=409 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=409 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=409
W1218 01:11:20.645675 18153 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=407 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=407 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=407 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=407
W1218 01:11:21.455245 18153 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 17 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:11:21.517269 18140 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:11:21.565335 18153 replicator.cpp:989] Group Atomic Replicator=5501853106182 is going to quit
I1218 01:11:21.567160 18153 replicator.cpp:1258] Replicator=5501853106182 is going to quit
I1218 01:11:21.587734 18153 replicator.cpp:989] Group Atomic Replicator=4638564679681 is going to quit
I1218 01:11:21.588843 18153 replicator.cpp:1258] Replicator=4638564679681 is going to quit
I1218 01:11:21.589725 18153 replicator.cpp:989] Group Atomic Replicator=4655744548865 is going to quit
I1218 01:11:21.603690 18153 replicator.cpp:1258] Replicator=4655744548865 is going to quit
I1218 01:11:21.604748 18153 replicator.cpp:989] Group Atomic Replicator=4672924418049 is going to quit
I1218 01:11:21.605633 18153 replicator.cpp:1258] Replicator=4672924418049 is going to quit

=================================================================
==18812==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f7c171ac09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f7c171ac09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f7c171ac09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:11:27.588809 18153 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 17 start pre_vote
W1218 01:11:27.884186 18141 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:11:27.818378 19025 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:11:28.008730 19025 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:11:28.052083 19025 server.cpp:499] Fail to start Server
I1218 01:11:28.557974 18141 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 17 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:28.615167 18130 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 17 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:28.617337 18130 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 17 start vote and grant vote self
W1218 01:11:28.620402 18153 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 18 current_ctx_version 19
I1218 01:11:28.768841 18130 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 18 votedfor 10.1.3.3:8700:0 time: 126709
W1218 01:11:28.809919 18141 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:11:28.839545 18153 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:11:28.987697 18140 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 18 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:28.991545 18141 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 18 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:28.993144 18141 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 18 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:11:29.014230 18141 replicator.cpp:143] Replicator=1211180777478@10.1.1.3:8700:0 is started, group Atomic
I1218 01:11:29.078704 18141 replicator.cpp:143] Replicator=1189705940997@10.1.2.3:8700:0 is started, group Atomic
I1218 01:11:29.101652 18141 replicator.cpp:143] Replicator=3358664425483@10.1.4.3:8700:0 is started, group Atomic
I1218 01:11:29.207973 18141 replicator.cpp:143] Replicator=5497558138897@10.1.5.3:8700:0 is started, group Atomic
I1218 01:11:29.443030 18153 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000012
I1218 01:11:29.444883 18153 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000012
I1218 01:11:29.503635 18153 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000011
W1218 01:11:29.504678 18139 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:29.571614 18140 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 5 current_ctx_version 6
I1218 01:11:29.716362 18140 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:11:29.736126 18140 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:11:29.949064 18153 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=12 last_included_term=17
I1218 01:11:30.181453 18151 server.cpp:291] Node becomes leader
I1218 01:11:30.197271 18153 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 12 time: 91841
W1218 01:11:31.417775 18096 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:11:32.524500 18153 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:34.417469 18096 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:11:36.061250 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:37.692790 18141 input_messenger.cpp:381] Fail to read from Socket{id=25769803879 fd=9 addr=10.1.1.3:8700:34846} (0x631000052380): Connection reset by peer [104]
W1218 01:11:37.722245 18141 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=25769803879fd=9 addr=10.1.1.3:8700:34846} (0x0x631000052380): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803879 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803879 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803879
I1218 01:11:37.814966 18140 socket.cpp:2570] Checking Socket{id=25769803879 addr=10.1.1.3:8700} (0x631000052380)
W1218 01:11:37.875991 18130 input_messenger.cpp:381] Fail to read from Socket{id=17179869289 fd=12 addr=10.1.2.3:8700:36464} (0x631000052900): Connection reset by peer [104]
W1218 01:11:37.891214 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869289fd=12 addr=10.1.2.3:8700:36464} (0x0x631000052900): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869289 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869289 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869289
I1218 01:11:38.035758 18140 socket.cpp:2570] Checking Socket{id=17179869289 addr=10.1.2.3:8700} (0x631000052900)
W1218 01:11:38.909058 18140 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:39.647073 18139 input_messenger.cpp:381] Fail to read from Socket{id=17179869570 fd=13 addr=10.1.4.3:8700:46170} (0x6310000cae80): Connection reset by peer [104]
W1218 01:11:39.649706 18139 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869570fd=13 addr=10.1.4.3:8700:46170} (0x0x6310000cae80): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869570 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869570 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869570
I1218 01:11:39.794692 18130 socket.cpp:2570] Checking Socket{id=17179869570 addr=10.1.4.3:8700} (0x6310000cae80)
W1218 01:11:40.070699 18096 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:11:41.688521 18130 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:42.985580 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803879 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803879 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803879 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803879
W1218 01:11:43.170131 18139 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869289 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869289 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869289 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869289
W1218 01:11:44.532496 18140 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:44.713038 18153 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 18 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:11:44.753351 18141 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:11:44.757270 18153 replicator.cpp:989] Group Atomic Replicator=1211180777478 is going to quit
I1218 01:11:44.871073 18153 replicator.cpp:1258] Replicator=1211180777478 is going to quit
W1218 01:11:44.886127 18140 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869570 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869570 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869570 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869570
I1218 01:11:44.898159 18153 replicator.cpp:989] Group Atomic Replicator=1189705940997 is going to quit
I1218 01:11:44.899461 18153 replicator.cpp:1258] Replicator=1189705940997 is going to quit
I1218 01:11:44.900230 18153 replicator.cpp:989] Group Atomic Replicator=3358664425483 is going to quit
I1218 01:11:44.915453 18153 replicator.cpp:1258] Replicator=3358664425483 is going to quit
I1218 01:11:44.916525 18153 replicator.cpp:989] Group Atomic Replicator=5497558138897 is going to quit
I1218 01:11:44.917429 18153 replicator.cpp:1258] Replicator=5497558138897 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:11:50.492866 19213 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:11:50.559587 19213 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:11:50.561316 19213 server.cpp:499] Fail to start Server
I1218 01:11:51.089818 18141 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 18 start pre_vote
W1218 01:11:51.681478 18139 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:11:51.728144 18140 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 18 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:51.864792 18140 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 18 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:51.943030 18140 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 18 start vote and grant vote self
I1218 01:11:52.209806 18140 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 19 votedfor 10.1.3.3:8700:0 time: 49550
W1218 01:11:52.214013 18153 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:11:52.227312 18141 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 20 current_ctx_version 21
I1218 01:11:52.260345 18130 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 19 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:52.265903 18139 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 19 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:11:52.281055 18139 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 19 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:11:52.295506 18139 replicator.cpp:143] Replicator=3337189589018@10.1.1.3:8700:0 is started, group Atomic
I1218 01:11:52.463580 18139 replicator.cpp:143] Replicator=3393024163869@10.1.2.3:8700:0 is started, group Atomic
I1218 01:11:52.546239 18139 replicator.cpp:143] Replicator=3418793967617@10.1.4.3:8700:0 is started, group Atomic
I1218 01:11:52.561244 18139 replicator.cpp:143] Replicator=3435973836801@10.1.5.3:8700:0 is started, group Atomic
W1218 01:11:52.674822 18140 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 7 current_ctx_version 8
W1218 01:11:52.734650 18153 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==19025==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
I1218 01:11:52.982661 18130 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:11:52.995908 18130 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f7ad803d09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
I1218 01:11:53.119479 18130 server.cpp:291] Node becomes leader
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f7ad803d09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f7ad803d09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:11:55.464213 18140 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:11:56.871906 18130 input_messenger.cpp:381] Fail to read from Socket{id=8589935006 fd=8 addr=10.1.1.3:8700:35960} (0x6310000cfb80): Connection reset by peer [104]
W1218 01:11:56.889338 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935006fd=8 addr=10.1.1.3:8700:35960} (0x0x6310000cfb80): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006
I1218 01:11:57.039549 18139 socket.cpp:2570] Checking Socket{id=8589935006 addr=10.1.1.3:8700} (0x6310000cfb80)
W1218 01:11:58.822222 18153 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:11:58.879981 18140 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:11:59.384624 18140 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000014
I1218 01:11:59.402179 18140 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000014
I1218 01:11:59.413792 18140 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000012
I1218 01:11:59.563264 18140 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=14 last_included_term=19
I1218 01:11:59.704149 18130 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 13 time: 66567
W1218 01:12:01.600090 18139 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:02.077978 18141 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006
W1218 01:12:04.424749 18140 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==19213==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f5a76e8809a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f5a76e8809a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f5a76e8809a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:12:07.222846 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006
W1218 01:12:07.410120 18139 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:13.976902 18130 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:15.827919 18140 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006
W1218 01:12:16.757645 18130 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:19.481209 18153 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:20.986315 18140 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006
W1218 01:12:22.266037 18139 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:25.382061 18140 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:26.084614 18153 input_messenger.cpp:381] Fail to read from Socket{id=8589935007 fd=9 addr=10.1.2.3:8700:45612} (0x6310000cfe40): Connection reset by peer [104]
W1218 01:12:26.100876 18153 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935007fd=9 addr=10.1.2.3:8700:45612} (0x0x6310000cfe40): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935007 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935007 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935007
I1218 01:12:26.266964 18139 socket.cpp:2570] Checking Socket{id=8589935007 addr=10.1.2.3:8700} (0x6310000cfe40)
W1218 01:12:26.479898 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935006
W1218 01:12:27.916309 18141 input_messenger.cpp:381] Fail to read from Socket{id=25769804164 fd=12 addr=10.1.4.3:8700:38484} (0x6310000cb400): Connection reset by peer [104]
W1218 01:12:27.925105 18141 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=25769804164fd=12 addr=10.1.4.3:8700:38484} (0x0x6310000cb400): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769804164 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769804164 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769804164
I1218 01:12:28.028009 18140 socket.cpp:2570] Checking Socket{id=25769804164 addr=10.1.4.3:8700} (0x6310000cb400)
W1218 01:12:28.217665 18140 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=111, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:12:29.108314 18153 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:12:29.110246 18153 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 14 and last_snapshot_index 14 is less than 1, will clear bufferred logs and return success
I1218 01:12:29.137037 18153 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 15 time: 24910
I1218 01:12:29.145788 18153 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000008'
I1218 01:12:29.527869 18141 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 19 last_included_term 19 last_included_index 14 uri remote://10.1.3.3:8700/635897606719495673
I1218 01:12:29.617022 18130 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 14 last_included_term 19 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:12:30.266269 18153 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 19 last_included_term 19 last_included_index 14 uri remote://10.1.3.3:8700/635897606719495674
I1218 01:12:30.497390 18153 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 14 last_included_term 19 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:12:31.018185 18140 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 19 last_included_term 19 last_included_index 14 uri remote://10.1.3.3:8700/635897606719495675
I1218 01:12:31.052006 18153 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 14 last_included_term 19 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:31.293784 18141 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935007 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935007 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935007 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935007
W1218 01:12:31.408869 18139 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 19 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:12:31.497531 18141 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:12:31.564931 18139 replicator.cpp:989] Group Atomic Replicator=3337189589018 is going to quit
I1218 01:12:31.566246 18139 replicator.cpp:1258] Replicator=3337189589018 is going to quit
I1218 01:12:31.595999 18139 replicator.cpp:989] Group Atomic Replicator=3393024163869 is going to quit
I1218 01:12:31.596837 18139 replicator.cpp:1258] Replicator=3393024163869 is going to quit
I1218 01:12:31.598026 18139 replicator.cpp:989] Group Atomic Replicator=3418793967617 is going to quit
I1218 01:12:31.598888 18139 replicator.cpp:1258] Replicator=3418793967617 is going to quit
I1218 01:12:31.675570 18139 replicator.cpp:989] Group Atomic Replicator=3435973836801 is going to quit
I1218 01:12:31.676564 18139 replicator.cpp:1258] Replicator=3435973836801 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:12:35.802240 19633 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:12:35.835173 19633 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:12:35.838196 19633 server.cpp:499] Fail to start Server
I1218 01:12:36.941674 18140 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 19 start pre_vote
W1218 01:12:37.352289 18130 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:12:37.847949 18139 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 19 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:12:37.937868 18130 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 19 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:12:37.939970 18130 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 19 start vote and grant vote self
W1218 01:12:38.215327 18141 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:12:38.420174 18130 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 20 votedfor 10.1.3.3:8700:0 time: 264185
W1218 01:12:38.429334 18153 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 22 current_ctx_version 23
I1218 01:12:38.466327 18141 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 20 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:12:38.511365 18141 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 20 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:12:38.588950 18141 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 20 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:12:38.612612 18141 replicator.cpp:143] Replicator=4720169058363@10.1.1.3:8700:0 is started, group Atomic
I1218 01:12:38.689750 18141 replicator.cpp:143] Replicator=4741643894809@10.1.2.3:8700:0 is started, group Atomic
I1218 01:12:38.703761 18141 replicator.cpp:143] Replicator=4763118731281@10.1.4.3:8700:0 is started, group Atomic
I1218 01:12:38.752986 18141 replicator.cpp:143] Replicator=3487513444401@10.1.5.3:8700:0 is started, group Atomic
W1218 01:12:38.872081 18140 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:38.919672 18139 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 9 current_ctx_version 10
I1218 01:12:38.930970 18140 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000015' with fd=10
I1218 01:12:39.104223 18139 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:12:39.167323 18139 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:12:39.240484 18139 server.cpp:291] Node becomes leader
W1218 01:12:41.758785 18140 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:44.933223 18139 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475
I1218 01:12:44.984623 18130 socket.cpp:2570] Checking Socket{id=17179869475 addr=10.1.4.3:8700} (0x6310000a2900)
W1218 01:12:45.071044 18141 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:47.823097 18139 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:50.053355 18130 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475
W1218 01:12:50.925987 18153 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==19633==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fccc028509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fccc028509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fccc028509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:12:52.915570 18096 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:12:53.877005 18141 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:12:55.203310 18153 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475
W1218 01:12:56.676234 18130 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:12:59.113703 18140 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:12:59.143574 18153 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000015
I1218 01:12:59.144954 18153 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000015
I1218 01:12:59.147337 18153 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000014
I1218 01:12:59.168251 18153 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=15 last_included_term=20
W1218 01:12:59.548215 18141 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:13:00.305701 18139 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475
W1218 01:13:02.546865 18153 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:13:03.753526 18140 input_messenger.cpp:381] Fail to read from Socket{id=42949673430 fd=8 addr=10.1.2.3:8700:59042} (0x6310001055c0): Connection reset by peer [104]
W1218 01:13:03.785912 18140 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=42949673430fd=8 addr=10.1.2.3:8700:59042} (0x0x6310001055c0): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=42949673430 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=42949673430 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=42949673430
I1218 01:13:03.885442 18130 socket.cpp:2570] Checking Socket{id=42949673430 addr=10.1.2.3:8700} (0x6310001055c0)
W1218 01:13:04.446012 18141 input_messenger.cpp:381] Fail to read from Socket{id=25769804163 fd=7 addr=10.1.1.3:8700:48998} (0x6310000cb140): Connection reset by peer [104]
W1218 01:13:04.461596 18141 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=25769804163fd=7 addr=10.1.1.3:8700:48998} (0x0x6310000cb140): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804163 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804163 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804163
I1218 01:13:04.567086 18139 socket.cpp:2570] Checking Socket{id=25769804163 addr=10.1.1.3:8700} (0x6310000cb140)
W1218 01:13:05.304456 18139 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:13:05.710481 18140 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869475
W1218 01:13:08.136906 18141 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:13:08.907603 18140 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=42949673430 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=42949673430 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=42949673430 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=42949673430
W1218 01:13:09.469353 18140 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 20 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:13:09.500970 18141 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:13:09.509963 18140 replicator.cpp:989] Group Atomic Replicator=4720169058363 is going to quit
I1218 01:13:09.515594 18140 replicator.cpp:1258] Replicator=4720169058363 is going to quit
I1218 01:13:09.520630 18140 replicator.cpp:989] Group Atomic Replicator=4741643894809 is going to quit
I1218 01:13:09.521325 18140 replicator.cpp:1258] Replicator=4741643894809 is going to quit
I1218 01:13:09.536273 18140 replicator.cpp:989] Group Atomic Replicator=4763118731281 is going to quit
I1218 01:13:09.537103 18140 replicator.cpp:1258] Replicator=4763118731281 is going to quit
I1218 01:13:09.538225 18140 replicator.cpp:989] Group Atomic Replicator=3487513444401 is going to quit
I1218 01:13:09.553604 18140 replicator.cpp:1258] Replicator=3487513444401 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:13:11.285537 20016 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:13:12.069841 19999 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:13:12.075754 19999 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:13:12.077904 19999 server.cpp:499] Fail to start Server
I1218 01:13:15.400043 18139 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 20 start pre_vote
W1218 01:13:16.157263 18153 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:13:16.470530 18140 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 20 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:13:16.567265 18141 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 20 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:13:16.569526 18141 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 20 start vote and grant vote self
I1218 01:13:16.704520 18141 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 21 votedfor 10.1.3.3:8700:0 time: 69454
W1218 01:13:16.707417 18139 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 24 current_ctx_version 25
W1218 01:13:16.757479 18153 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:13:16.808313 18130 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 21 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:13:16.815908 18140 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 21 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:13:16.868515 18140 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 21 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:13:16.876711 18140 replicator.cpp:143] Replicator=3341484556343@10.1.1.3:8700:0 is started, group Atomic
I1218 01:13:16.986410 18140 replicator.cpp:143] Replicator=4763118731285@10.1.2.3:8700:0 is started, group Atomic
I1218 01:13:16.989632 18140 replicator.cpp:143] Replicator=4720169058367@10.1.4.3:8700:0 is started, group Atomic
I1218 01:13:17.011781 18140 replicator.cpp:143] Replicator=6597069766850@10.1.5.3:8700:0 is started, group Atomic
W1218 01:13:17.137738 18139 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 11 current_ctx_version 12
W1218 01:13:17.139526 18141 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:13:17.557798 18139 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:13:17.570931 18139 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:13:17.689885 18139 server.cpp:291] Node becomes leader
W1218 01:13:19.865590 18155 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:13:22.672878 18155 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:13:25.374302 18128 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==19999==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f2b3780e09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f2b3780e09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f2b3780e09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:13:28.753919 18135 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:13:29.142724 18153 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:13:29.247609 18153 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000016
I1218 01:13:29.249981 18153 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000016
I1218 01:13:29.260962 18153 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000015
I1218 01:13:29.361296 18153 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=16 last_included_term=21
I1218 01:13:29.434198 18155 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 16 time: 31694
W1218 01:13:31.591650 18128 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:13:56.953358 20513 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:13:57.083815 20513 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:13:57.086326 20513 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:13:57.165354 20513 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:13:57.177174 20513 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 16 time: 10118
I1218 01:13:57.184971 20513 log.cpp:1115] load open segment, path: ./data/log first_index: 15
I1218 01:13:57.235703 20513 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:13:57.411700 20575 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:13:57.451646 20575 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 16 last_included_term: 21 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:13:57.517297 20513 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 21 votedfor 10.1.3.3:8700:0 time: 4484
I1218 01:13:57.549670 20513 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 21 last_log_id: (index=16,term=21) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:13:57.654323 20513 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:14:03.447366 20572 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 21 start pre_vote
W1218 01:14:04.097352 20569 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=93 addr=10.1.1.3:8700} (0x0x631000050800): Connection timed out
W1218 01:14:04.664964 20567 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:14:04.707968 20554 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 22 current_term 21 granted 1 rejected_by_lease 0
I1218 01:14:04.768074 20579 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 21 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:14:04.916762 20577 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 21 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:14:04.932129 20577 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 21 start vote and grant vote self
W1218 01:14:05.078787 20579 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:14:05.247521 20577 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 22 votedfor 10.1.3.3:8700:0 time: 247521
I1218 01:14:05.252990 20567 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.4.3:8700:0 in term 22 current_term 22 log_is_ok 1 votable_time 0
I1218 01:14:05.263890 20554 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 22 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:14:05.316058 20579 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 22 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:14:05.880604 20577 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 22 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:14:05.882279 20577 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 22 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:14:05.898321 20577 replicator.cpp:143] Replicator=1116691496966@10.1.1.3:8700:0 is started, group Atomic
I1218 01:14:05.961064 20577 replicator.cpp:143] Replicator=2254857830401@10.1.2.3:8700:0 is started, group Atomic
I1218 01:14:05.964265 20577 replicator.cpp:143] Replicator=2272037699585@10.1.4.3:8700:0 is started, group Atomic
I1218 01:14:05.967056 20577 replicator.cpp:143] Replicator=2289217568769@10.1.5.3:8700:0 is started, group Atomic
W1218 01:14:06.203263 20579 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:14:06.280557 20575 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 23 current_term 22 log_is_ok 0 votable_time 0
I1218 01:14:06.291182 20567 replicator.cpp:1258] Replicator=2254857830401 is going to quit
I1218 01:14:06.292484 20581 replicator.cpp:1258] Replicator=1116691496966 is going to quit
I1218 01:14:06.301440 20554 server.cpp:296] Node stepped down : Raft node receives higher term request_vote_request.
I1218 01:14:06.303071 20575 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:14:06.313761 20579 replicator.cpp:1258] Replicator=2272037699585 is going to quit
I1218 01:14:06.347502 20575 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 23 votedfor 0.0.0.0:0:0 time: 18201
I1218 01:14:06.372152 20575 replicator.cpp:989] Group Atomic Replicator=2289217568769 is going to quit
I1218 01:14:06.373853 20575 replicator.cpp:1258] Replicator=2289217568769 is going to quit
I1218 01:14:06.408766 20577 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 23 current_term 23 granted 0 rejected_by_lease 0
I1218 01:14:06.411695 20577 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=23, status=Follower receives message from new leader with the same term.}
W1218 01:14:06.473699 20567 log_manager.cpp:592] Truncating storage to last_index_kept=16
I1218 01:14:06.902818 20577 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:14:17.937830 20573 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:14:18.062279 20573 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000017
I1218 01:14:18.064251 20573 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000017
I1218 01:14:18.071192 20573 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000016
I1218 01:14:18.122090 20573 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=17 last_included_term=23
I1218 01:14:18.191303 20573 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 17 time: 22079
I1218 01:14:27.539621 20577 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 24 current_term 23 granted 1 rejected_by_lease 0
I1218 01:14:27.914291 20574 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 23 start pre_vote
I1218 01:14:27.916205 20573 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=23, status=Lost connection from leader 10.1.1.3:8700:0}
W1218 01:14:27.981367 20567 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=279 addr=10.1.1.3:8700} (0x0x6310000a0800): Connection refused
I1218 01:14:28.038301 20579 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 24 current_term 23 log_is_ok 1 votable_time 0
W1218 01:14:28.089095 20575 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:14:28.225092 20579 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 24 votedfor 0.0.0.0:0:0 time: 151519
I1218 01:14:28.277092 20579 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 24 votedfor 10.1.2.3:8700:0 time: 49302
W1218 01:14:28.279171 20554 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 6 current_ctx_version 8
W1218 01:14:28.356607 20575 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 6 current_ctx_version 8
I1218 01:14:28.411419 20579 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 25 current_term 24 granted 1 rejected_by_lease 0
I1218 01:14:28.604386 20554 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=24, status=Follower receives message from new leader with the same term.}
I1218 01:14:29.078935 20567 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:15:16.191469 21363 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:15:16.332149 21363 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:15:16.334260 21363 server.cpp:499] Fail to start Server
I1218 01:15:22.019930 20565 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=24, status=Lost connection from leader 10.1.2.3:8700:0}
I1218 01:15:22.009281 20574 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 24 start pre_vote
I1218 01:15:22.124008 20573 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
W1218 01:15:22.221179 20572 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=17179869465 fd=8 addr=10.1.2.3:38086:8700} (0x6310000a0d80): Unknown error 1014 [1014]
W1218 01:15:22.227156 20575 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=17179869465 fd=8 addr=10.1.2.3:38086:8700} (0x6310000a0d80): Unknown error 1014 [1014]
W1218 01:15:22.279009 20567 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=17179869465 fd=8 addr=10.1.2.3:38086:8700} (0x6310000a0d80): Unknown error 1014 [1014]
I1218 01:15:22.301254 20555 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=24, status=Follower receives message from new leader with the same term.}
I1218 01:15:22.452059 20563 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 25 current_term 24 granted 1 rejected_by_lease 0
I1218 01:15:22.462167 20564 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 25 current_term 24 granted 1 rejected_by_lease 0
I1218 01:15:22.464298 20566 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 25 current_term 24 granted 1 rejected_by_lease 0
I1218 01:15:22.465417 20559 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 25 current_term 24 granted 1 rejected_by_lease 0
W1218 01:15:22.484373 20559 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=372 fd=9 addr=10.1.2.3:58756:8700} (0x6310000c8800): Unknown error 1014 [1014]
W1218 01:15:22.487478 20566 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=373 fd=10 addr=10.1.4.3:45848:8700} (0x6310000c8ac0): Unknown error 1014 [1014]
W1218 01:15:22.481408 20564 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=374 fd=11 addr=10.1.2.3:40702:8700} (0x6310000c8d80): Unknown error 1014 [1014]
I1218 01:15:22.551766 20556 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 25 current_term 24 granted 1 rejected_by_lease 0
W1218 01:15:22.563860 20563 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=377 fd=14 addr=10.1.4.3:55236:8700} (0x6310000c95c0): Unknown error 1014 [1014]
I1218 01:15:22.579706 20557 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 25 current_term 24 granted 1 rejected_by_lease 0
W1218 01:15:22.581130 20557 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=376 fd=13 addr=10.1.2.3:40716:8700} (0x6310000c9300): Unknown error 1014 [1014]
W1218 01:15:22.892295 20556 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=375 fd=12 addr=10.1.4.3:55220:8700} (0x6310000c9040): Unknown error 1014 [1014]
I1218 01:15:23.071589 20573 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000018
I1218 01:15:23.076892 20573 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000018
I1218 01:15:23.131733 20573 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000017
I1218 01:15:23.142868 20573 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=18 last_included_term=24
I1218 01:15:23.228224 20573 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 18 time: 54279
I1218 01:15:23.363255 20571 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 24 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:15:23.414182 20562 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 24 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:15:23.415933 20562 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 24 start vote and grant vote self
I1218 01:15:23.432752 20572 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=24, status=A follower's leader_id is reset to NULL as it begins to request_vote.}
I1218 01:15:23.486215 20562 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 25 votedfor 10.1.3.3:8700:0 time: 43232
W1218 01:15:23.578888 20555 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:15:23.607445 20555 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:15:23.697096 20571 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 25 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:15:23.748385 20574 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 25 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:15:23.749802 20574 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 25 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:15:23.898792 20574 replicator.cpp:143] Replicator=3405909065729@10.1.1.3:8700:0 is started, group Atomic
I1218 01:15:24.109464 20574 replicator.cpp:143] Replicator=3423088934913@10.1.2.3:8700:0 is started, group Atomic
I1218 01:15:24.175531 20574 replicator.cpp:143] Replicator=3440268804097@10.1.4.3:8700:0 is started, group Atomic
I1218 01:15:24.235430 20574 replicator.cpp:143] Replicator=3457448673281@10.1.5.3:8700:0 is started, group Atomic
W1218 01:15:24.344947 20572 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:15:24.338265 20530 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:15:24.432601 20569 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 13 current_ctx_version 14
W1218 01:15:24.441149 20573 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 3 current_ctx_version 4
I1218 01:15:24.587962 20572 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:15:24.597277 20572 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:15:24.645272 20572 server.cpp:291] Node becomes leader
W1218 01:15:27.280364 20569 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:15:30.179659 20571 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:15:32.999948 20573 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==21363==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f8a13d8509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:16:01.134075 21826 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:16:01.861831 21826 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:16:01.863581 21826 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:16:02.170347 21826 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:16:02.174743 21826 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 18 time: 2408
I1218 01:16:02.176680 21826 log.cpp:1115] load open segment, path: ./data/log first_index: 15
I1218 01:16:02.192288 21826 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:16:02.258838 21877 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:16:02.282356 21877 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 18 last_included_term: 24 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:16:02.355129 21826 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 25 votedfor 10.1.3.3:8700:0 time: 2828
I1218 01:16:02.356777 21826 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 25 last_log_id: (index=19,term=25) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:16:02.369148 21826 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:16:08.303066 21869 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 27 current_term 25 granted 1 rejected_by_lease 0
I1218 01:16:08.765878 21887 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 27 current_term 25 log_is_ok 1 votable_time 0
I1218 01:16:08.906363 21887 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 27 votedfor 0.0.0.0:0:0 time: 137430
I1218 01:16:09.040892 21887 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 27 votedfor 10.1.1.3:8700:0 time: 119378
I1218 01:16:09.548822 21888 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=27, status=Follower receives message from new leader with the same term.}
I1218 01:16:10.131214 21888 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:16:10.133522 21888 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:16:10.146871 21888 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:16:17.338919 21843 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:16:23.909137 21871 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=27, status=Lost connection from leader 10.1.1.3:8700:0}
I1218 01:16:23.929553 21887 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 27 start pre_vote
W1218 01:16:24.081288 21872 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=372 addr=10.1.1.3:8700} (0x0x6310000c8800): Connection refused
W1218 01:16:24.113225 21884 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=376 addr=10.1.4.3:8700} (0x0x6310000c9300): Connection refused
W1218 01:16:24.117029 21884 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=374 addr=10.1.2.3:8700} (0x0x6310000c8d80): Connection refused
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:16:24.150104 22070 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:16:24.267433 21888 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:16:24.964192 22047 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:16:24.966071 22047 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:16:24.979542 22047 server.cpp:499] Fail to start Server
I1218 01:16:26.129364 21868 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:16:26.300263 21872 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000021
I1218 01:16:26.302304 21872 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000021
I1218 01:16:26.366008 21872 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000018
I1218 01:16:26.583823 21872 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=21 last_included_term=27
I1218 01:16:26.681665 21886 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 19 time: 30792
I1218 01:16:29.687758 21886 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 27 start pre_vote
W1218 01:16:30.444701 21871 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:16:30.489024 21872 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 27 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:16:30.679961 21887 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 27 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:16:30.681458 21887 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 27 start vote and grant vote self
W1218 01:16:30.849978 21884 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:16:31.195739 21887 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 28 votedfor 10.1.3.3:8700:0 time: 406800
I1218 01:16:31.345491 21893 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 28 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:16:31.367228 21869 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 28 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:16:31.368745 21869 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 28 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:16:31.386981 21869 replicator.cpp:143] Replicator=6597069766657@10.1.1.3:8700:0 is started, group Atomic
I1218 01:16:31.443715 21869 replicator.cpp:143] Replicator=6614249635841@10.1.2.3:8700:0 is started, group Atomic
I1218 01:16:31.446978 21869 replicator.cpp:143] Replicator=6631429505025@10.1.4.3:8700:0 is started, group Atomic
I1218 01:16:31.456185 21869 replicator.cpp:143] Replicator=6648609374209@10.1.5.3:8700:0 is started, group Atomic
W1218 01:16:31.623670 21871 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:16:31.945109 21893 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 29 current_term 28 granted 0 rejected_by_lease 0
W1218 01:16:32.052407 21886 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 01:16:32.063745 21886 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 7 current_ctx_version 8
I1218 01:16:32.289913 21869 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:16:32.308830 21869 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:16:32.537006 21869 server.cpp:291] Node becomes leader
W1218 01:16:34.464908 21884 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:16:35.479185 21871 input_messenger.cpp:381] Fail to read from Socket{id=559 fd=12 addr=10.1.2.3:8700:42206} (0x63100012cac0): Connection reset by peer [104]
W1218 01:16:35.541129 21871 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=559fd=12 addr=10.1.2.3:8700:42206} (0x0x63100012cac0): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=559 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=559 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=559
I1218 01:16:35.621145 21893 socket.cpp:2570] Checking Socket{id=559 addr=10.1.2.3:8700} (0x63100012cac0)
W1218 01:16:37.192847 21871 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934778 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934778 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934778 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934778
I1218 01:16:37.240809 21887 socket.cpp:2570] Checking Socket{id=8589934778 addr=10.1.1.3:8700} (0x631000078800)
W1218 01:16:37.266937 21884 input_messenger.cpp:381] Fail to read from Socket{id=561 fd=13 addr=10.1.4.3:8700:47738} (0x63100012d040): Connection reset by peer [104]
W1218 01:16:37.268895 21884 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=561fd=13 addr=10.1.4.3:8700:47738} (0x0x63100012d040): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=561 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=561 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=561
I1218 01:16:37.372658 21869 socket.cpp:2570] Checking Socket{id=561 addr=10.1.4.3:8700} (0x63100012d040)
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:17:04.159755 22458 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:17:05.181396 22424 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:17:05.641791 22424 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:17:05.677367 22424 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:17:06.165728 22424 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:17:06.200474 22424 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 19 time: 33406
I1218 01:17:06.202301 22424 log.cpp:1115] load open segment, path: ./data/log first_index: 15
I1218 01:17:06.414870 22424 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:17:06.693480 22489 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:17:06.867592 22489 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 21 last_included_term: 27 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:17:06.909799 22424 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 28 votedfor 10.1.3.3:8700:0 time: 30488
I1218 01:17:06.911481 22424 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 28 last_log_id: (index=22,term=28) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:17:06.933643 22424 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:17:11.066221 22520 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 29 current_term 28 granted 1 rejected_by_lease 0
I1218 01:17:11.389572 22489 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 29 current_term 28 granted 1 rejected_by_lease 0
I1218 01:17:11.521164 22491 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 29 current_term 28 log_is_ok 1 votable_time 0
I1218 01:17:11.565712 22491 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 29 votedfor 0.0.0.0:0:0 time: 37489
I1218 01:17:11.648942 22491 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 29 votedfor 10.1.1.3:8700:0 time: 33865
I1218 01:17:11.665338 22520 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.4.3:8700:0 in term 29 current_term 29 log_is_ok 1 votable_time 0
I1218 01:17:12.080485 22491 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=29, status=Follower receives message from new leader with the same term.}
I1218 01:17:12.585269 22491 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:17:12.588687 22491 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:17:30.423918 22495 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:17:31.291100 22495 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000023
I1218 01:17:31.293219 22495 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000023
I1218 01:17:31.323688 22495 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000021
I1218 01:17:31.373673 22495 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=23 last_included_term=29
I1218 01:17:31.465444 22495 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 22 time: 37505
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:18:19.457237 23268 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:18:19.803043 23268 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:18:19.805101 23268 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:18:20.465453 23268 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:18:20.509053 23268 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 22 time: 28578
I1218 01:18:20.552122 23268 log.cpp:1115] load open segment, path: ./data/log first_index: 15
I1218 01:18:20.729882 23268 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:18:20.984423 23318 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:18:21.023197 23318 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 23 last_included_term: 29 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:18:21.076380 23268 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 29 votedfor 10.1.1.3:8700:0 time: 22109
I1218 01:18:21.099730 23268 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 29 last_log_id: (index=23,term=29) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:18:21.137404 23268 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:18:31.117244 23338 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 29 start pre_vote
I1218 01:18:31.639699 23318 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 30 current_term 29 granted 1 rejected_by_lease 0
I1218 01:18:32.441488 23334 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 29 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:18:32.977602 23307 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:18:33.006995 23307 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 29 start vote and grant vote self
I1218 01:18:33.248677 23307 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 30 votedfor 10.1.3.3:8700:0 time: 109594
I1218 01:18:33.281716 23302 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 30 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:18:33.298988 23334 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 31 current_term 30 granted 1 rejected_by_lease 0
I1218 01:18:33.329104 23334 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 30 current_term 30 granted 1 rejected_by_lease 0
I1218 01:18:33.395709 23330 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 30 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:18:33.396970 23330 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 30 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:18:33.460584 23330 replicator.cpp:143] Replicator=2207613190149@10.1.1.3:8700:0 is started, group Atomic
I1218 01:18:33.632674 23330 replicator.cpp:143] Replicator=4402341478401@10.1.2.3:8700:0 is started, group Atomic
I1218 01:18:33.677155 23330 replicator.cpp:143] Replicator=4419521347585@10.1.4.3:8700:0 is started, group Atomic
I1218 01:18:33.697429 23330 replicator.cpp:143] Replicator=4436701216769@10.1.5.3:8700:0 is started, group Atomic
I1218 01:18:33.865082 23307 replicator.cpp:1258] Replicator=4402341478401 is going to quit
I1218 01:18:33.866357 23303 replicator.cpp:1258] Replicator=4436701216769 is going to quit
W1218 01:18:33.907219 23302 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 2 current_ctx_version 3
W1218 01:18:33.917757 23334 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:18:33.964179 23318 server.cpp:296] Node stepped down : Leader receives higher term braft.AppendEntriesResponse from peer:10.1.2.3:8700:0
I1218 01:18:33.980161 23307 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:18:34.064674 23307 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 31 votedfor 0.0.0.0:0:0 time: 51055
I1218 01:18:34.109424 23328 replicator.cpp:317] Replicator=2207613190149 is going to quit, group Atomic
I1218 01:18:34.117259 23328 replicator.cpp:1258] Replicator=2207613190149 is going to quit
I1218 01:18:34.122364 23331 replicator.cpp:989] Group Atomic Replicator=4419521347585 is going to quit
I1218 01:18:34.140044 23331 replicator.cpp:1258] Replicator=4419521347585 is going to quit
I1218 01:18:34.188287 23317 node.cpp:2108] node Atomic:10.1.3.3:8700:0 ignore PreVote from 10.1.4.3:8700:0 in term 30 current_term 31
W1218 01:18:34.321655 23313 node.cpp:2202] node Atomic:10.1.3.3:8700:0 raise term 31 when get last_log_id
I1218 01:18:34.395900 23328 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=31, status=Follower receives message from new leader with the same term.}
W1218 01:18:34.435833 23317 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 2 current_ctx_version 5
W1218 01:18:34.589259 23311 log_manager.cpp:592] Truncating storage to last_index_kept=23
W1218 01:18:34.655117 23317 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:18:35.242821 23331 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:18:44.703423 23338 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:18:44.852689 23338 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000024
I1218 01:18:44.854240 23338 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000024
I1218 01:18:44.875880 23338 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000023
I1218 01:18:44.906327 23338 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=24 last_included_term=31
I1218 01:18:44.944859 23338 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 24 time: 18166
I1218 01:18:49.438202 23311 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.5.3:8700:0 in term 32 current_term 31 granted 1 rejected_by_lease 0
I1218 01:18:49.528941 23328 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 32 current_term 31 granted 1 rejected_by_lease 0
I1218 01:18:49.694252 23331 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.5.3:8700:0 in term 32 current_term 31 log_is_ok 1 votable_time 0
I1218 01:18:49.720564 23319 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=31, status=Raft node receives higher term request_vote_request.}
I1218 01:18:49.821447 23331 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 32 votedfor 0.0.0.0:0:0 time: 77377
I1218 01:18:49.891651 23331 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 32 votedfor 10.1.5.3:8700:0 time: 28055
I1218 01:18:49.899956 23335 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 32 current_term 32 log_is_ok 1 votable_time 0
I1218 01:18:50.577852 23304 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 32 start pre_vote
W1218 01:18:50.607416 23335 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=839 addr=10.1.2.3:8700} (0x0x631000190d80): Connection refused
I1218 01:18:50.638612 23319 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 32 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:18:50.663192 23313 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 32 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:18:50.664597 23313 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 32 start vote and grant vote self
W1218 01:18:50.736168 23319 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=931 addr=10.1.2.3:8700} (0x0x6310001b8ac0): Connection refused
I1218 01:18:50.752025 23313 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 33 votedfor 10.1.3.3:8700:0 time: 66888
W1218 01:18:50.759191 23317 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.5.3:8700:0 ctx_version 8 current_ctx_version 9
I1218 01:18:50.844169 23335 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 33 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:18:50.916666 23335 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 33 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:18:50.919086 23335 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 33 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:18:50.941012 23335 replicator.cpp:143] Replicator=9925669421062@10.1.1.3:8700:0 is started, group Atomic
I1218 01:18:50.969345 23335 replicator.cpp:143] Replicator=9904194584581@10.1.2.3:8700:0 is started, group Atomic
I1218 01:18:50.973814 23335 replicator.cpp:143] Replicator=10995116277761@10.1.4.3:8700:0 is started, group Atomic
I1218 01:18:50.997298 23335 replicator.cpp:143] Replicator=11012296146945@10.1.5.3:8700:0 is started, group Atomic
W1218 01:18:51.031013 23313 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E111]Fail to connect Socket{id=8589935526 addr=10.1.2.3:8700} (0x0x6310001b9300): Connection refused [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
I1218 01:18:51.103754 23313 socket.cpp:2570] Checking Socket{id=8589935526 addr=10.1.2.3:8700} (0x6310001b9300)
W1218 01:18:51.143635 23311 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 3 current_ctx_version 4
I1218 01:18:51.345533 23313 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 34 current_term 33 granted 0 rejected_by_lease 0
I1218 01:18:51.397246 23331 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:18:51.401067 23331 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:18:51.439100 23331 server.cpp:291] Node becomes leader
W1218 01:18:53.827186 23325 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
W1218 01:18:56.491925 23338 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
W1218 01:18:59.091836 23312 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
W1218 01:19:01.653357 23312 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
W1218 01:19:05.248427 23326 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
W1218 01:19:07.809597 23306 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=61, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
W1218 01:19:09.677292 23304 input_messenger.cpp:381] Fail to read from Socket{id=8589935522 fd=10 addr=10.1.4.3:8700:45954} (0x6310001b8800): Connection reset by peer [104]
W1218 01:19:09.748756 23304 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935522fd=10 addr=10.1.4.3:8700:45954} (0x0x6310001b8800): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935522 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935522 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935522
I1218 01:19:09.820083 23306 socket.cpp:2570] Checking Socket{id=8589935522 addr=10.1.4.3:8700} (0x6310001b8800)
W1218 01:19:10.144340 23304 input_messenger.cpp:381] Fail to read from Socket{id=8589935525 fd=9 addr=10.1.1.3:8700:33096} (0x6310001b9040): Connection reset by peer [104]
W1218 01:19:10.158061 23304 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935525fd=9 addr=10.1.1.3:8700:33096} (0x0x6310001b9040): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935525 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935525 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935525
I1218 01:19:10.259843 23306 socket.cpp:2570] Checking Socket{id=8589935525 addr=10.1.1.3:8700} (0x6310001b9040)
W1218 01:19:10.371505 23304 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=71, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
W1218 01:19:12.945740 23326 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=81, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
I1218 01:19:14.779414 23304 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:19:14.916925 23306 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000025
I1218 01:19:14.939103 23306 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000025
W1218 01:19:15.032096 23338 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935522 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935522 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935522 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935522
I1218 01:19:15.039588 23306 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000024
I1218 01:19:15.176573 23306 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=25 last_included_term=33
I1218 01:19:15.251804 23306 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 25 time: 38316
W1218 01:19:15.443776 23326 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935525 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935525 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935525 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935525
W1218 01:19:15.551105 23312 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=91, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935526
W1218 01:19:16.381999 23325 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 33 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:19:16.422116 23304 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:19:16.435942 23325 replicator.cpp:989] Group Atomic Replicator=9925669421062 is going to quit
I1218 01:19:16.437649 23325 replicator.cpp:1258] Replicator=9925669421062 is going to quit
I1218 01:19:16.652452 23304 replicator.cpp:989] Group Atomic Replicator=10995116277761 is going to quit
I1218 01:19:16.653256 23304 replicator.cpp:1258] Replicator=10995116277761 is going to quit
I1218 01:19:16.671085 23304 replicator.cpp:989] Group Atomic Replicator=11012296146945 is going to quit
I1218 01:19:16.693636 23304 replicator.cpp:1258] Replicator=11012296146945 is going to quit
I1218 01:19:16.742066 23326 replicator.cpp:989] Group Atomic Replicator=9904194584581 is going to quit
I1218 01:19:16.743366 23326 replicator.cpp:1258] Replicator=9904194584581 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:19:19.542047 23794 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:19:19.709017 23794 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:19:19.712286 23794 server.cpp:499] Fail to start Server
I1218 01:19:21.941638 23304 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 33 start pre_vote
I1218 01:19:22.429725 23338 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 33 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:19:22.527714 23312 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 33 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:19:22.539614 23312 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 33 start vote and grant vote self
I1218 01:19:22.754762 23312 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 34 votedfor 10.1.3.3:8700:0 time: 156934
W1218 01:19:22.766034 23326 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 10 current_ctx_version 11
W1218 01:19:22.768723 23338 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 10 current_ctx_version 11
I1218 01:19:22.832653 23304 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 34 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:19:22.843189 23304 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 34 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:19:22.853937 23304 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 34 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:19:22.855896 23304 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 34 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:19:22.876101 23304 replicator.cpp:143] Replicator=15414637625422@10.1.1.3:8700:0 is started, group Atomic
I1218 01:19:22.899683 23304 replicator.cpp:143] Replicator=5652176961537@10.1.2.3:8700:0 is started, group Atomic
I1218 01:19:22.913302 23304 replicator.cpp:143] Replicator=5669356830721@10.1.4.3:8700:0 is started, group Atomic
I1218 01:19:22.937033 23304 replicator.cpp:143] Replicator=5686536699905@10.1.5.3:8700:0 is started, group Atomic
W1218 01:19:23.195394 23312 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 5 current_ctx_version 6
I1218 01:19:23.304508 23325 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:19:23.307395 23325 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:19:23.403649 23325 server.cpp:291] Node becomes leader
W1218 01:19:27.958815 23306 input_messenger.cpp:381] Fail to read from Socket{id=853 fd=10 addr=10.1.4.3:8700:56822} (0x631000193400): Connection reset by peer [104]
W1218 01:19:27.971235 23306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=853fd=10 addr=10.1.4.3:8700:56822} (0x0x631000193400): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=853 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=853 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=853
I1218 01:19:28.130040 23326 socket.cpp:2570] Checking Socket{id=853 addr=10.1.4.3:8700} (0x631000193400)
W1218 01:19:33.308135 23304 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:19:33.431602 23326 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=853 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=853 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=853 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=853

=================================================================
==23794==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f5739df109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f5739df109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f5739df109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:19:38.637485 23306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.4.3:8700 yet, server_id=853 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=853 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=853 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=853
W1218 01:19:39.058770 23312 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:19:46.503897 23325 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
W1218 01:19:46.652181 23309 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 34 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:19:46.758602 23329 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:19:47.029074 23309 replicator.cpp:989] Group Atomic Replicator=15414637625422 is going to quit
I1218 01:19:47.070673 23309 replicator.cpp:1258] Replicator=15414637625422 is going to quit
I1218 01:19:47.076370 23309 replicator.cpp:989] Group Atomic Replicator=5652176961537 is going to quit
I1218 01:19:47.077510 23309 replicator.cpp:1258] Replicator=5652176961537 is going to quit
I1218 01:19:47.081177 23309 replicator.cpp:989] Group Atomic Replicator=5669356830721 is going to quit
I1218 01:19:47.082283 23309 replicator.cpp:1258] Replicator=5669356830721 is going to quit
I1218 01:19:47.116245 23309 replicator.cpp:989] Group Atomic Replicator=5686536699905 is going to quit
I1218 01:19:47.117231 23309 replicator.cpp:1258] Replicator=5686536699905 is going to quit
I1218 01:19:47.359875 23338 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000026
I1218 01:19:47.388420 23338 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000026
I1218 01:19:47.492341 23338 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000025
I1218 01:19:47.714347 23338 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=26 last_included_term=34
I1218 01:19:47.868438 23306 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 26 time: 91292
I1218 01:19:48.015327 23326 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 35 current_term 34 granted 1 rejected_by_lease 0
I1218 01:19:48.213348 23338 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 35 current_term 34 log_is_ok 1 votable_time 0
I1218 01:19:48.253633 23338 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 35 votedfor 0.0.0.0:0:0 time: 38118
I1218 01:19:48.302695 23338 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 35 votedfor 10.1.1.3:8700:0 time: 28336
I1218 01:19:48.611193 23304 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=35, status=Follower receives message from new leader with the same term.}
I1218 01:19:49.585285 23326 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:20:17.014014 23312 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:20:17.416311 23338 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000027
I1218 01:20:17.463563 23338 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000027
I1218 01:20:17.498299 23338 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000026
I1218 01:20:17.614252 23338 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=27 last_included_term=35
I1218 01:20:18.433604 23338 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 27 time: 285351
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:20:20.871430 24407 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:20:20.902019 24407 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:20:20.916999 24407 server.cpp:499] Fail to start Server
I1218 01:20:24.953543 23312 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 35 start pre_vote
I1218 01:20:24.960134 23325 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=35, status=Lost connection from leader 10.1.1.3:8700:0}
I1218 01:20:25.543283 23326 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 35 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:20:25.581667 23325 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:20:25.588295 23304 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E2][10.1.1.3:8700][E2]peer_id not exist
I1218 01:20:26.012437 23304 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 34 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:20:26.014122 23304 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 35 start vote and grant vote self
W1218 01:20:26.145653 23306 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:20:26.222934 23304 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 36 votedfor 10.1.3.3:8700:0 time: 77748
I1218 01:20:26.229996 23306 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 36 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:20:26.364346 23338 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 36 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:20:26.376948 23338 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 36 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:20:26.469586 23338 replicator.cpp:143] Replicator=15474767167609@10.1.1.3:8700:0 is started, group Atomic
I1218 01:20:26.752292 23338 replicator.cpp:143] Replicator=5695126634525@10.1.2.3:8700:0 is started, group Atomic
I1218 01:20:26.760131 23338 replicator.cpp:143] Replicator=5639292059654@10.1.4.3:8700:0 is started, group Atomic
I1218 01:20:26.855991 23338 replicator.cpp:143] Replicator=2220498092061@10.1.5.3:8700:0 is started, group Atomic
W1218 01:20:26.957284 23312 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:20:27.081077 23325 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 7 current_ctx_version 8
I1218 01:20:27.313760 23325 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:20:27.325296 23325 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:20:28.459712 23325 server.cpp:291] Node becomes leader
W1218 01:20:29.801450 23325 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:20:33.225440 23326 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:20:34.094300 23304 input_messenger.cpp:381] Fail to read from Socket{id=8589935441 fd=12 addr=10.1.4.3:8700:42614} (0x631000192900): Connection reset by peer [104]
W1218 01:20:34.124145 23306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935441fd=12 addr=10.1.4.3:8700:42614} (0x0x631000192900): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935441 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935441 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935441
W1218 01:20:34.153329 23325 input_messenger.cpp:381] Fail to read from Socket{id=8589935439 fd=10 addr=10.1.2.3:8700:45348} (0x631000192380): Connection reset by peer [104]
W1218 01:20:34.179554 23325 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935439fd=10 addr=10.1.2.3:8700:45348} (0x0x631000192380): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935439 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935439 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935439
I1218 01:20:34.234045 23338 socket.cpp:2570] Checking Socket{id=8589935441 addr=10.1.4.3:8700} (0x631000192900)
I1218 01:20:34.269670 23338 socket.cpp:2570] Checking Socket{id=8589935439 addr=10.1.2.3:8700} (0x631000192380)
W1218 01:20:34.319301 23284 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:20:35.204155 23312 input_messenger.cpp:381] Fail to read from Socket{id=25769804799 fd=7 addr=10.1.1.3:8700:42322} (0x631000230800): Connection reset by peer [104]
W1218 01:20:35.206621 23312 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=25769804799fd=7 addr=10.1.1.3:8700:42322} (0x0x631000230800): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804799 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804799 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804799
I1218 01:20:35.316982 23325 socket.cpp:2570] Checking Socket{id=25769804799 addr=10.1.1.3:8700} (0x631000230800)
W1218 01:20:36.008720 23306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:20:38.835446 23306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:20:39.331265 23338 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935439 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935439 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935439 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935439
W1218 01:20:39.356344 23306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935441 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935441 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935441 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935441
W1218 01:20:40.422024 23312 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804799 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804799 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804799 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804799

=================================================================
==24407==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fc28dc7709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fc28dc7709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fc28dc7709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:20:41.697692 23326 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:20:42.171849 23325 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 36 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:20:42.240567 23325 replicator.cpp:989] Group Atomic Replicator=15474767167609 is going to quit
I1218 01:20:42.242333 23325 replicator.cpp:1258] Replicator=15474767167609 is going to quit
I1218 01:20:42.253952 23325 replicator.cpp:989] Group Atomic Replicator=5695126634525 is going to quit
I1218 01:20:42.233400 23326 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:20:42.264472 23325 replicator.cpp:1258] Replicator=5695126634525 is going to quit
I1218 01:20:42.265499 23325 replicator.cpp:989] Group Atomic Replicator=5639292059654 is going to quit
I1218 01:20:42.266317 23325 replicator.cpp:1258] Replicator=5639292059654 is going to quit
I1218 01:20:42.268597 23325 replicator.cpp:989] Group Atomic Replicator=2220498092061 is going to quit
I1218 01:20:42.269524 23325 replicator.cpp:1258] Replicator=2220498092061 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:20:46.815059 24630 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:20:46.965821 24630 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:20:46.973677 24630 server.cpp:499] Fail to start Server
I1218 01:20:47.322019 23338 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:20:47.458046 23338 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000028
I1218 01:20:47.461180 23338 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000028
I1218 01:20:47.473618 23338 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000027
I1218 01:20:47.627933 23338 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=28 last_included_term=36
I1218 01:20:47.744577 23326 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 28 time: 43949
I1218 01:20:47.924700 23325 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 36 start pre_vote
I1218 01:20:48.302026 23306 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 36 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:20:48.317577 23325 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:20:48.495558 23326 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 36 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:20:48.497280 23326 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 36 start vote and grant vote self
I1218 01:20:48.690685 23326 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 37 votedfor 10.1.3.3:8700:0 time: 46593
I1218 01:20:48.694196 23338 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 37 current_term 37 granted 1 rejected_by_lease 0
W1218 01:20:48.699345 23325 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 18 current_ctx_version 19
I1218 01:20:48.715251 23304 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 37 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:20:48.756330 23312 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:20:48.833288 23312 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 37 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:20:48.883554 23312 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 37 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:20:48.950642 23312 replicator.cpp:143] Replicator=2293512536078@10.1.1.3:8700:0 is started, group Atomic
I1218 01:20:49.128014 23312 replicator.cpp:143] Replicator=13322988552193@10.1.2.3:8700:0 is started, group Atomic
I1218 01:20:49.133292 23312 replicator.cpp:143] Replicator=13340168421377@10.1.4.3:8700:0 is started, group Atomic
I1218 01:20:49.163033 23312 replicator.cpp:143] Replicator=13357348290561@10.1.5.3:8700:0 is started, group Atomic
W1218 01:20:49.231575 23325 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 9 current_ctx_version 10
W1218 01:20:49.246021 23338 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:20:49.356879 23326 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:20:49.359615 23326 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:20:49.552898 23326 server.cpp:291] Node becomes leader
W1218 01:20:52.289997 23306 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:21:24.460189 25052 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:21:25.020373 25052 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:21:25.021772 25052 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:21:25.308853 25052 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:21:25.407591 25052 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 28 time: 37703
I1218 01:21:25.409575 25052 log.cpp:1115] load open segment, path: ./data/log first_index: 15
I1218 01:21:25.575873 25052 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:21:25.752000 25117 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:21:25.868093 25117 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 28 last_included_term: 36 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:21:25.911293 25052 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 37 votedfor 10.1.3.3:8700:0 time: 857
I1218 01:21:25.913111 25052 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 37 last_log_id: (index=29,term=37) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:21:25.933606 25052 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:21:31.536037 25132 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 37 start pre_vote
W1218 01:21:31.921183 25109 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=93 addr=10.1.1.3:8700} (0x0x631000050800): Connection timed out
W1218 01:21:32.078809 25117 node.cpp:1502] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 term 38 expect 37
I1218 01:21:32.683759 25117 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 38 votedfor 0.0.0.0:0:0 time: 515441
I1218 01:21:32.737190 25124 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 39 current_term 38 granted 1 rejected_by_lease 0
W1218 01:21:32.751693 25136 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.5.3:8700:0 ctx_version 2 current_ctx_version 3
W1218 01:21:32.817814 25131 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 2 current_ctx_version 3
I1218 01:21:32.843472 25107 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 39 current_term 38 granted 1 rejected_by_lease 0
I1218 01:21:32.847728 25117 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 39 current_term 38 log_is_ok 1 votable_time 0
I1218 01:21:32.942088 25117 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 39 votedfor 0.0.0.0:0:0 time: 92829
I1218 01:21:33.032701 25117 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 39 votedfor 10.1.2.3:8700:0 time: 88069
W1218 01:21:33.047591 25124 node.cpp:2202] node Atomic:10.1.3.3:8700:0 raise term 39 when get last_log_id
I1218 01:21:33.443591 25116 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=39, status=Follower receives message from new leader with the same term.}
I1218 01:21:33.857492 25131 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:21:33.882938 25131 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:21:33.885298 25131 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:21:54.730159 25109 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:21:54.870185 25105 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000031
I1218 01:21:54.900072 25105 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000031
I1218 01:21:54.951758 25105 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000028
I1218 01:21:55.038004 25105 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=31 last_included_term=39
I1218 01:21:55.164924 25105 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 29 time: 77791
I1218 01:21:56.132627 25116 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.5.3:8700:0 in term 40 current_term 39 granted 1 rejected_by_lease 0
I1218 01:21:56.307659 25131 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.5.3:8700:0 in term 40 current_term 39 log_is_ok 1 votable_time 0
I1218 01:21:56.332996 25133 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=39, status=Raft node receives higher term request_vote_request.}
I1218 01:21:56.376616 25131 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 40 votedfor 0.0.0.0:0:0 time: 42094
I1218 01:21:56.457080 25131 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 40 votedfor 10.1.5.3:8700:0 time: 47630
I1218 01:21:57.104594 25111 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 41 current_term 40 granted 1 rejected_by_lease 0
I1218 01:21:57.211772 25133 server.cpp:312] Node start following { leader_id=10.1.5.3:8700:0, term=40, status=Follower receives message from new leader with the same term.}
I1218 01:21:57.698755 25136 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:22:13.195708 25586 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:22:13.211846 25586 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:22:13.213622 25586 server.cpp:499] Fail to start Server
I1218 01:22:18.007848 25131 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.5.3:8700:0 in term 41 current_term 40 granted 1 rejected_by_lease 0
I1218 01:22:18.372304 25116 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.5.3:8700:0 in term 41 current_term 40 log_is_ok 1 votable_time 0
I1218 01:22:18.443133 25130 server.cpp:309] Node stops following { leader_id=10.1.5.3:8700:0, term=40, status=Raft node receives higher term request_vote_request.}
I1218 01:22:18.596405 25116 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 41 votedfor 0.0.0.0:0:0 time: 207595
I1218 01:22:18.661257 25116 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 41 votedfor 10.1.5.3:8700:0 time: 53730
I1218 01:22:18.917661 25111 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 42 current_term 41 granted 0 rejected_by_lease 0
I1218 01:22:19.075261 25130 server.cpp:312] Node start following { leader_id=10.1.5.3:8700:0, term=41, status=Follower receives message from new leader with the same term.}
I1218 01:22:20.209066 25131 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 42 current_term 41 log_is_ok 1 votable_time 0
I1218 01:22:20.211658 25133 server.cpp:309] Node stops following { leader_id=10.1.5.3:8700:0, term=41, status=Raft node receives higher term request_vote_request.}
I1218 01:22:20.276525 25131 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 42 votedfor 0.0.0.0:0:0 time: 64523
I1218 01:22:20.287328 25131 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 42 votedfor 10.1.1.3:8700:0 time: 8884
I1218 01:22:20.484272 25110 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 42 start pre_vote
I1218 01:22:20.630148 25111 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=42, status=Follower receives message from new leader with the same term.}
I1218 01:22:20.631644 25111 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:22:20.693426 25133 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 18 current_ctx_version 20
W1218 01:22:20.696203 25126 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 18 current_ctx_version 20
W1218 01:22:20.697721 25133 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 18 current_ctx_version 20
W1218 01:22:20.719986 25126 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:22:20.950946 25116 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:22:24.814327 25105 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:22:25.097429 25132 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000034
I1218 01:22:25.105273 25132 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000034
I1218 01:22:25.125609 25132 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000031
I1218 01:22:25.188999 25132 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=34 last_included_term=42
I1218 01:22:25.293381 25128 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 32 time: 46407
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:23:09.460664 26225 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:23:09.711236 26197 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:23:10.457304 26197 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:23:10.463279 26197 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:23:10.609457 26197 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:23:10.632918 26197 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 32 time: 21837
I1218 01:23:10.683652 26197 log.cpp:1115] load open segment, path: ./data/log first_index: 15
I1218 01:23:11.145541 26197 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:23:11.391721 26264 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:23:11.529600 26264 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 34 last_included_term: 42 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:23:11.608705 26197 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 42 votedfor 10.1.1.3:8700:0 time: 3378
I1218 01:23:11.634094 26197 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 42 last_log_id: (index=34,term=42) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:23:11.777905 26197 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:23:16.288827 26268 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 43 current_term 42 granted 1 rejected_by_lease 0
I1218 01:23:16.544171 26281 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 43 current_term 42 granted 1 rejected_by_lease 0
I1218 01:23:16.785872 26259 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 43 current_term 42 log_is_ok 1 votable_time 0
I1218 01:23:16.831802 26259 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 43 votedfor 0.0.0.0:0:0 time: 29887
I1218 01:23:16.867369 26259 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 43 votedfor 10.1.2.3:8700:0 time: 32113
I1218 01:23:16.900365 26268 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 43 current_term 43 log_is_ok 1 votable_time 0
I1218 01:23:17.052502 26271 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 43 start pre_vote
I1218 01:23:17.137090 26281 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:23:17.145239 26276 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 43 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:23:17.176844 26281 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 34 and last_snapshot_index 34 is less than 1, will clear bufferred logs and return success
I1218 01:23:17.219794 26281 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 35 time: 40864
I1218 01:23:17.239897 26280 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=43, status=Follower receives message from new leader with the same term.}
I1218 01:23:17.244524 26281 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000015'
W1218 01:23:17.287143 26265 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:23:17.288822 26259 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 4 current_ctx_version 6
W1218 01:23:17.366055 26268 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 4 current_ctx_version 6
I1218 01:23:17.532462 26271 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000035' with fd=7
I1218 01:23:18.313052 26264 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:23:47.185285 26259 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:23:47.484586 26259 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000035
I1218 01:23:47.486090 26259 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000035
I1218 01:23:47.513250 26259 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000034
I1218 01:23:47.535631 26259 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=35 last_included_term=43
I1218 01:23:55.795445 26268 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=43, status=Lost connection from leader 10.1.2.3:8700:0}
I1218 01:23:55.810837 26265 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 43 start pre_vote
W1218 01:23:56.005038 26280 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=192 addr=10.1.5.3:8700} (0x0x631000079880): Connection refused
W1218 01:23:56.024662 26264 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=188 addr=10.1.2.3:8700} (0x0x631000078d80): Connection refused
W1218 01:23:56.040189 26276 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=190 addr=10.1.4.3:8700} (0x0x631000079300): Connection refused
W1218 01:23:56.044018 26259 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=8589934692 addr=10.1.1.3:8700} (0x0x631000051b40): Connection refused
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:23:57.537647 26730 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:23:57.575600 26730 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:23:57.577451 26730 server.cpp:499] Fail to start Server
I1218 01:24:01.981329 26265 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 43 start pre_vote
I1218 01:24:02.898677 26271 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 43 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:24:03.084772 26276 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:24:03.086170 26276 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 43 start vote and grant vote self
I1218 01:24:03.396857 26276 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 44 votedfor 10.1.3.3:8700:0 time: 246056
W1218 01:24:03.399663 26268 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 8 current_ctx_version 9
W1218 01:24:03.408571 26271 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 8 current_ctx_version 9
I1218 01:24:03.424685 26264 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 44 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:24:03.503958 26281 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 44 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:24:03.506742 26281 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 44 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:24:03.541194 26281 replicator.cpp:143] Replicator=4398046511105@10.1.1.3:8700:0 is started, group Atomic
I1218 01:24:03.642266 26281 replicator.cpp:143] Replicator=4415226380289@10.1.2.3:8700:0 is started, group Atomic
I1218 01:24:03.663355 26281 replicator.cpp:143] Replicator=4432406249473@10.1.4.3:8700:0 is started, group Atomic
I1218 01:24:03.703521 26281 replicator.cpp:143] Replicator=4449586118657@10.1.5.3:8700:0 is started, group Atomic
W1218 01:24:04.031261 26280 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 01:24:04.047704 26259 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:24:04.267448 26271 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:24:04.382035 26271 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:24:04.588466 26276 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 44 last_included_term 43 last_included_index 35 uri remote://10.1.3.3:8700/921735446367827112
I1218 01:24:04.781872 26276 server.cpp:291] Node becomes leader
I1218 01:24:06.263857 26268 replicator.cpp:902] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 35 last_included_term 43 success.
W1218 01:24:07.403335 26281 input_messenger.cpp:381] Fail to read from Socket{id=465 fd=8 addr=10.1.1.3:8700:38332} (0x6310000dc800): Connection reset by peer [104]
W1218 01:24:07.422181 26281 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=465fd=8 addr=10.1.1.3:8700:38332} (0x0x6310000dc800): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
I1218 01:24:07.518970 26280 socket.cpp:2570] Checking Socket{id=465 addr=10.1.1.3:8700} (0x6310000dc800)
W1218 01:24:08.441757 26259 input_messenger.cpp:381] Fail to read from Socket{id=471 fd=11 addr=10.1.5.3:8700:44550} (0x6310000dd880): Connection reset by peer [104]
W1218 01:24:08.454833 26259 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=471fd=11 addr=10.1.5.3:8700:44550} (0x0x6310000dd880): Connection reset by peer [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
I1218 01:24:08.552313 26265 socket.cpp:2570] Checking Socket{id=471 addr=10.1.5.3:8700} (0x6310000dd880)

=================================================================
==26730==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f16087ae09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f16087ae09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f16087ae09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:24:12.634110 26281 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:13.640506 26280 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
I1218 01:24:17.345611 26264 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:24:17.774844 26264 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000036
I1218 01:24:17.776484 26264 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000036
I1218 01:24:17.830708 26264 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000035
I1218 01:24:17.977785 26264 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=36 last_included_term=44
W1218 01:24:17.982781 26265 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
I1218 01:24:18.368410 26264 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 36 time: 49931
W1218 01:24:18.996912 26259 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:23.097332 26268 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:24.113003 26276 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:28.457450 26265 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:29.459199 26281 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:33.678229 26276 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:34.524641 26271 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:35.624063 26276 input_messenger.cpp:381] Fail to read from Socket{id=8589934876 fd=8 addr=10.1.1.3:46414:8700} (0x6310000a15c0): Connection reset by peer [104]
W1218 01:24:36.776753 26265 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=61, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:37.234920 26276 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:39.383921 26281 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=71, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:39.778090 26280 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:42.242925 26271 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=81, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:42.335765 26276 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:44.863029 26276 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=91, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:44.880034 26268 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:47.440292 26280 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=101, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:47.443670 26280 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
I1218 01:24:47.596248 26280 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:24:47.837471 26280 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000037
I1218 01:24:47.999552 26280 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000037
I1218 01:24:48.001659 26280 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000036
I1218 01:24:48.058135 26280 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=37 last_included_term=44
I1218 01:24:48.309382 26280 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 37 time: 74629
W1218 01:24:48.843362 26259 input_messenger.cpp:381] Fail to read from Socket{id=467 fd=9 addr=10.1.2.3:8700:40588} (0x6310000dcd80): Connection reset by peer [104]
W1218 01:24:48.851446 26259 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=467fd=9 addr=10.1.2.3:8700:40588} (0x0x6310000dcd80): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=467 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=467 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=467
I1218 01:24:48.956378 26276 socket.cpp:2570] Checking Socket{id=467 addr=10.1.2.3:8700} (0x6310000dcd80)
W1218 01:24:50.001035 26271 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=111, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:50.042346 26281 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=111, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
I1218 01:24:50.451639 26271 socket.cpp:2570] Checking Socket{id=469 addr=10.1.4.3:8700} (0x6310000dd300)
W1218 01:24:50.491816 26280 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.4.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=469
W1218 01:24:52.844276 26259 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=121, [E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=465
W1218 01:24:52.883417 26265 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=121, [E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=471 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=471
W1218 01:24:54.261467 26259 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 44 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:24:54.374943 26280 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=467 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=467 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=467 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=467
I1218 01:24:54.400691 26280 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:24:54.535529 26259 replicator.cpp:989] Group Atomic Replicator=4398046511105 is going to quit
I1218 01:24:54.536882 26259 replicator.cpp:1258] Replicator=4398046511105 is going to quit
I1218 01:24:54.557833 26259 replicator.cpp:989] Group Atomic Replicator=4415226380289 is going to quit
I1218 01:24:54.586836 26259 replicator.cpp:1258] Replicator=4415226380289 is going to quit
I1218 01:24:54.589638 26259 replicator.cpp:989] Group Atomic Replicator=4432406249473 is going to quit
I1218 01:24:54.590332 26259 replicator.cpp:1258] Replicator=4432406249473 is going to quit
I1218 01:24:54.598291 26259 replicator.cpp:989] Group Atomic Replicator=4449586118657 is going to quit
I1218 01:24:54.599304 26259 replicator.cpp:1258] Replicator=4449586118657 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:24:57.067287 27306 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:24:57.123448 27306 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:24:57.134253 27306 server.cpp:499] Fail to start Server
I1218 01:24:59.756953 26259 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 44 start pre_vote
I1218 01:25:00.658142 26268 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 44 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:25:00.684141 26265 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 44 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:25:00.685534 26265 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 44 start vote and grant vote self
I1218 01:25:00.816947 26265 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 45 votedfor 10.1.3.3:8700:0 time: 101001
W1218 01:25:00.928270 26271 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 10 current_ctx_version 11
I1218 01:25:01.052551 26276 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 45 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:25:01.055379 26276 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 45 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:25:01.056617 26276 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 45 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:25:01.061888 26276 replicator.cpp:143] Replicator=3410204033094@10.1.1.3:8700:0 is started, group Atomic
I1218 01:25:01.119393 26276 replicator.cpp:143] Replicator=3315714752565@10.1.2.3:8700:0 is started, group Atomic
I1218 01:25:01.183570 26276 replicator.cpp:143] Replicator=3423088934913@10.1.4.3:8700:0 is started, group Atomic
I1218 01:25:01.205869 26276 replicator.cpp:143] Replicator=3440268804097@10.1.5.3:8700:0 is started, group Atomic
W1218 01:25:01.478456 26264 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.5.3:8700:0 ctx_version 10 current_ctx_version 11
W1218 01:25:01.491892 26281 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 3 current_ctx_version 4
W1218 01:25:01.495211 26280 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 3 current_ctx_version 4
I1218 01:25:01.612162 26281 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 45 last_included_term 44 last_included_index 37 uri remote://10.1.3.3:8700/921735446367827113
I1218 01:25:01.718365 26271 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:25:01.747856 26271 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:25:01.927374 26271 server.cpp:291] Node becomes leader
I1218 01:25:03.623785 26280 replicator.cpp:902] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 37 last_included_term 44 success.
W1218 01:25:04.214682 26225 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:25:06.998284 26280 input_messenger.cpp:381] Fail to read from Socket{id=286 fd=10 addr=10.1.4.3:8700:34140} (0x6310000a1b40): Connection reset by peer [104]
W1218 01:25:07.051441 26271 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=286fd=10 addr=10.1.4.3:8700:34140} (0x0x6310000a1b40): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=286 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=286 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=286
I1218 01:25:07.232086 26281 socket.cpp:2570] Checking Socket{id=286 addr=10.1.4.3:8700} (0x6310000a1b40)
I1218 01:25:09.145550 26271 socket.cpp:2570] Checking Socket{id=17179869654 addr=10.1.1.3:8700} (0x6310000dd5c0)
W1218 01:25:09.163640 26264 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869654 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869654 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869654 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869654
W1218 01:25:09.166836 26268 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E1014]Got EOF of Socket{id=8589934792fd=9 addr=10.1.2.3:8700:47640} (0x0x63100007ae80) [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934792 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934792 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934792
I1218 01:25:09.271764 26281 socket.cpp:2570] Checking Socket{id=8589934792 addr=10.1.2.3:8700} (0x63100007ae80)
W1218 01:25:12.235802 26268 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=286 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=286 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=286 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=286
W1218 01:25:14.364715 26271 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869654 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869654 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869654 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869654
W1218 01:25:14.373242 26268 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934792 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934792 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934792 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934792
I1218 01:25:16.496292 26264 socket.cpp:2630] Revived Socket{id=286 addr=10.1.4.3:8700} (0x6310000a1b40) (Connectable)
W1218 01:25:16.643123 26271 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 45 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:25:16.873433 26268 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:25:17.013332 26271 replicator.cpp:989] Group Atomic Replicator=3410204033094 is going to quit
I1218 01:25:17.051157 26271 replicator.cpp:1258] Replicator=3410204033094 is going to quit
I1218 01:25:17.056334 26271 replicator.cpp:989] Group Atomic Replicator=3315714752565 is going to quit
I1218 01:25:17.056977 26271 replicator.cpp:1258] Replicator=3315714752565 is going to quit
I1218 01:25:17.058377 26271 replicator.cpp:989] Group Atomic Replicator=3423088934913 is going to quit
I1218 01:25:17.124457 26271 replicator.cpp:1258] Replicator=3423088934913 is going to quit
I1218 01:25:17.132941 26271 replicator.cpp:989] Group Atomic Replicator=3440268804097 is going to quit
I1218 01:25:17.133761 26271 replicator.cpp:1258] Replicator=3440268804097 is going to quit
W1218 01:25:17.794118 26225 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:25:17.713060 26268 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:25:18.986968 26265 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000038
I1218 01:25:18.988690 26265 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000038
I1218 01:25:18.994235 26265 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000037
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:25:19.270781 27499 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:25:19.318143 27499 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:25:19.324599 27499 server.cpp:499] Fail to start Server
I1218 01:25:19.351226 26265 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=38 last_included_term=45
I1218 01:25:19.533712 26265 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 38 time: 110964

=================================================================
==27306==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f6aa155409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f6aa155409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f6aa155409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:25:22.537462 26259 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 45 start pre_vote
I1218 01:25:22.829502 26264 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 45 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:25:22.904337 26280 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 45 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:25:22.905596 26280 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 45 start vote and grant vote self
I1218 01:25:23.118824 26280 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 46 votedfor 10.1.3.3:8700:0 time: 56935
W1218 01:25:23.120565 26276 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 12 current_ctx_version 13
W1218 01:25:23.129853 26268 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 12 current_ctx_version 13
I1218 01:25:23.318130 26271 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 46 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:25:23.331712 26259 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 46 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:25:23.367805 26271 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 46 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:25:23.369983 26271 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 46 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:25:23.403926 26271 replicator.cpp:143] Replicator=4514010628158@10.1.1.3:8700:0 is started, group Atomic
I1218 01:25:23.477145 26271 replicator.cpp:143] Replicator=3423088934917@10.1.2.3:8700:0 is started, group Atomic
I1218 01:25:23.491397 26271 replicator.cpp:143] Replicator=3410204033098@10.1.4.3:8700:0 is started, group Atomic
I1218 01:25:23.508141 26271 replicator.cpp:143] Replicator=4423816314917@10.1.5.3:8700:0 is started, group Atomic
W1218 01:25:23.601892 26265 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 5 current_ctx_version 6
I1218 01:25:23.806890 26281 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:25:23.815351 26281 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:25:23.845733 26281 server.cpp:291] Node becomes leader
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:26:16.441215 28192 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:26:16.651782 28192 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:26:16.744493 28192 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:26:16.813611 28192 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:26:16.818073 28192 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 38 time: 3181
I1218 01:26:16.820920 28192 log.cpp:1115] load open segment, path: ./data/log first_index: 35
I1218 01:26:17.197427 28192 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:26:17.731148 28253 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:26:17.792011 28253 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 38 last_included_term: 45 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:26:18.018795 28192 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 46 votedfor 10.1.3.3:8700:0 time: 111969
I1218 01:26:18.160703 28192 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 46 last_log_id: (index=39,term=46) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:26:18.357182 28192 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:26:22.517294 28228 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 48 current_term 46 granted 1 rejected_by_lease 0
I1218 01:26:23.133550 28236 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 48 current_term 46 log_is_ok 1 votable_time 0
I1218 01:26:23.257664 28236 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 48 votedfor 0.0.0.0:0:0 time: 120824
I1218 01:26:23.313158 28236 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 48 votedfor 10.1.1.3:8700:0 time: 39717
I1218 01:26:23.630306 28256 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 48 current_term 48 granted 1 rejected_by_lease 0
I1218 01:26:23.857450 28252 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=48, status=Follower receives message from new leader with the same term.}
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:26:59.032886 28708 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:26:59.502796 28708 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:26:59.504412 28708 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:26:59.851238 28708 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:26:59.906378 28708 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 38 time: 53302
I1218 01:26:59.943655 28708 log.cpp:1115] load open segment, path: ./data/log first_index: 35
I1218 01:27:00.034204 28708 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:27:00.254050 28765 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:27:00.290326 28765 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 38 last_included_term: 45 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:27:00.353713 28708 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 48 votedfor 10.1.1.3:8700:0 time: 2437
I1218 01:27:00.355260 28708 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 48 last_log_id: (index=39,term=46) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:27:00.376636 28708 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:27:06.159355 28779 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 48 start pre_vote
W1218 01:27:06.748996 28757 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E110]Fail to connect Socket{id=97 addr=10.1.4.3:8700} (0x0x631000051300): Connection timed out
I1218 01:27:06.997063 28761 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 48 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:27:06.999886 28776 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:27:07.101810 28759 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 48 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:27:09.636056 28758 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 49 current_term 48 granted 1 rejected_by_lease 0
I1218 01:27:09.887148 28769 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 49 current_term 48 log_is_ok 1 votable_time 0
I1218 01:27:09.940310 28769 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 49 votedfor 0.0.0.0:0:0 time: 50800
I1218 01:27:09.993674 28769 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 49 votedfor 10.1.2.3:8700:0 time: 24911
I1218 01:27:10.498015 28776 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=49, status=Follower receives message from new leader with the same term.}
I1218 01:27:11.296763 28758 node.cpp:2634] node Atomic:10.1.3.3:8700:0 received InstallSnapshotRequest last_included_log_index=40 last_include_log_term=47 from 10.1.2.3:8700:0 when last_log_id=(index=39,term=46)
I1218 01:27:11.758185 28776 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000040
I1218 01:27:11.759505 28776 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000040
I1218 01:27:11.779453 28776 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000038
I1218 01:27:11.882185 28775 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:27:11.898988 28775 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 40 last_included_term: 47 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:27:11.921118 28765 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 41 time: 31856
I1218 01:27:11.943460 28765 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000035'
I1218 01:27:11.954011 28758 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000041' with fd=7
I1218 01:27:11.977399 28769 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:27:11.979318 28769 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:27:17.785429 28778 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:27:17.971889 28778 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000042
I1218 01:27:17.982740 28778 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000042
I1218 01:27:18.006356 28778 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000040
I1218 01:27:18.146049 28778 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=42 last_included_term=49
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:27:32.320964 29029 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:27:32.350010 29029 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:27:32.360278 29029 server.cpp:499] Fail to start Server
I1218 01:27:32.816867 28757 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.5.3:8700:0 in term 50 current_term 49 granted 1 rejected_by_lease 0
I1218 01:27:33.116019 28773 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.5.3:8700:0 in term 50 current_term 49 log_is_ok 1 votable_time 0
I1218 01:27:33.124022 28777 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=49, status=Raft node receives higher term request_vote_request.}
I1218 01:27:33.211138 28773 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 50 votedfor 0.0.0.0:0:0 time: 92344
I1218 01:27:33.311445 28773 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 50 votedfor 10.1.5.3:8700:0 time: 95133
I1218 01:27:33.749017 28778 server.cpp:312] Node start following { leader_id=10.1.5.3:8700:0, term=50, status=Follower receives message from new leader with the same term.}
I1218 01:27:35.183087 28757 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 51 current_term 50 log_is_ok 1 votable_time 0
I1218 01:27:35.185487 28777 server.cpp:309] Node stops following { leader_id=10.1.5.3:8700:0, term=50, status=Raft node receives higher term request_vote_request.}
I1218 01:27:35.211144 28757 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 51 votedfor 0.0.0.0:0:0 time: 25810
I1218 01:27:35.233417 28757 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 51 votedfor 10.1.1.3:8700:0 time: 20769
I1218 01:27:35.596910 28779 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=51, status=Follower receives message from new leader with the same term.}
I1218 01:27:36.133620 28773 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:27:36.148073 28773 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:27:47.885828 28778 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:27:48.441792 28778 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000044
I1218 01:27:48.443614 28778 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000044
I1218 01:27:48.445245 28778 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000042
I1218 01:27:48.482784 28778 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=44 last_included_term=51
I1218 01:27:48.525154 28777 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 43 time: 16508
I1218 01:27:50.604712 28779 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 51 start pre_vote
I1218 01:27:50.623365 28778 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=51, status=Lost connection from leader 10.1.1.3:8700:0}
W1218 01:27:50.746982 28757 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=17179869556 addr=10.1.1.3:8700} (0x0x6310000c8800): Connection refused
W1218 01:27:50.749162 28757 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=558 addr=10.1.2.3:8700} (0x0x63100012c800): Connection refused
W1218 01:27:50.792040 28757 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=560 addr=10.1.4.3:8700} (0x0x63100012cd80): Connection refused
W1218 01:27:50.923449 28773 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument

=================================================================
==29029==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fcbccb6009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fcbccb6009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fcbccb6009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:27:54.967475 28725 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:27:56.069648 28777 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 51 start pre_vote
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:27:56.086252 29214 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:27:56.397131 29214 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:27:56.699162 29214 server.cpp:499] Fail to start Server
I1218 01:27:56.884413 28757 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 51 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:27:56.891314 28773 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:27:57.075419 28757 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E2][10.1.1.3:8700][E2]peer_id not exist
W1218 01:27:57.288374 28757 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E2][10.1.4.3:8700][E2]peer_id not exist
I1218 01:28:02.127653 28778 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 52 current_term 51 granted 1 rejected_by_lease 0
I1218 01:28:02.169857 28779 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 51 start pre_vote
I1218 01:28:02.279440 28773 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 51 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:28:02.307175 28757 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:28:02.391707 28757 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 51 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:02.392918 28757 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 51 start vote and grant vote self
W1218 01:28:02.533458 28779 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:28:02.530196 28757 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 52 votedfor 10.1.3.3:8700:0 time: 121166
I1218 01:28:02.660715 28773 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 52 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:02.699898 28778 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 52 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:02.701483 28778 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 52 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:28:02.742357 28778 replicator.cpp:143] Replicator=1159641169921@10.1.1.3:8700:0 is started, group Atomic
I1218 01:28:02.949529 28778 replicator.cpp:143] Replicator=1176821039105@10.1.2.3:8700:0 is started, group Atomic
I1218 01:28:03.000963 28778 replicator.cpp:143] Replicator=1194000908289@10.1.4.3:8700:0 is started, group Atomic
I1218 01:28:03.059476 28778 replicator.cpp:143] Replicator=1211180777473@10.1.5.3:8700:0 is started, group Atomic
W1218 01:28:03.367879 28766 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:28:03.383289 28757 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 17 current_ctx_version 18
W1218 01:28:03.493173 28773 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:28:03.578909 28762 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 52 current_term 52 log_is_ok 0 votable_time 0
I1218 01:28:03.678673 28755 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:28:03.701161 28755 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:28:03.895565 28756 server.cpp:291] Node becomes leader
W1218 01:28:06.305096 28773 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:28:09.169234 28777 input_messenger.cpp:381] Fail to read from Socket{id=105 fd=13 addr=10.1.2.3:8700:49574} (0x631000052900): Connection reset by peer [104]
W1218 01:28:09.201764 28778 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=105fd=13 addr=10.1.2.3:8700:49574} (0x0x631000052900): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=105 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=105 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=105
W1218 01:28:09.215883 28757 input_messenger.cpp:381] Fail to read from Socket{id=103 fd=11 addr=10.1.1.3:8700:37772} (0x631000052380): Connection reset by peer [104]
W1218 01:28:09.217631 28757 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=103fd=11 addr=10.1.1.3:8700:37772} (0x0x631000052380): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=103 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=103 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=103
W1218 01:28:09.260474 28757 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:28:09.310902 28778 socket.cpp:2570] Checking Socket{id=105 addr=10.1.2.3:8700} (0x631000052900)
I1218 01:28:09.325453 28777 socket.cpp:2570] Checking Socket{id=103 addr=10.1.1.3:8700} (0x631000052380)
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:28:33.660363 29621 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:28:34.283339 29621 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:28:34.285755 29621 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:28:34.593326 29621 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:28:34.614063 29621 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 43 time: 2619
I1218 01:28:34.619330 29621 log.cpp:1115] load open segment, path: ./data/log first_index: 41
I1218 01:28:34.649976 29621 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:28:34.726840 29665 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:28:34.743523 29665 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 44 last_included_term: 51 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:28:34.763818 29621 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 52 votedfor 10.1.3.3:8700:0 time: 3146
I1218 01:28:34.765343 29621 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 52 last_log_id: (index=45,term=52) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:28:34.769090 29621 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:28:40.727520 29679 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 52 start pre_vote
W1218 01:28:41.655866 29655 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=93 addr=10.1.1.3:8700} (0x0x631000050800): Connection timed out
I1218 01:28:41.920884 29674 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 53 current_term 52 granted 1 rejected_by_lease 0
I1218 01:28:42.074110 29677 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:42.173439 29671 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 52 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:42.219357 29671 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 52 start vote and grant vote self
I1218 01:28:42.656033 29671 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 53 votedfor 10.1.3.3:8700:0 time: 140556
W1218 01:28:42.662158 29665 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 2 current_ctx_version 3
I1218 01:28:42.685899 29677 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 53 current_term 53 log_is_ok 1 votable_time 0
I1218 01:28:42.701670 29674 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 53 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:42.747231 29654 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 53 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:28:42.799437 29669 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 53 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:28:42.949669 29658 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 53 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:28:43.017459 29679 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=53, status=Candidate receives message from new leader with the same term.}
W1218 01:28:47.815008 29638 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:28:50.065239 29638 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:28:54.047544 29679 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=53, status=Lost connection from leader 10.1.1.3:8700:0}
I1218 01:28:54.038146 29669 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 53 start pre_vote
I1218 01:28:54.455622 29655 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:28:54.533612 29655 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 44 and last_snapshot_index 44 is less than 1, will clear bufferred logs and return success
I1218 01:28:54.772528 29654 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 53 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:54.831898 29669 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 45 time: 279000
I1218 01:28:54.971776 29662 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 53 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:54.973778 29662 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 53 start vote and grant vote self
I1218 01:28:55.253504 29662 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 54 votedfor 10.1.3.3:8700:0 time: 89087
I1218 01:28:55.269770 29655 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 54 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:28:55.286306 29679 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 5 current_ctx_version 6
W1218 01:28:55.309268 29654 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
I1218 01:28:55.345124 29662 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 54 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:28:55.347029 29669 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 54 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:28:55.348395 29669 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 54 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:28:55.397639 29669 replicator.cpp:143] Replicator=5544802779137@10.1.1.3:8700:0 is started, group Atomic
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:28:55.466082 29807 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:28:55.490842 29807 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:28:55.498201 29807 server.cpp:499] Fail to start Server
I1218 01:28:55.760488 29669 replicator.cpp:143] Replicator=5561982648321@10.1.2.3:8700:0 is started, group Atomic
I1218 01:28:55.763999 29669 replicator.cpp:143] Replicator=5579162517505@10.1.4.3:8700:0 is started, group Atomic
I1218 01:28:55.823544 29669 replicator.cpp:143] Replicator=5596342386689@10.1.5.3:8700:0 is started, group Atomic
W1218 01:28:56.074324 29662 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 3 current_ctx_version 4
I1218 01:28:56.292059 29654 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 54 last_included_term 51 last_included_index 44 uri remote://10.1.3.3:8700/1042206736723687222
I1218 01:28:56.551501 29654 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:28:56.555878 29654 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:28:56.596751 29654 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:28:56.779812 29654 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:28:57.034308 29662 server.cpp:291] Node becomes leader
I1218 01:28:57.775333 29669 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 44 last_included_term 51 error: [E5][10.1.5.3:8700][E5]Fail to create snapshot writer
W1218 01:28:57.777225 29669 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E5][10.1.5.3:8700][E5]Fail to create snapshot writer
W1218 01:29:00.600750 29669 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:29:03.612751 29656 input_messenger.cpp:381] Fail to read from Socket{id=474 fd=10 addr=10.1.2.3:8700:51524} (0x6310000f20c0): Connection reset by peer [104]
W1218 01:29:03.620118 29668 input_messenger.cpp:381] Fail to read from Socket{id=472 fd=8 addr=10.1.1.3:8700:33462} (0x6310000f1b40): Connection reset by peer [104]
W1218 01:29:03.637008 29668 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=472fd=8 addr=10.1.1.3:8700:33462} (0x0x6310000f1b40): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=472 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=472 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=472
W1218 01:29:03.637023 29656 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=474fd=10 addr=10.1.2.3:8700:51524} (0x0x6310000f20c0): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=474 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=474 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=474
I1218 01:29:03.738404 29679 socket.cpp:2570] Checking Socket{id=474 addr=10.1.2.3:8700} (0x6310000f20c0)
I1218 01:29:03.738862 29654 socket.cpp:2570] Checking Socket{id=472 addr=10.1.1.3:8700} (0x6310000f1b40)
W1218 01:29:03.825309 29638 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:29:04.548879 29679 input_messenger.cpp:381] Fail to read from Socket{id=476 fd=9 addr=10.1.4.3:8700:50860} (0x6310000f2640): Connection reset by peer [104]
W1218 01:29:04.588451 29679 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=476fd=9 addr=10.1.4.3:8700:50860} (0x0x6310000f2640): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=476 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=476 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=476
W1218 01:29:04.584560 29654 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:29:04.729233 29679 socket.cpp:2570] Checking Socket{id=476 addr=10.1.4.3:8700} (0x6310000f2640)
W1218 01:29:07.501000 29662 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:29:08.854799 29669 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=472 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=472 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=472 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=472
W1218 01:29:08.859939 29662 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=474 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=474 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=474 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=474
W1218 01:29:09.897079 29662 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=476 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=476 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=476 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=476
W1218 01:29:10.513826 29669 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:29:11.006078 29662 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 54 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:29:11.937254 29654 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:29:12.004338 29662 replicator.cpp:989] Group Atomic Replicator=5544802779137 is going to quit
I1218 01:29:12.005872 29662 replicator.cpp:1258] Replicator=5544802779137 is going to quit
I1218 01:29:12.051088 29662 replicator.cpp:989] Group Atomic Replicator=5561982648321 is going to quit
I1218 01:29:12.124121 29662 replicator.cpp:1258] Replicator=5561982648321 is going to quit
I1218 01:29:12.125509 29662 replicator.cpp:989] Group Atomic Replicator=5579162517505 is going to quit
I1218 01:29:12.126104 29662 replicator.cpp:1258] Replicator=5579162517505 is going to quit
I1218 01:29:12.169196 29662 replicator.cpp:989] Group Atomic Replicator=5596342386689 is going to quit
I1218 01:29:12.169934 29662 replicator.cpp:1258] Replicator=5596342386689 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:29:14.593011 30012 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:29:14.746107 30012 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:29:14.788105 30012 server.cpp:499] Fail to start Server

=================================================================
==29807==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f128d6a309a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f128d6a309a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f128d6a309a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:29:17.284328 29655 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 54 start pre_vote
W1218 01:29:17.815930 29679 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:29:17.950124 29669 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 54 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:29:18.022330 29662 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 54 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:29:18.023811 29662 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 54 start vote and grant vote self
W1218 01:29:18.107995 29654 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:29:18.235977 29662 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 55 votedfor 10.1.3.3:8700:0 time: 184610
W1218 01:29:18.247669 29654 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 7 current_ctx_version 8
I1218 01:29:18.324182 29655 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 55 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:29:18.347988 29655 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 55 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:29:18.349110 29655 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 55 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:29:18.409514 29655 replicator.cpp:143] Replicator=5557687681038@10.1.1.3:8700:0 is started, group Atomic
I1218 01:29:18.611920 29655 replicator.cpp:143] Replicator=8877697400833@10.1.2.3:8700:0 is started, group Atomic
I1218 01:29:18.635142 29655 replicator.cpp:143] Replicator=8894877270017@10.1.4.3:8700:0 is started, group Atomic
I1218 01:29:18.638226 29655 replicator.cpp:143] Replicator=8912057139201@10.1.5.3:8700:0 is started, group Atomic
W1218 01:29:18.773185 29681 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:29:18.883136 29679 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 5 current_ctx_version 6
I1218 01:29:19.036536 29656 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:29:19.040052 29656 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:29:19.071435 29656 server.cpp:291] Node becomes leader
W1218 01:29:21.507938 29654 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:29:24.300483 29655 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:29:24.579722 29669 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:29:24.900377 29669 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000048
I1218 01:29:24.902184 29669 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000048
I1218 01:29:25.136318 29669 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000044
I1218 01:29:25.877458 29669 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=48 last_included_term=55
W1218 01:29:27.273030 29654 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:29:30.263402 29662 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.2.3:8700
W1218 01:29:30.364950 29655 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==30012==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fa9c0e9409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fa9c0e9409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fa9c0e9409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:29:33.396253 29679 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:29:34.257319 29655 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 56 current_term 55 granted 1 rejected_by_lease 0
I1218 01:29:34.357671 29662 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 56 current_term 55 log_is_ok 1 votable_time 0
I1218 01:29:34.379101 29679 server.cpp:296] Node stepped down : Raft node receives higher term request_vote_request.
I1218 01:29:34.419405 29662 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 56 votedfor 0.0.0.0:0:0 time: 40765
I1218 01:29:34.438663 29662 replicator.cpp:989] Group Atomic Replicator=5557687681038 is going to quit
I1218 01:29:34.439968 29662 replicator.cpp:1258] Replicator=5557687681038 is going to quit
I1218 01:29:34.463503 29662 replicator.cpp:989] Group Atomic Replicator=8877697400833 is going to quit
I1218 01:29:34.464777 29662 replicator.cpp:1258] Replicator=8877697400833 is going to quit
I1218 01:29:34.479067 29662 replicator.cpp:989] Group Atomic Replicator=8894877270017 is going to quit
I1218 01:29:34.479852 29662 replicator.cpp:1258] Replicator=8894877270017 is going to quit
I1218 01:29:34.492157 29662 replicator.cpp:989] Group Atomic Replicator=8912057139201 is going to quit
I1218 01:29:34.493598 29662 replicator.cpp:1258] Replicator=8912057139201 is going to quit
I1218 01:29:34.510310 29662 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 56 votedfor 10.1.2.3:8700:0 time: 14632
I1218 01:29:34.616950 29654 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=56, status=Follower receives message from new leader with the same term.}
I1218 01:29:35.037853 29679 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:29:51.110687 29654 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 56 start pre_vote
I1218 01:29:51.099036 29662 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=56, status=Lost connection from leader 10.1.2.3:8700:0}
W1218 01:29:51.223908 29662 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=17179869564 addr=10.1.1.3:8700} (0x0x6310000c9e00): Connection refused
W1218 01:29:51.243947 29655 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=8589934973 addr=10.1.4.3:8700} (0x0x6310000ca0c0): Connection refused
W1218 01:29:51.242216 29654 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=17179869656 addr=10.1.2.3:8700} (0x0x6310000f1b40): Connection refused
W1218 01:29:51.287995 29679 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:29:51.699836 30354 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:29:51.731537 30354 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:29:51.732971 30354 server.cpp:499] Fail to start Server
I1218 01:29:54.685842 29655 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:29:55.134990 29654 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000049
I1218 01:29:55.136739 29654 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000049
I1218 01:29:55.146036 29654 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000048
I1218 01:29:55.185482 29654 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=49 last_included_term=56
I1218 01:29:55.348635 29662 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 49 time: 47797
I1218 01:29:56.945230 29662 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 56 start pre_vote
W1218 01:29:57.760098 29679 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:29:58.055554 29662 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 56 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:29:58.063493 29654 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 56 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:29:58.067481 29654 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 56 start vote and grant vote self
I1218 01:29:58.147650 29654 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 57 votedfor 10.1.3.3:8700:0 time: 39092
W1218 01:29:58.192219 29669 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:29:58.311260 29669 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 57 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:29:58.386999 29654 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 57 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:29:58.388604 29654 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 57 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:29:58.424737 29654 replicator.cpp:143] Replicator=8877697400842@10.1.1.3:8700:0 is started, group Atomic
I1218 01:29:58.655586 29654 replicator.cpp:143] Replicator=8847632629773@10.1.2.3:8700:0 is started, group Atomic
I1218 01:29:58.703033 29654 replicator.cpp:143] Replicator=5561982648329@10.1.4.3:8700:0 is started, group Atomic
I1218 01:29:58.705960 29654 replicator.cpp:143] Replicator=5523327942693@10.1.5.3:8700:0 is started, group Atomic
I1218 01:29:58.888417 29678 replicator.cpp:1258] Replicator=5561982648329 is going to quit
W1218 01:29:58.938160 29663 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:29:59.131657 29656 replicator.cpp:1258] Replicator=8847632629773 is going to quit
W1218 01:29:59.175249 29679 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 13 current_ctx_version 14
I1218 01:29:59.192363 29672 replicator.cpp:317] Replicator=8877697400842 is going to quit, group Atomic
I1218 01:29:59.194083 29672 replicator.cpp:1258] Replicator=8877697400842 is going to quit
W1218 01:29:59.197682 29669 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 7 current_ctx_version 8
I1218 01:29:59.325667 29660 server.cpp:296] Node stepped down : Leader receives higher term braft.AppendEntriesResponse from peer:10.1.4.3:8700:0
I1218 01:29:59.348592 29678 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:29:59.463408 29678 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 58 votedfor 0.0.0.0:0:0 time: 79801
I1218 01:29:59.525219 29678 replicator.cpp:989] Group Atomic Replicator=5523327942693 is going to quit
I1218 01:29:59.527592 29678 replicator.cpp:1258] Replicator=5523327942693 is going to quit
I1218 01:29:59.596354 29663 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 58 current_term 58 granted 0 rejected_by_lease 0
W1218 01:29:59.598099 29680 node.cpp:2202] node Atomic:10.1.3.3:8700:0 raise term 58 when get last_log_id
I1218 01:29:59.695240 29668 server.cpp:312] Node start following { leader_id=10.1.4.3:8700:0, term=58, status=Follower receives message from new leader with the same term.}
W1218 01:29:59.762964 29672 log_manager.cpp:592] Truncating storage to last_index_kept=49
I1218 01:29:59.839823 29680 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0

=================================================================
==30354==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f6ee391809a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f6ee391809a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f6ee391809a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:30:39.124835 30828 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:30:39.328650 30828 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:30:39.330157 30828 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:30:39.733383 30828 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:30:39.779582 30828 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 49 time: 35489
I1218 01:30:39.785804 30828 log.cpp:1115] load open segment, path: ./data/log first_index: 41
I1218 01:30:40.013967 30828 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:30:40.190042 30873 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:30:40.261901 30873 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 49 last_included_term: 56 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:30:40.324091 30828 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 58 votedfor 0.0.0.0:0:0 time: 33910
I1218 01:30:40.346220 30828 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 58 last_log_id: (index=50,term=58) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:30:40.380903 30828 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:30:48.284008 30884 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 59 current_term 58 granted 1 rejected_by_lease 0
I1218 01:30:49.221410 30882 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.4.3:8700:0 in term 59 current_term 58 log_is_ok 1 votable_time 0
I1218 01:30:49.311180 30882 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 59 votedfor 0.0.0.0:0:0 time: 74226
I1218 01:30:49.329306 30882 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 59 votedfor 10.1.4.3:8700:0 time: 12413
I1218 01:30:50.230855 30877 server.cpp:312] Node start following { leader_id=10.1.4.3:8700:0, term=59, status=Follower receives message from new leader with the same term.}
I1218 01:30:56.485476 30904 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:30:56.505515 30904 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 49 and last_snapshot_index 49 is less than 1, will clear bufferred logs and return success
I1218 01:30:56.603987 30878 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 50 time: 89665
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:30:58.212718 31033 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:30:58.284411 31033 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:30:58.286201 31033 server.cpp:499] Fail to start Server
I1218 01:31:02.725378 30883 server.cpp:309] Node stops following { leader_id=10.1.4.3:8700:0, term=59, status=Lost connection from leader 10.1.4.3:8700:0}
I1218 01:31:02.731761 30901 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 59 start pre_vote
W1218 01:31:03.485910 30877 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:31:03.581640 30884 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 59 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:31:03.779742 30882 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 59 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:31:03.781625 30882 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 59 start vote and grant vote self
W1218 01:31:03.972925 30898 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:31:04.073534 30882 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 60 votedfor 10.1.3.3:8700:0 time: 237219
W1218 01:31:04.092407 30898 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 6 current_ctx_version 7
I1218 01:31:04.140856 30876 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 60 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:31:04.213574 30879 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 60 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:31:04.251272 30879 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 60 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:31:04.445232 30879 replicator.cpp:143] Replicator=5501853106177@10.1.1.3:8700:0 is started, group Atomic
I1218 01:31:04.620460 30879 replicator.cpp:143] Replicator=5519032975361@10.1.2.3:8700:0 is started, group Atomic
I1218 01:31:04.650259 30879 replicator.cpp:143] Replicator=5536212844545@10.1.4.3:8700:0 is started, group Atomic
I1218 01:31:04.681794 30879 replicator.cpp:143] Replicator=5553392713729@10.1.5.3:8700:0 is started, group Atomic
W1218 01:31:04.880523 30904 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:31:04.891513 30878 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:31:05.526002 30873 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:31:05.545308 30873 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:31:05.587990 30873 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:31:05.609712 30873 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:31:05.653568 30873 server.cpp:291] Node becomes leader
W1218 01:31:07.676878 30874 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:31:10.809928 30885 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.4.3:8700

=================================================================
==31033==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f219709409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f219709409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f219709409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:31:16.753633 30879 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:31:19.617736 30885 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:32:24.956990 31967 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:32:25.004681 31967 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:32:25.024364 31967 server.cpp:499] Fail to start Server

=================================================================
==31967==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f6b9b9ee09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f6b9b9ee09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f6b9b9ee09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:33:15.768159 32592 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:33:16.357499 32592 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:33:16.360953 32592 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:33:17.112782 32592 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:33:17.187723 32592 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 50 time: 72618
I1218 01:33:17.245250 32592 log.cpp:1115] load open segment, path: ./data/log first_index: 41
I1218 01:33:17.586269 32592 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:33:17.954245 32667 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:18.241197 32667 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 49 last_included_term: 56 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:33:18.269459 32592 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 60 votedfor 10.1.3.3:8700:0 time: 833
I1218 01:33:18.271261 32592 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 60 last_log_id: (index=52,term=60) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:33:18.274067 32592 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:33:23.616209 32651 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 60 start pre_vote
W1218 01:33:23.999032 32649 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E110]Fail to connect Socket{id=99 addr=10.1.5.3:8700} (0x0x631000051880): Connection timed out
I1218 01:33:24.398990 32668 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 60 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:33:24.911911 32665 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 60 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:33:24.919070 32665 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 60 start vote and grant vote self
I1218 01:33:25.268311 32665 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 61 votedfor 10.1.3.3:8700:0 time: 189058
W1218 01:33:25.284415 32673 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 2 current_ctx_version 3
I1218 01:33:25.294901 32668 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 61 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:33:25.552151 32662 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 61 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:33:25.553406 32662 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 61 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:33:25.687862 32662 replicator.cpp:143] Replicator=3302829850625@10.1.1.3:8700:0 is started, group Atomic
I1218 01:33:25.808876 32662 replicator.cpp:143] Replicator=3320009719809@10.1.2.3:8700:0 is started, group Atomic
I1218 01:33:26.056346 32662 replicator.cpp:143] Replicator=3337189588993@10.1.4.3:8700:0 is started, group Atomic
I1218 01:33:26.071812 32662 replicator.cpp:143] Replicator=3354369458177@10.1.5.3:8700:0 is started, group Atomic
W1218 01:33:26.753504 32657 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 01:33:26.782095 32649 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
W1218 01:33:26.896695 32667 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:33:26.899165 32668 socket.cpp:2570] Checking Socket{id=283 addr=10.1.4.3:8700} (0x6310000a1300)
I1218 01:33:27.121173 32673 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:27.124480 32673 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:27.126155 32673 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:27.148397 32673 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:27.155129 32673 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:27.256386 32657 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 61 last_included_term 56 last_included_index 49 uri remote://10.1.3.3:8700/1146774690854326875
I1218 01:33:27.450889 32657 server.cpp:291] Node becomes leader
W1218 01:33:27.715668 32667 input_messenger.cpp:381] Fail to read from Socket{id=281 fd=9 addr=10.1.2.3:8700:48562} (0x6310000a0d80): Connection reset by peer [104]
W1218 01:33:27.733650 32667 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=281fd=9 addr=10.1.2.3:8700:48562} (0x0x6310000a0d80): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=281
I1218 01:33:27.834198 32669 socket.cpp:2570] Checking Socket{id=281 addr=10.1.2.3:8700} (0x6310000a0d80)
I1218 01:33:28.432229 32667 replicator.cpp:902] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 49 last_included_term 56 success.
W1218 01:33:28.504349 32668 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E5][10.1.5.3:8700][E5]Corrupted LogStorage
W1218 01:33:29.180056 32657 input_messenger.cpp:381] Fail to read from Socket{id=279 fd=8 addr=10.1.1.3:8700:58436} (0x6310000a0800): Connection reset by peer [104]
W1218 01:33:29.183259 32657 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=279fd=8 addr=10.1.1.3:8700:58436} (0x0x6310000a0800): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=279
I1218 01:33:29.308439 32669 socket.cpp:2570] Checking Socket{id=279 addr=10.1.1.3:8700} (0x6310000a0800)
W1218 01:33:29.341893 32658 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
W1218 01:33:31.384157 32665 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:33:31.873862 32651 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
W1218 01:33:32.899593 32656 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=281
W1218 01:33:34.207804 32663 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:33:34.318972 32649 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=279
W1218 01:33:34.435865 32652 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:33:35.038213 32796 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:33:35.186178 32796 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:33:35.280617 32796 server.cpp:499] Fail to start Server
I1218 01:33:36.329375 32667 socket.cpp:2630] Revived Socket{id=283 addr=10.1.4.3:8700} (0x6310000a1300) (Connectable)
W1218 01:33:36.791869 32651 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 61 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:36.844369 32652 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:33:36.873659 32651 replicator.cpp:989] Group Atomic Replicator=3302829850625 is going to quit
I1218 01:33:36.895282 32651 replicator.cpp:1258] Replicator=3302829850625 is going to quit
I1218 01:33:36.898648 32651 replicator.cpp:989] Group Atomic Replicator=3320009719809 is going to quit
I1218 01:33:36.899646 32651 replicator.cpp:1258] Replicator=3320009719809 is going to quit
I1218 01:33:36.901806 32651 replicator.cpp:989] Group Atomic Replicator=3337189588993 is going to quit
I1218 01:33:36.911619 32651 replicator.cpp:1258] Replicator=3337189588993 is going to quit
I1218 01:33:36.913647 32651 replicator.cpp:989] Group Atomic Replicator=3354369458177 is going to quit
I1218 01:33:36.927913 32651 replicator.cpp:1258] Replicator=3354369458177 is going to quit
W1218 01:33:38.147859 32622 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:33:40.387605 32669 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:33:41.072858 32669 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000053
I1218 01:33:41.075040 32669 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000053
I1218 01:33:41.159739 32669 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000049
I1218 01:33:41.459093 32669 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=53 last_included_term=61
I1218 01:33:42.633566 32658 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 61 start pre_vote
W1218 01:33:42.856309 32657 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:33:43.195647 32657 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 61 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:33:43.268500 32657 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 61 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:33:43.270368 32657 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 61 start vote and grant vote self
W1218 01:33:43.388312 32668 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:33:43.400682 32657 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 62 votedfor 10.1.3.3:8700:0 time: 101620
W1218 01:33:43.420092 32668 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 4 current_ctx_version 5
I1218 01:33:43.496495 32665 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 62 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:33:43.551802 32665 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 62 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:33:43.553421 32665 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 62 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:33:43.607990 32665 replicator.cpp:143] Replicator=5523327942666@10.1.1.3:8700:0 is started, group Atomic
I1218 01:33:43.697096 32665 replicator.cpp:143] Replicator=7705171329033@10.1.2.3:8700:0 is started, group Atomic
I1218 01:33:43.790280 32665 replicator.cpp:143] Replicator=4402341478409@10.1.4.3:8700:0 is started, group Atomic
I1218 01:33:43.808046 32665 replicator.cpp:143] Replicator=1129576398854@10.1.5.3:8700:0 is started, group Atomic
W1218 01:33:43.961843 32673 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 3 current_ctx_version 4
W1218 01:33:43.973439 32668 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:33:44.128545 32665 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:44.160356 32665 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:33:44.464766 32665 server.cpp:291] Node becomes leader
W1218 01:33:46.953472 32652 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:33:50.339443 32663 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==32796==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f742098009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f742098009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f742098009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:33:53.080962 32663 input_messenger.cpp:381] Fail to read from Socket{id=17179869557 fd=8 addr=10.1.1.3:8700:38170} (0x631000168ac0): Connection reset by peer [104]
W1218 01:33:53.117410 32663 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869557fd=8 addr=10.1.1.3:8700:38170} (0x0x631000168ac0): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557
W1218 01:33:53.199155 32651 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:33:53.222011 32672 socket.cpp:2570] Checking Socket{id=17179869557 addr=10.1.1.3:8700} (0x631000168ac0)
W1218 01:33:55.892035 32656 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:33:58.238828 32656 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557
W1218 01:33:58.690680 32651 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:01.628079 32672 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:03.494701 32672 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557
W1218 01:34:04.689775 32651 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:07.805095 32652 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:08.388860 32658 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E1014]Got EOF of Socket{id=8589934689fd=11 addr=10.1.4.3:8700:56272} (0x0x631000051300) [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934689 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934689 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934689
I1218 01:34:08.502204 32669 socket.cpp:2570] Checking Socket{id=8589934689 addr=10.1.4.3:8700} (0x631000051300)
W1218 01:34:08.665131 32656 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557
I1218 01:34:10.470786 32669 socket.cpp:2570] Checking Socket{id=8589934878 addr=10.1.2.3:8700} (0x6310000a1b40)
W1218 01:34:10.477733 32658 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934878 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934878 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934878 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934878
I1218 01:34:10.531522 32649 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:34:10.624444 32669 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000054
I1218 01:34:10.656069 32669 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000054
I1218 01:34:10.658210 32669 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000053
W1218 01:34:10.731773 32652 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:34:10.752192 32669 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=54 last_included_term=62
I1218 01:34:10.800420 32663 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 54 time: 21626
W1218 01:34:13.764801 32656 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869557
W1218 01:34:13.721201 32658 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934689 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934689 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934689 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934689
W1218 01:34:13.998127 32649 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:14.535254 32649 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 62 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:34:14.719174 32652 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:34:14.744432 32649 replicator.cpp:989] Group Atomic Replicator=5523327942666 is going to quit
I1218 01:34:14.745712 32649 replicator.cpp:1258] Replicator=5523327942666 is going to quit
I1218 01:34:14.795843 32649 replicator.cpp:989] Group Atomic Replicator=7705171329033 is going to quit
I1218 01:34:14.797204 32649 replicator.cpp:1258] Replicator=7705171329033 is going to quit
I1218 01:34:14.798398 32649 replicator.cpp:989] Group Atomic Replicator=4402341478409 is going to quit
I1218 01:34:14.812445 32649 replicator.cpp:1258] Replicator=4402341478409 is going to quit
I1218 01:34:14.813714 32649 replicator.cpp:989] Group Atomic Replicator=1129576398854 is going to quit
I1218 01:34:14.814311 32649 replicator.cpp:1258] Replicator=1129576398854 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:34:16.710295 33203 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:34:16.779134 33203 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:34:16.781356 33203 server.cpp:499] Fail to start Server
I1218 01:34:20.340584 32669 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 62 start pre_vote
W1218 01:34:20.936844 32658 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:34:21.104307 32658 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 62 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:34:21.121248 32663 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 62 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:34:21.123471 32663 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 62 start vote and grant vote self
W1218 01:34:21.296468 32651 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:34:21.336032 32649 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
W1218 01:34:21.338376 32658 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
I1218 01:34:21.452211 32663 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 63 votedfor 10.1.3.3:8700:0 time: 187647
I1218 01:34:21.473873 32672 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 63 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:34:21.565042 32652 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 63 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:34:21.566273 32652 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 63 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:34:21.585500 32652 replicator.cpp:143] Replicator=11029476016257@10.1.1.3:8700:0 is started, group Atomic
I1218 01:34:21.637213 32652 replicator.cpp:143] Replicator=9917079486561@10.1.2.3:8700:0 is started, group Atomic
I1218 01:34:21.640681 32652 replicator.cpp:143] Replicator=5570572582977@10.1.4.3:8700:0 is started, group Atomic
I1218 01:34:21.728752 32652 replicator.cpp:143] Replicator=6614249635857@10.1.5.3:8700:0 is started, group Atomic
W1218 01:34:21.778208 32651 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:34:22.233435 32663 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:34:22.242288 32663 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:34:22.275840 32663 server.cpp:291] Node becomes leader
W1218 01:34:24.605561 32658 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:27.737717 32649 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:28.173233 32622 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:34:30.617556 32656 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:31.256269 32652 input_messenger.cpp:381] Fail to read from Socket{id=653 fd=9 addr=10.1.2.3:8700:40952} (0x6310001a4d80): Connection reset by peer [104]
W1218 01:34:31.419621 32669 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=653fd=9 addr=10.1.2.3:8700:40952} (0x0x6310001a4d80): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=653 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=653 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=653
I1218 01:34:31.425446 32663 socket.cpp:2570] Checking Socket{id=653 addr=10.1.2.3:8700} (0x6310001a4d80)
W1218 01:34:31.617681 32622 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:34:33.167853 32652 input_messenger.cpp:381] Fail to read from Socket{id=655 fd=11 addr=10.1.4.3:8700:45214} (0x6310001a5300): Connection reset by peer [104]
W1218 01:34:33.203785 32652 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=655fd=11 addr=10.1.4.3:8700:45214} (0x0x6310001a5300): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=655 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=655 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=655
I1218 01:34:33.292476 32656 socket.cpp:2570] Checking Socket{id=655 addr=10.1.4.3:8700} (0x6310001a5300)
W1218 01:34:33.365449 32663 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:35.210076 32672 input_messenger.cpp:381] Fail to read from Socket{id=651 fd=8 addr=10.1.1.3:8700:47854} (0x6310001a4800): Connection reset by peer [104]
W1218 01:34:35.212409 32672 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=651fd=8 addr=10.1.1.3:8700:47854} (0x0x6310001a4800): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=651 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=651 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=651
I1218 01:34:35.316722 32669 socket.cpp:2570] Checking Socket{id=651 addr=10.1.1.3:8700} (0x6310001a4800)
W1218 01:34:36.300961 32663 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:36.544917 32652 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=653 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=653 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=653 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=653
W1218 01:34:37.032117 32649 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 63 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:34:37.101298 32669 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:34:37.113667 32649 replicator.cpp:989] Group Atomic Replicator=11029476016257 is going to quit
I1218 01:34:37.132055 32649 replicator.cpp:1258] Replicator=11029476016257 is going to quit
I1218 01:34:37.143010 32649 replicator.cpp:989] Group Atomic Replicator=9917079486561 is going to quit
I1218 01:34:37.144091 32649 replicator.cpp:1258] Replicator=9917079486561 is going to quit
I1218 01:34:37.144825 32649 replicator.cpp:989] Group Atomic Replicator=5570572582977 is going to quit
I1218 01:34:37.145650 32649 replicator.cpp:1258] Replicator=5570572582977 is going to quit
I1218 01:34:37.146327 32649 replicator.cpp:989] Group Atomic Replicator=6614249635857 is going to quit
I1218 01:34:37.155440 32649 replicator.cpp:1258] Replicator=6614249635857 is going to quit
I1218 01:34:40.569254 32663 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:34:40.811830 33460 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:34:41.311740 32649 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000055
I1218 01:34:41.313798 32649 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000055
I1218 01:34:41.358565 32649 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000054
I1218 01:34:41.596307 32649 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=55 last_included_term=63
W1218 01:34:41.597959 33437 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:34:41.639235 33437 server.cpp:1101] Fail to listen 0.0.0.0:8700
I1218 01:34:41.726608 32663 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 55 time: 23281
E1218 01:34:41.727247 33437 server.cpp:499] Fail to start Server
I1218 01:34:42.550292 32658 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 63 start pre_vote
W1218 01:34:42.746215 32656 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=8589935152 addr=10.1.1.3:8700} (0x0x631000190d80): Connection refused
W1218 01:34:43.123189 32651 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:34:43.363140 32658 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E2][10.1.4.3:8700][E2]peer_id not exist
W1218 01:34:43.407097 32663 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist

=================================================================
==33203==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f82e932509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f82e932509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f82e932509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:34:48.539541 32669 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 63 start pre_vote
W1218 01:34:48.727267 32649 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:34:48.793244 32672 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 63 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:34:48.807433 32649 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 63 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:34:48.809351 32649 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 63 start vote and grant vote self
W1218 01:34:48.902721 32669 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:34:48.902117 32649 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 64 votedfor 10.1.3.3:8700:0 time: 61442
I1218 01:34:48.996093 32658 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 64 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:34:49.012938 32658 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 64 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:34:49.014106 32658 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 64 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:34:49.032477 32658 replicator.cpp:143] Replicator=6614249635866@10.1.1.3:8700:0 is started, group Atomic
I1218 01:34:49.156437 32658 replicator.cpp:143] Replicator=11008001179689@10.1.2.3:8700:0 is started, group Atomic
I1218 01:34:49.171059 32658 replicator.cpp:143] Replicator=5592047419393@10.1.4.3:8700:0 is started, group Atomic
I1218 01:34:49.173768 32658 replicator.cpp:143] Replicator=5609227288577@10.1.5.3:8700:0 is started, group Atomic
W1218 01:34:49.356468 32649 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:49.525777 32669 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 9 current_ctx_version 10
I1218 01:34:49.561827 32651 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 65 current_term 64 granted 0 rejected_by_lease 0
W1218 01:34:49.780129 32652 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 7 current_ctx_version 8
I1218 01:34:49.814169 32663 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:34:49.818049 32663 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:34:50.009687 32672 server.cpp:291] Node becomes leader
W1218 01:34:52.235509 32652 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:55.648059 32652 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:34:58.540589 32656 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:35:01.394979 32663 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==33437==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f20a69ca09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f20a69ca09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f20a69ca09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:35:03.812041 32672 input_messenger.cpp:381] Fail to read from Socket{id=17179869660 fd=9 addr=10.1.1.3:8700:60932} (0x63100017e640): Connection reset by peer [104]
W1218 01:35:03.886327 32651 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869660fd=9 addr=10.1.1.3:8700:60932} (0x0x63100017e640): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660
I1218 01:35:03.962998 32663 socket.cpp:2570] Checking Socket{id=17179869660 addr=10.1.1.3:8700} (0x63100017e640)
W1218 01:35:04.187469 32672 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:35:07.084044 32669 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:35:09.395586 32651 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660
W1218 01:35:09.805529 32649 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:35:10.854619 32649 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:35:10.897235 32656 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000056
I1218 01:35:10.919262 32656 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000056
I1218 01:35:10.921355 32656 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000055
I1218 01:35:10.967439 32656 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=56 last_included_term=64
I1218 01:35:11.036912 32656 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 56 time: 43618
W1218 01:35:12.665779 32656 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:35:14.550680 32658 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869660
W1218 01:35:15.412329 32663 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:35:18.202924 32669 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:36:24.169665 34540 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:36:24.980856 34540 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:36:25.046041 34540 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:36:25.565997 34540 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:36:25.611340 34540 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 56 time: 2629
I1218 01:36:25.627161 34540 log.cpp:1115] load open segment, path: ./data/log first_index: 41
I1218 01:36:25.809350 34540 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:36:26.105655 34602 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:36:26.173015 34602 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 56 last_included_term: 64 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:36:26.218374 34540 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 64 votedfor 10.1.3.3:8700:0 time: 852
I1218 01:36:26.240587 34540 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 64 last_log_id: (index=56,term=64) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:36:26.253641 34540 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:36:26.855286 34600 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:36:26.954087 34600 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 56 and last_snapshot_index 56 is less than 1, will clear bufferred logs and return success
I1218 01:36:27.273397 34620 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 57 time: 355938
I1218 01:36:27.456467 34620 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000041'
I1218 01:36:30.920794 34616 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 65 current_term 64 log_is_ok 1 votable_time 0
I1218 01:36:30.960881 34616 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 65 votedfor 0.0.0.0:0:0 time: 37619
I1218 01:36:31.026887 34616 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 65 votedfor 10.1.2.3:8700:0 time: 63650
I1218 01:36:31.593060 34601 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=65, status=Follower receives message from new leader with the same term.}
I1218 01:36:32.089900 34601 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000057' with fd=7
I1218 01:36:32.531333 34602 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:36:56.969192 34605 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:36:57.089005 34605 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000057
I1218 01:36:57.090396 34605 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000057
I1218 01:36:57.092885 34605 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000056
I1218 01:36:57.184412 34605 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=57 last_included_term=65
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:37:35.667569 35377 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:37:36.191833 35377 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:37:36.193428 35377 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:37:36.647575 35377 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:37:36.679363 35377 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 57 time: 29563
I1218 01:37:36.692199 35377 log.cpp:1115] load open segment, path: ./data/log first_index: 57
I1218 01:37:36.786626 35377 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:37:36.964612 35424 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:37:37.051460 35424 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 57 last_included_term: 65 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:37:37.192798 35377 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 65 votedfor 10.1.2.3:8700:0 time: 50954
I1218 01:37:37.236397 35377 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 65 last_log_id: (index=57,term=65) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:37:37.284024 35377 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:37:43.052248 35435 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 65 start pre_vote
I1218 01:37:43.374614 35418 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:37:43.455924 35405 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 65 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:37:43.467043 35405 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 65 start vote and grant vote self
I1218 01:37:43.719195 35405 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 66 votedfor 10.1.3.3:8700:0 time: 70137
I1218 01:37:43.735913 35427 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 66 current_term 66 granted 1 rejected_by_lease 0
I1218 01:37:43.814076 35406 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 66 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:37:43.941870 35435 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 66 current_term 66 log_is_ok 1 votable_time 0
W1218 01:37:44.015779 35405 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 2 current_ctx_version 3
I1218 01:37:44.092694 35427 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 66 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:37:44.094213 35427 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 66 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:37:44.152323 35427 replicator.cpp:143] Replicator=1103806595073@10.1.1.3:8700:0 is started, group Atomic
I1218 01:37:44.254946 35427 replicator.cpp:143] Replicator=1120986464257@10.1.2.3:8700:0 is started, group Atomic
I1218 01:37:44.281385 35427 replicator.cpp:143] Replicator=1138166333441@10.1.4.3:8700:0 is started, group Atomic
I1218 01:37:44.284355 35427 replicator.cpp:143] Replicator=1155346202625@10.1.5.3:8700:0 is started, group Atomic
W1218 01:37:44.424062 35424 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 01:37:44.443524 35420 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 2 current_ctx_version 3
W1218 01:37:44.463812 35412 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:37:44.739845 35433 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:37:44.769721 35433 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:37:44.803707 35420 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 66 last_included_term 65 last_included_index 57 uri remote://10.1.3.3:8700/1244727983008623810
I1218 01:37:45.087036 35423 server.cpp:291] Node becomes leader
I1218 01:37:45.781584 35436 replicator.cpp:902] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 57 last_included_term 65 success.
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:38:17.739450 35821 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:38:18.277315 35821 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:38:18.315506 35821 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:38:18.740168 35821 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:38:18.776906 35821 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 57 time: 34866
I1218 01:38:18.798373 35821 log.cpp:1115] load open segment, path: ./data/log first_index: 57
I1218 01:38:19.086184 35821 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:38:19.465219 35894 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:38:19.484755 35894 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 57 last_included_term: 65 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:38:19.527307 35821 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 66 votedfor 10.1.3.3:8700:0 time: 1455
I1218 01:38:19.535749 35821 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 66 last_log_id: (index=58,term=66) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:38:19.640339 35821 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:38:20.877791 35875 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:38:20.887655 35875 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 57 and last_snapshot_index 57 is less than 1, will clear bufferred logs and return success
I1218 01:38:20.904940 35882 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 58 time: 14988
I1218 01:38:25.397847 35886 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 66 start pre_vote
W1218 01:38:30.853247 35895 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E1008]Reached timeout=5000ms @10.1.1.3:8700
I1218 01:38:31.300583 35889 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:38:31.331110 35894 node.cpp:1502] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 term 67 expect 66
I1218 01:38:31.484594 35894 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 67 votedfor 0.0.0.0:0:0 time: 150368
I1218 01:38:31.500126 35893 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 68 current_term 67 granted 1 rejected_by_lease 0
I1218 01:38:31.572027 35880 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 68 current_term 67 granted 1 rejected_by_lease 0
I1218 01:38:31.933007 35892 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 68 current_term 67 log_is_ok 1 votable_time 0
I1218 01:38:31.981634 35892 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 68 votedfor 0.0.0.0:0:0 time: 41871
I1218 01:38:32.009557 35892 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 68 votedfor 10.1.2.3:8700:0 time: 20680
I1218 01:38:32.352137 35889 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=68, status=Follower receives message from new leader with the same term.}
I1218 01:38:32.549105 35883 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 68 current_term 68 log_is_ok 1 votable_time 0
I1218 01:38:33.288707 35892 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 68 current_term 68 granted 0 rejected_by_lease 0
W1218 01:38:33.361768 35893 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 2 current_ctx_version 7
I1218 01:38:34.276260 35894 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:38:34.277877 35894 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:38:34.300783 35894 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:38:41.054934 35875 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 68 start pre_vote
I1218 01:38:41.011322 35884 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=68, status=Lost connection from leader 10.1.2.3:8700:0}
I1218 01:38:41.860309 35887 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 68 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:38:41.884104 35889 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 68 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:38:41.885376 35889 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 68 start vote and grant vote self
W1218 01:38:41.901553 35880 input_messenger.cpp:381] Fail to read from Socket{id=467 fd=10 addr=10.1.2.3:8700:43076} (0x6310000dcd80): Connection reset by peer [104]
W1218 01:38:41.945659 35880 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E104]Fail to read from Socket{id=467fd=10 addr=10.1.2.3:8700:43076} (0x0x6310000dcd80): Connection reset by peer
W1218 01:38:42.036226 35893 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=559 addr=10.1.2.3:8700} (0x0x631000104ac0): Connection refused
I1218 01:38:42.113230 35889 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 69 votedfor 10.1.3.3:8700:0 time: 73611
W1218 01:38:42.117534 35892 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 8 current_ctx_version 9
I1218 01:38:42.205027 35885 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 69 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:38:42.264333 35887 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 69 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:38:42.279770 35887 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 69 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:38:42.404605 35887 replicator.cpp:143] Replicator=4440996184070@10.1.1.3:8700:0 is started, group Atomic
I1218 01:38:42.698375 35887 replicator.cpp:143] Replicator=4406636445701@10.1.2.3:8700:0 is started, group Atomic
I1218 01:38:42.803694 35887 replicator.cpp:143] Replicator=6609954668545@10.1.4.3:8700:0 is started, group Atomic
W1218 01:38:42.816283 35884 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E111]Fail to connect Socket{id=8589935064 addr=10.1.2.3:8700} (0x0x6310000ddb40): Connection refused [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064
I1218 01:38:42.830197 35887 replicator.cpp:143] Replicator=6627134537729@10.1.5.3:8700:0 is started, group Atomic
I1218 01:38:42.884372 35895 socket.cpp:2570] Checking Socket{id=8589935064 addr=10.1.2.3:8700} (0x6310000ddb40)
W1218 01:38:43.366202 35883 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:38:43.418978 35895 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.5.3:8700:0 in term 70 current_term 69 granted 0 rejected_by_lease 0
W1218 01:38:43.971427 35886 input_messenger.cpp:381] Fail to read from Socket{id=8589935058 fd=9 addr=10.1.4.3:8700:41198} (0x6310000dcac0): Connection reset by peer [104]
W1218 01:38:43.973937 35886 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935058fd=9 addr=10.1.4.3:8700:41198} (0x0x6310000dcac0): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058
I1218 01:38:43.994675 35895 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:38:43.997462 35895 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:38:44.091063 35882 socket.cpp:2570] Checking Socket{id=8589935058 addr=10.1.4.3:8700} (0x6310000dcac0)
I1218 01:38:44.218813 35895 server.cpp:291] Node becomes leader
W1218 01:38:45.579178 35884 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064
W1218 01:38:45.847178 35891 input_messenger.cpp:381] Fail to read from Socket{id=8589935063 fd=8 addr=10.1.1.3:8700:59760} (0x6310000dd880): Connection reset by peer [104]
W1218 01:38:45.850311 35891 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589935063fd=8 addr=10.1.1.3:8700:59760} (0x0x6310000dd880): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935063 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935063 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935063
I1218 01:38:45.963380 35891 socket.cpp:2570] Checking Socket{id=8589935063 addr=10.1.1.3:8700} (0x6310000dd880)
W1218 01:38:46.503247 35875 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:38:46.581003 35882 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058
W1218 01:38:48.196928 35895 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064
W1218 01:38:49.155068 35884 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:38:50.496362 36190 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:38:50.746989 35895 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935064
I1218 01:38:50.891788 35886 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:38:51.182411 35875 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000062
I1218 01:38:51.184231 35875 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000062
I1218 01:38:51.240897 35875 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000057
W1218 01:38:51.250375 35884 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935063 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935063 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935063 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589935063
I1218 01:38:51.355149 35875 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=62 last_included_term=69
W1218 01:38:51.726994 35895 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589935058
I1218 01:38:52.113567 35875 socket.cpp:2630] Revived Socket{id=8589935064 addr=10.1.2.3:8700} (0x6310000ddb40) (Connectable)
W1218 01:38:52.528915 35886 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:38:52.645133 36176 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:38:52.647192 36176 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:38:52.648975 36176 server.cpp:499] Fail to start Server
W1218 01:38:53.413538 35882 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 69 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:38:53.443681 35886 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:38:53.519636 35882 replicator.cpp:989] Group Atomic Replicator=4440996184070 is going to quit
I1218 01:38:53.523797 35882 replicator.cpp:1258] Replicator=4440996184070 is going to quit
I1218 01:38:53.584120 35882 replicator.cpp:989] Group Atomic Replicator=4406636445701 is going to quit
I1218 01:38:53.584990 35882 replicator.cpp:1258] Replicator=4406636445701 is going to quit
I1218 01:38:53.597188 35882 replicator.cpp:989] Group Atomic Replicator=6609954668545 is going to quit
I1218 01:38:53.597916 35882 replicator.cpp:1258] Replicator=6609954668545 is going to quit
I1218 01:38:53.620920 35882 replicator.cpp:989] Group Atomic Replicator=6627134537729 is going to quit
I1218 01:38:53.642371 35882 replicator.cpp:1258] Replicator=6627134537729 is going to quit
I1218 01:38:59.045348 35886 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 69 start pre_vote
I1218 01:38:59.264585 35884 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 68 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:38:59.360371 35875 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:38:59.641139 35886 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 69 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:38:59.662061 35886 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 69 start vote and grant vote self
I1218 01:38:59.815748 35886 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 70 votedfor 10.1.3.3:8700:0 time: 105540
W1218 01:38:59.825068 35884 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 10 current_ctx_version 11
W1218 01:38:59.837286 35884 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:38:59.901153 35882 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 70 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:39:00.060079 35891 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 70 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:39:00.071543 35891 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 70 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:39:00.191574 35891 replicator.cpp:143] Replicator=7696581394513@10.1.1.3:8700:0 is started, group Atomic
I1218 01:39:00.214156 35891 replicator.cpp:143] Replicator=8804682956825@10.1.2.3:8700:0 is started, group Atomic
I1218 01:39:00.306058 35891 replicator.cpp:143] Replicator=8813272891393@10.1.4.3:8700:0 is started, group Atomic
I1218 01:39:00.921335 35891 replicator.cpp:143] Replicator=8830452760577@10.1.5.3:8700:0 is started, group Atomic
W1218 01:39:00.988418 35886 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 3 current_ctx_version 4
W1218 01:39:01.277494 35895 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:39:01.501258 35884 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:39:01.504463 35884 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:39:01.826047 35884 server.cpp:291] Node becomes leader
W1218 01:39:04.078294 35891 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:39:05.378118 35884 input_messenger.cpp:381] Fail to read from Socket{id=748 fd=11 addr=10.1.4.3:8700:57244} (0x6310001a5300): Connection reset by peer [104]
W1218 01:39:05.372805 35895 input_messenger.cpp:381] Fail to read from Socket{id=746 fd=10 addr=10.1.2.3:8700:58178} (0x6310001a4d80): Connection reset by peer [104]
W1218 01:39:05.396353 35895 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=746fd=10 addr=10.1.2.3:8700:58178} (0x0x6310001a4d80): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=746 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=746 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=746
W1218 01:39:05.401576 35875 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=748fd=11 addr=10.1.4.3:8700:57244} (0x0x6310001a5300): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=748 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=748 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=748
I1218 01:39:05.502664 35882 socket.cpp:2570] Checking Socket{id=746 addr=10.1.2.3:8700} (0x6310001a4d80)
I1218 01:39:05.505604 35882 socket.cpp:2570] Checking Socket{id=748 addr=10.1.4.3:8700} (0x6310001a5300)
W1218 01:39:05.551780 35886 input_messenger.cpp:381] Fail to read from Socket{id=744 fd=8 addr=10.1.1.3:8700:55340} (0x6310001a4800): Connection reset by peer [104]
W1218 01:39:05.554025 35886 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=744fd=8 addr=10.1.1.3:8700:55340} (0x0x6310001a4800): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=744 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=744 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=744
I1218 01:39:05.656236 35884 socket.cpp:2570] Checking Socket{id=744 addr=10.1.1.3:8700} (0x6310001a4800)
W1218 01:39:06.960796 35891 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:39:09.716662 35886 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:39:10.479943 35884 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=748 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=748 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=748 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=748
W1218 01:39:10.485713 35886 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=746 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=746 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=746 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=746
W1218 01:39:10.637132 35884 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=744 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=744 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=744 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=744
W1218 01:39:11.005069 35882 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 70 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:39:11.076134 35886 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:39:11.146106 35882 replicator.cpp:989] Group Atomic Replicator=7696581394513 is going to quit
I1218 01:39:11.155719 35882 replicator.cpp:1258] Replicator=7696581394513 is going to quit
I1218 01:39:11.168450 35882 replicator.cpp:989] Group Atomic Replicator=8804682956825 is going to quit
I1218 01:39:11.169549 35882 replicator.cpp:1258] Replicator=8804682956825 is going to quit
I1218 01:39:11.170957 35882 replicator.cpp:989] Group Atomic Replicator=8813272891393 is going to quit
I1218 01:39:11.171624 35882 replicator.cpp:1258] Replicator=8813272891393 is going to quit
I1218 01:39:11.172757 35882 replicator.cpp:989] Group Atomic Replicator=8830452760577 is going to quit
I1218 01:39:11.173381 35882 replicator.cpp:1258] Replicator=8830452760577 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:39:16.003422 36372 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:39:16.121893 36372 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:39:16.123797 36372 server.cpp:499] Fail to start Server
I1218 01:39:16.457614 35891 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 70 start pre_vote
W1218 01:39:16.879887 35886 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=8589934698 addr=10.1.1.3:8700} (0x0x631000052bc0): Connection timed out
W1218 01:39:17.066172 35875 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:39:17.238900 35886 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 70 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:39:17.661674 35884 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 70 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:39:17.715561 35884 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 70 start vote and grant vote self

=================================================================
==36176==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fafa205109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fafa205109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fafa205109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:39:18.060968 35895 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:39:18.071926 35884 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 71 votedfor 10.1.3.3:8700:0 time: 180879
I1218 01:39:18.104518 35891 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 71 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:39:18.106977 35886 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 71 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:39:18.108227 35886 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 71 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:39:18.122018 35886 replicator.cpp:143] Replicator=1172526071835@10.1.1.3:8700:0 is started, group Atomic
I1218 01:39:18.177302 35886 replicator.cpp:143] Replicator=4466765987857@10.1.2.3:8700:0 is started, group Atomic
I1218 01:39:18.396329 35886 replicator.cpp:143] Replicator=1254130450433@10.1.4.3:8700:0 is started, group Atomic
I1218 01:39:18.400032 35886 replicator.cpp:143] Replicator=1271310319617@10.1.5.3:8700:0 is started, group Atomic
W1218 01:39:18.555367 35895 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:39:18.746131 35884 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 5 current_ctx_version 6
I1218 01:39:18.985766 35875 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:39:19.024389 35875 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:39:19.370961 35875 server.cpp:291] Node becomes leader
I1218 01:39:21.056308 35895 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:39:21.158382 35895 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000064
I1218 01:39:21.176622 35895 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000064
I1218 01:39:21.212627 35895 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000062
W1218 01:39:21.325388 35886 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:39:21.359697 35895 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=64 last_included_term=71
I1218 01:39:21.432560 35895 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 63 time: 59007
W1218 01:39:24.112654 35884 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:39:25.798686 35882 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804429 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804429 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804429 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769804429
I1218 01:39:25.860898 35884 socket.cpp:2570] Checking Socket{id=25769804429 addr=10.1.2.3:8700} (0x631000140d80)
W1218 01:39:25.991415 35891 input_messenger.cpp:381] Fail to read from Socket{id=115 fd=12 addr=10.1.4.3:8700:56416} (0x631000054480): Connection reset by peer [104]
W1218 01:39:26.009333 35891 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=115fd=12 addr=10.1.4.3:8700:56416} (0x0x631000054480): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=115 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=115 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=115
I1218 01:39:26.101357 35882 socket.cpp:2570] Checking Socket{id=115 addr=10.1.4.3:8700} (0x631000054480)
W1218 01:39:27.323824 35884 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:39:53.244238 36755 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:39:53.690055 36755 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:39:53.692880 36755 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:39:53.971307 36755 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:39:53.996677 36755 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 63 time: 23952
I1218 01:39:54.021147 36755 log.cpp:1115] load open segment, path: ./data/log first_index: 57
I1218 01:39:54.243649 36755 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:39:54.629767 36816 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:39:54.712790 36816 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 64 last_included_term: 71 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:39:54.792961 36755 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 71 votedfor 10.1.3.3:8700:0 time: 717
I1218 01:39:54.807742 36755 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 71 last_log_id: (index=64,term=71) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:39:54.893164 36755 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:39:59.680574 36808 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:39:59.771189 36808 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 64 and last_snapshot_index 64 is less than 1, will clear bufferred logs and return success
I1218 01:39:59.926330 36815 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 65 time: 224420
I1218 01:39:59.966809 36815 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000057'
I1218 01:40:00.688241 36808 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 71 start pre_vote
W1218 01:40:01.135768 36813 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:40:01.139659 36809 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 72 current_term 71 granted 1 rejected_by_lease 0
I1218 01:40:01.151748 36816 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 71 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:40:01.213987 36813 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 72 current_term 71 granted 1 rejected_by_lease 0
I1218 01:40:01.321099 36813 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 71 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:40:01.322011 36813 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 71 start vote and grant vote self
I1218 01:40:01.448050 36813 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 72 votedfor 10.1.3.3:8700:0 time: 64342
I1218 01:40:01.455529 36809 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.4.3:8700:0 in term 72 current_term 72 log_is_ok 1 votable_time 0
W1218 01:40:01.464592 36806 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:40:01.471729 36816 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 2 current_ctx_version 3
I1218 01:40:01.486104 36816 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 72 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:40:01.563824 36816 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 72 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:40:01.564980 36813 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 72 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:40:01.707654 36816 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 73 current_term 72 granted 1 rejected_by_lease 0
I1218 01:40:01.877844 36813 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 73 current_term 72 log_is_ok 1 votable_time 0
I1218 01:40:01.889890 36813 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 73 votedfor 0.0.0.0:0:0 time: 9907
I1218 01:40:01.919350 36813 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 73 votedfor 10.1.1.3:8700:0 time: 25980
I1218 01:40:02.413870 36806 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=73, status=Follower receives message from new leader with the same term.}
I1218 01:40:03.208868 36809 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000065' with fd=9
I1218 01:40:03.677292 36816 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:40:34.934863 37209 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:40:35.088697 37209 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:40:35.091567 37209 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:40:35.230332 37209 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:40:35.272157 37209 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 65 time: 15324
I1218 01:40:35.275472 37209 log.cpp:1115] load open segment, path: ./data/log first_index: 65
I1218 01:40:35.292196 37209 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:40:35.423182 37280 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:40:35.554626 37280 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 64 last_included_term: 71 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:40:35.566095 37209 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 73 votedfor 10.1.1.3:8700:0 time: 2187
I1218 01:40:35.576723 37209 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 73 last_log_id: (index=65,term=73) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:40:35.588505 37209 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:40:41.502787 37306 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 73 start pre_vote
W1218 01:40:42.141462 37283 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=93 addr=10.1.1.3:8700} (0x0x631000050800): Connection timed out
I1218 01:40:42.655401 37316 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 73 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:40:42.747114 37285 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 73 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:40:42.748569 37285 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 73 start vote and grant vote self
I1218 01:40:42.908640 37285 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 74 votedfor 10.1.3.3:8700:0 time: 116901
W1218 01:40:42.937620 37287 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.5.3:8700:0 ctx_version 2 current_ctx_version 3
I1218 01:40:42.965323 37280 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 74 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:40:42.982338 37279 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 74 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:40:42.999930 37279 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 74 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:40:43.143878 37279 replicator.cpp:143] Replicator=3302829850625@10.1.1.3:8700:0 is started, group Atomic
I1218 01:40:43.257122 37279 replicator.cpp:143] Replicator=3320009719809@10.1.2.3:8700:0 is started, group Atomic
I1218 01:40:43.297096 37279 replicator.cpp:143] Replicator=3337189588993@10.1.4.3:8700:0 is started, group Atomic
I1218 01:40:43.337517 37279 replicator.cpp:143] Replicator=3354369458177@10.1.5.3:8700:0 is started, group Atomic
W1218 01:40:43.590394 37297 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:40:43.907250 37296 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 74 last_included_term 71 last_included_index 64 uri remote://10.1.3.3:8700/1309185752855078903
I1218 01:40:44.204106 37294 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:40:44.215454 37316 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:40:44.229238 37294 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:40:44.270088 37294 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:40:44.421299 37294 server.cpp:291] Node becomes leader
I1218 01:41:08.890007 37310 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
W1218 01:41:08.915315 37308 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.5.3:8700
W1218 01:41:09.078877 37314 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 74 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:41:09.395256 37314 replicator.cpp:989] Group Atomic Replicator=3302829850625 is going to quit
I1218 01:41:09.397917 37314 replicator.cpp:1258] Replicator=3302829850625 is going to quit
I1218 01:41:09.459861 37308 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:41:09.487037 37314 replicator.cpp:989] Group Atomic Replicator=3320009719809 is going to quit
I1218 01:41:09.488373 37314 replicator.cpp:1258] Replicator=3320009719809 is going to quit
I1218 01:41:09.565244 37314 replicator.cpp:989] Group Atomic Replicator=3337189588993 is going to quit
I1218 01:41:09.584022 37314 replicator.cpp:1258] Replicator=3337189588993 is going to quit
I1218 01:41:09.639544 37293 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000066
I1218 01:41:09.651450 37293 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000066
I1218 01:41:09.701841 37293 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=66 last_included_term=74
I1218 01:41:09.724135 37314 replicator.cpp:989] Group Atomic Replicator=3354369458177 is going to quit
I1218 01:41:09.756184 37314 replicator.cpp:1258] Replicator=3354369458177 is going to quit
I1218 01:41:09.779449 37314 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000064
I1218 01:41:09.882128 37288 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 75 current_term 74 granted 1 rejected_by_lease 0
W1218 01:41:09.907821 37288 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=8589934689 fd=12 addr=10.1.2.3:43500:8700} (0x631000051300): Unknown error 1014 [1014]
I1218 01:41:09.911679 37312 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 75 current_term 74 granted 1 rejected_by_lease 0
W1218 01:41:09.872190 37310 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=197 fd=17 addr=10.1.5.3:42626:8700} (0x63100007a640): Unknown error 1014 [1014]
W1218 01:41:09.913092 37312 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=196 fd=16 addr=10.1.2.3:43516:8700} (0x63100007a380): Unknown error 1014 [1014]
I1218 01:41:09.923964 37279 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 75 current_term 74 granted 1 rejected_by_lease 0
I1218 01:41:09.943395 37295 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 75 current_term 74 granted 1 rejected_by_lease 0
W1218 01:41:09.944518 37295 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=194 fd=13 addr=10.1.4.3:44230:8700} (0x631000079e00): Unknown error 1014 [1014]
I1218 01:41:09.972533 37294 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 75 current_term 74 log_is_ok 1 votable_time 0
I1218 01:41:10.058913 37294 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 75 votedfor 0.0.0.0:0:0 time: 84682
I1218 01:41:10.116865 37294 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 75 votedfor 10.1.2.3:8700:0 time: 40408
I1218 01:41:10.135568 37278 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 75 current_term 75 granted 1 rejected_by_lease 0
W1218 01:41:10.136842 37278 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=195 fd=15 addr=10.1.4.3:44234:8700} (0x63100007a0c0): Unknown error 1014 [1014]
I1218 01:41:10.139596 37287 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 75 current_term 75 granted 1 rejected_by_lease 0
I1218 01:41:10.232304 37316 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=75, status=Follower receives message from new leader with the same term.}
I1218 01:41:11.448216 37316 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:41:39.208907 37283 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:41:40.019096 37283 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000067
I1218 01:41:40.020277 37283 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000067
I1218 01:41:40.056278 37283 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000066
I1218 01:41:40.136533 37283 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=67 last_included_term=75
I1218 01:41:40.203226 37306 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 67 time: 18834
W1218 01:41:45.348287 37239 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:41:46.725867 38018 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:41:46.801898 38018 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:41:46.836858 38018 server.cpp:499] Fail to start Server
I1218 01:41:48.003504 37306 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=75, status=Lost connection from leader 10.1.2.3:8700:0}
I1218 01:41:48.001098 37307 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 75 start pre_vote
W1218 01:41:48.087518 37287 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=376 addr=10.1.4.3:8700} (0x0x6310000f1300): Connection refused
W1218 01:41:48.111073 37297 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=374 addr=10.1.2.3:8700} (0x0x6310000f0d80): Connection refused
W1218 01:41:48.119717 37280 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:41:48.963649 37296 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E2][10.1.1.3:8700][E2]peer_id not exist
I1218 01:41:53.669209 37283 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 75 start pre_vote
W1218 01:41:54.079295 37307 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=8589934685 addr=10.1.1.3:8700} (0x0x631000050800): Connection timed out
W1218 01:41:54.112188 37306 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E110]Fail to connect Socket{id=466 addr=10.1.2.3:8700} (0x0x631000118ac0): Connection timed out
W1218 01:41:54.119884 37283 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E110]Fail to connect Socket{id=468 addr=10.1.4.3:8700} (0x0x631000119040): Connection timed out
W1218 01:41:54.120075 37307 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E110]Fail to connect Socket{id=470 addr=10.1.5.3:8700} (0x0x6310001195c0): Connection timed out
I1218 01:41:55.587457 37279 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 76 current_term 75 granted 1 rejected_by_lease 0
I1218 01:41:56.378329 37285 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 76 current_term 75 log_is_ok 1 votable_time 0
I1218 01:41:56.621171 37285 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 76 votedfor 0.0.0.0:0:0 time: 190889
I1218 01:41:56.677248 37285 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 76 votedfor 10.1.1.3:8700:0 time: 51563
I1218 01:41:56.906255 37296 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=76, status=Follower receives message from new leader with the same term.}
I1218 01:42:05.030475 37307 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=76, status=Lost connection from leader 10.1.1.3:8700:0}
I1218 01:42:05.041198 37283 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 76 start pre_vote
W1218 01:42:05.579282 37297 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=473 addr=10.1.2.3:8700} (0x0x631000119e00): Connection refused
W1218 01:42:05.677033 37307 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E110]Fail to connect Socket{id=475 addr=10.1.4.3:8700} (0x0x63100011a380): Connection timed out
W1218 01:42:06.238969 37294 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:42:06.752238 37294 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E2][10.1.1.3:8700][E2]peer_id not exist
W1218 01:42:07.812204 37239 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:42:09.507452 37307 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:42:09.650166 37307 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 67 and last_snapshot_index 67 is less than 1, will clear bufferred logs and return success
I1218 01:42:10.188565 37306 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 68 time: 609628
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:42:10.327904 38199 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:42:10.339211 38199 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:42:10.340849 38199 server.cpp:499] Fail to start Server
I1218 01:42:10.712352 37283 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 76 start pre_vote
W1218 01:42:10.954854 37294 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:42:11.058984 37316 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 76 granted 1 rejected_by_lease 0 disrupted 0

=================================================================
==38018==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
I1218 01:42:11.471909 37316 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 75 granted 1 rejected_by_lease 0 disrupted 0
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
I1218 01:42:11.485850 37316 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 76 start vote and grant vote self
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f351bb8709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
I1218 01:42:11.652819 37316 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 77 votedfor 10.1.3.3:8700:0 time: 74477
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
W1218 01:42:11.674803 37296 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 15 current_ctx_version 16
    #4 0x7f351bb8709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
W1218 01:42:11.727780 37297 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
I1218 01:42:11.767478 37297 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 77 granted 1 rejected_by_lease 0 disrupted 0
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
I1218 01:42:11.808210 37280 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 77 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:42:11.809362 37280 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 77 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
    #6 0x7f351bb8709a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:42:11.840854 37280 replicator.cpp:143] Replicator=5553392713734@10.1.1.3:8700:0 is started, group Atomic
I1218 01:42:12.161087 37280 replicator.cpp:143] Replicator=5519032975365@10.1.2.3:8700:0 is started, group Atomic
I1218 01:42:12.287642 37280 replicator.cpp:143] Replicator=8804682956801@10.1.4.3:8700:0 is started, group Atomic
I1218 01:42:16.037258 37280 replicator.cpp:143] Replicator=8821862825985@10.1.5.3:8700:0 is started, group Atomic
W1218 01:42:16.038347 37307 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E110]Fail to connect Socket{id=8589934965 addr=10.1.4.3:8700} (0x0x6310000f0ac0): Connection timed out [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934965 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934965 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934965
I1218 01:42:16.121803 37283 socket.cpp:2570] Checking Socket{id=8589934965 addr=10.1.4.3:8700} (0x6310000f0ac0)
I1218 01:42:16.196234 37307 socket.cpp:2630] Revived Socket{id=8589934965 addr=10.1.4.3:8700} (0x6310000f0ac0) (Connectable)
W1218 01:42:16.327760 37294 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 3 current_ctx_version 4
I1218 01:42:16.431702 37285 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 78 current_term 77 granted 0 rejected_by_lease 0
I1218 01:42:17.592394 37307 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:42:17.732089 37312 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 78 current_term 77 granted 0 rejected_by_lease 0
I1218 01:42:17.746203 37307 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:42:17.773568 37307 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:42:17.889560 37307 server.cpp:291] Node becomes leader
W1218 01:42:18.074133 37314 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:42:20.912811 37307 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:42:23.660820 37307 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:42:26.587127 37310 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:42:29.364914 37278 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==38199==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fc2a01a109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fc2a01a109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fc2a01a109a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:42:32.588604 37314 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:42:32.848738 37312 input_messenger.cpp:381] Fail to read from Socket{id=8589934971 fd=9 addr=10.1.2.3:8700:60192} (0x6310000f1b40): Connection reset by peer [104]
W1218 01:42:32.929534 37295 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589934971fd=9 addr=10.1.2.3:8700:60192} (0x0x6310000f1b40): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971
I1218 01:42:33.016750 37306 socket.cpp:2570] Checking Socket{id=8589934971 addr=10.1.2.3:8700} (0x6310000f1b40)
W1218 01:42:35.352813 37293 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:42:38.080976 37307 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971
W1218 01:42:38.278106 37314 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:42:39.659544 37283 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:42:39.897688 37307 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000069
I1218 01:42:39.899948 37307 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000069
I1218 01:42:39.910382 37307 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000067
I1218 01:42:40.033079 37307 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=69 last_included_term=77
W1218 01:42:41.000285 37293 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:42:43.446974 37283 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589934971
W1218 01:42:44.099877 37293 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:43:06.675638 37285 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 77 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:43:06.751412 37280 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:43:06.763386 37285 replicator.cpp:989] Group Atomic Replicator=5553392713734 is going to quit
I1218 01:43:06.773298 37285 replicator.cpp:1258] Replicator=5553392713734 is going to quit
I1218 01:43:06.784406 37307 socket.cpp:2570] Checking Socket{id=651 addr=10.1.5.3:8700} (0x631000168800)
I1218 01:43:06.789319 37285 replicator.cpp:989] Group Atomic Replicator=5519032975365 is going to quit
I1218 01:43:06.790043 37285 replicator.cpp:1258] Replicator=5519032975365 is going to quit
I1218 01:43:06.792312 37285 replicator.cpp:989] Group Atomic Replicator=8804682956801 is going to quit
I1218 01:43:06.796880 37285 replicator.cpp:1258] Replicator=8804682956801 is going to quit
I1218 01:43:06.807839 37285 replicator.cpp:989] Group Atomic Replicator=8821862825985 is going to quit
I1218 01:43:06.816744 37285 replicator.cpp:1258] Replicator=8821862825985 is going to quit
I1218 01:43:06.881063 37310 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 78 current_term 77 granted 1 rejected_by_lease 0
I1218 01:43:06.882788 37314 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 78 current_term 77 granted 1 rejected_by_lease 0
W1218 01:43:06.883173 37310 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=17179869379 fd=11 addr=10.1.4.3:33940:8700} (0x63100007a0c0): Unknown error 1014 [1014]
I1218 01:43:06.896452 37283 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 78 current_term 77 granted 1 rejected_by_lease 0
I1218 01:43:06.902292 37306 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 78 current_term 77 granted 1 rejected_by_lease 0
W1218 01:43:06.914181 37306 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=8589935079 fd=9 addr=10.1.4.3:48558:8700} (0x63100011c480): Unknown error 1014 [1014]
W1218 01:43:07.016952 37239 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:43:09.853425 37283 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:43:10.101208 37283 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 69 and last_snapshot_index 69 is less than 1, will clear bufferred logs and return success
I1218 01:43:10.455770 37307 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 70 time: 348161
I1218 01:43:10.558300 37307 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000065'
I1218 01:43:11.975564 37306 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 77 start pre_vote
W1218 01:43:12.127887 37310 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=105 addr=10.1.5.3:8700} (0x0x631000052900): Connection refused
W1218 01:43:12.131857 37310 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=101 addr=10.1.2.3:8700} (0x0x631000051e00): Connection refused
I1218 01:43:12.166059 37314 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 77 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:43:12.209470 37308 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 77 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:43:12.211244 37308 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 77 start vote and grant vote self
W1218 01:43:12.309506 37278 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=8589934698 addr=10.1.2.3:8700} (0x0x631000052bc0): Connection refused
W1218 01:43:12.353291 37293 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=746 addr=10.1.5.3:8700} (0x0x631000190d80): Connection refused
I1218 01:43:12.397806 37308 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 78 votedfor 10.1.3.3:8700:0 time: 26125
I1218 01:43:12.461045 37312 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 78 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:43:12.463416 37310 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 78 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:43:12.465179 37310 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 78 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:43:12.485577 37310 replicator.cpp:143] Replicator=1378684502021@10.1.1.3:8700:0 is started, group Atomic
I1218 01:43:12.564517 37310 replicator.cpp:143] Replicator=1357209665545@10.1.2.3:8700:0 is started, group Atomic
I1218 01:43:12.584990 37310 replicator.cpp:143] Replicator=5652176961545@10.1.4.3:8700:0 is started, group Atomic
I1218 01:43:12.603123 37310 replicator.cpp:143] Replicator=1159641169977@10.1.5.3:8700:0 is started, group Atomic
W1218 01:43:12.650926 37288 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E111]Fail to connect Socket{id=25769803971 addr=10.1.2.3:8700} (0x0x63100007a0c0): Connection refused [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971
W1218 01:43:12.661082 37314 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E111]Fail to connect Socket{id=839 addr=10.1.5.3:8700} (0x0x6310001a4d80): Connection refused [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=839
I1218 01:43:12.716668 37288 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000070' with fd=8
I1218 01:43:12.735723 37308 socket.cpp:2570] Checking Socket{id=25769803971 addr=10.1.2.3:8700} (0x63100007a0c0)
I1218 01:43:12.749763 37307 socket.cpp:2570] Checking Socket{id=839 addr=10.1.5.3:8700} (0x6310001a4d80)
I1218 01:43:12.878224 37293 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:43:12.890373 37293 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:43:12.964516 37293 server.cpp:291] Node becomes leader
W1218 01:43:15.184168 37306 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971
W1218 01:43:15.220897 37307 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=839
W1218 01:43:17.730700 37283 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971
W1218 01:43:17.773699 37283 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=839
W1218 01:43:20.327210 37310 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971
W1218 01:43:20.331634 37306 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=839
W1218 01:43:23.226385 37307 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=839
W1218 01:43:23.313475 37306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971
W1218 01:43:25.244313 37293 input_messenger.cpp:381] Fail to read from Socket{id=8589934693 fd=7 addr=10.1.1.3:8700:47822} (0x631000051e00): Connection reset by peer [104]
W1218 01:43:25.259513 37293 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589934693fd=7 addr=10.1.1.3:8700:47822} (0x0x631000051e00): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934693 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934693 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934693
I1218 01:43:25.368886 37283 socket.cpp:2570] Checking Socket{id=8589934693 addr=10.1.1.3:8700} (0x631000051e00)
W1218 01:43:25.779678 37307 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=839
W1218 01:43:25.881348 37283 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971
W1218 01:43:28.372288 37283 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=839
W1218 01:43:28.423702 37283 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=61, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971
W1218 01:43:30.377878 37283 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934693 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934693 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934693 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934693
W1218 01:43:30.929486 37283 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=839 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=839
W1218 01:43:30.985136 37283 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=71, [E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=25769803971
W1218 01:43:32.737111 37306 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 78 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:43:32.795073 37306 replicator.cpp:989] Group Atomic Replicator=1378684502021 is going to quit
I1218 01:43:32.796959 37306 replicator.cpp:1258] Replicator=1378684502021 is going to quit
I1218 01:43:32.803297 37306 replicator.cpp:989] Group Atomic Replicator=1357209665545 is going to quit
I1218 01:43:32.804379 37306 replicator.cpp:1258] Replicator=1357209665545 is going to quit
I1218 01:43:32.805703 37306 replicator.cpp:989] Group Atomic Replicator=5652176961545 is going to quit
I1218 01:43:32.807170 37306 replicator.cpp:1258] Replicator=5652176961545 is going to quit
I1218 01:43:32.807910 37306 replicator.cpp:989] Group Atomic Replicator=1159641169977 is going to quit
I1218 01:43:32.810200 37283 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:43:32.819276 37306 replicator.cpp:1258] Replicator=1159641169977 is going to quit
I1218 01:43:38.786335 37307 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 78 start pre_vote
W1218 01:43:38.895010 37314 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=8589935429 addr=10.1.1.3:8700} (0x0x6310001a4800): Connection refused
W1218 01:43:38.895532 37293 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=380 addr=10.1.2.3:8700} (0x0x6310000f1e00): Connection refused
W1218 01:43:38.905494 37312 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=384 addr=10.1.5.3:8700} (0x0x6310000f2900): Connection refused
I1218 01:43:39.204867 37295 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 78 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:43:39.785172 37288 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 79 current_term 78 granted 1 rejected_by_lease 0
I1218 01:43:40.122889 37307 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:43:40.674144 37307 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000070
I1218 01:43:40.679620 37307 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000070
I1218 01:43:40.727098 37307 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000069
I1218 01:43:40.913774 37307 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=70 last_included_term=78
I1218 01:43:44.584950 37283 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 78 start pre_vote
W1218 01:43:44.653651 37278 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=17179869836 addr=10.1.1.3:8700} (0x0x631000168ac0): Connection refused
W1218 01:43:44.655047 37278 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=489 addr=10.1.2.3:8700} (0x0x63100011ca00): Connection refused
I1218 01:43:44.666060 37312 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 78 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:43:44.667415 37288 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=493 addr=10.1.5.3:8700} (0x0x63100011d500): Connection refused
I1218 01:43:45.376322 37293 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 79 current_term 78 granted 1 rejected_by_lease 0
I1218 01:43:50.132083 37307 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 78 start pre_vote
W1218 01:43:50.291311 37310 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=386 addr=10.1.1.3:8700} (0x0x6310000f2e80): Connection refused
W1218 01:43:50.327195 37306 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=388 addr=10.1.2.3:8700} (0x0x6310000f3400): Connection refused
W1218 01:43:50.329809 37312 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=392 addr=10.1.5.3:8700} (0x0x6310000f3f00): Connection refused
I1218 01:43:50.485654 37308 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 78 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:43:50.897814 37293 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 79 current_term 78 granted 1 rejected_by_lease 0
I1218 01:43:55.740120 37307 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 78 start pre_vote
W1218 01:43:55.766242 37288 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=394 addr=10.1.1.3:8700} (0x0x6310000f4480): Connection refused
W1218 01:43:55.792585 37307 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=396 addr=10.1.2.3:8700} (0x0x6310000f4a00): Connection refused
I1218 01:43:55.812167 37278 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 78 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:43:55.816771 37314 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=400 addr=10.1.5.3:8700} (0x0x6310000f5500): Connection refused
I1218 01:43:56.664424 37278 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 79 current_term 78 granted 1 rejected_by_lease 0
I1218 01:44:00.879464 37283 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 78 start pre_vote
W1218 01:44:01.685226 37306 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=495 addr=10.1.1.3:8700} (0x0x63100011da80): Connection timed out
I1218 01:44:01.732365 37307 socket.cpp:2570] Checking Socket{id=495 addr=10.1.1.3:8700} (0x63100011da80)
W1218 01:44:01.868666 37295 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=8589935087 addr=10.1.2.3:8700} (0x0x63100011da80): Connection refused
W1218 01:44:01.886204 37314 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=497 addr=10.1.4.3:8700} (0x0x63100011e000): Connection refused
W1218 01:44:02.003322 37308 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=499 addr=10.1.5.3:8700} (0x0x63100011e580): Connection refused
I1218 01:44:07.551820 37306 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 78 start pre_vote
W1218 01:44:07.607295 37310 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=8589934980 addr=10.1.1.3:8700} (0x0x6310000f3400): Connection refused
W1218 01:44:07.640748 37312 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=107 addr=10.1.4.3:8700} (0x0x631000052e80): Connection refused
I1218 01:44:08.267467 37295 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 77 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:44:08.275920 37293 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:44:08.277594 37293 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 78 start vote and grant vote self
I1218 01:44:08.528856 37293 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 79 votedfor 10.1.3.3:8700:0 time: 125827
I1218 01:44:08.624948 37314 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 79 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:44:08.644441 37314 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 79 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:44:08.645632 37314 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 79 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:44:08.696959 37314 replicator.cpp:143] Replicator=5793910882318@10.1.1.3:8700:0 is started, group Atomic
I1218 01:44:08.723315 37314 replicator.cpp:143] Replicator=5652176961557@10.1.2.3:8700:0 is started, group Atomic
I1218 01:44:08.726866 37314 replicator.cpp:143] Replicator=5948529704965@10.1.4.3:8700:0 is started, group Atomic
I1218 01:44:08.729019 37314 replicator.cpp:143] Replicator=1391569403909@10.1.5.3:8700:0 is started, group Atomic
W1218 01:44:09.019981 37312 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 error: [E2][10.1.4.3:8700][E2]peer_id not exist
I1218 01:44:09.200659 37308 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 79 last_included_term 78 last_included_index 70 uri remote://10.1.3.3:8700/1309185752855078904
W1218 01:44:09.201056 37314 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E2][10.1.4.3:8700][E2]peer_id not exist [R1][E2][10.1.4.3:8700][E2]peer_id not exist [R2][E2][10.1.4.3:8700][E2]peer_id not exist [R3][E2][10.1.4.3:8700][E2]peer_id not exist
W1218 01:44:09.232257 37312 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 error: [E2][10.1.1.3:8700][E2]peer_id not exist
W1218 01:44:09.535717 37307 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E2][10.1.1.3:8700][E2]peer_id not exist [R1][E2][10.1.1.3:8700][E2]peer_id not exist [R2][E2][10.1.1.3:8700][E2]peer_id not exist [R3][E2][10.1.1.3:8700][E2]peer_id not exist
I1218 01:44:10.282407 37310 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:44:10.545197 37310 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 70 and last_snapshot_index 70 is less than 1, will clear bufferred logs and return success
I1218 01:44:10.957820 37295 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 71 time: 249274
I1218 01:44:10.884532 37308 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:44:11.038329 37308 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:44:11.272904 37308 server.cpp:291] Node becomes leader
I1218 01:44:11.800303 37288 replicator.cpp:902] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 70 last_included_term 78 success.
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:44:11.807865 39364 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:44:11.854233 39364 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:44:11.873387 39364 server.cpp:499] Fail to start Server
W1218 01:44:17.621307 37239 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:44:18.396624 37308 input_messenger.cpp:381] Fail to read from Socket{id=25769804272 fd=11 addr=10.1.1.3:8700:35758} (0x63100011dd40): Connection reset by peer [104]
W1218 01:44:18.411485 37308 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=25769804272fd=11 addr=10.1.1.3:8700:35758} (0x0x63100011dd40): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272
I1218 01:44:18.509810 37307 socket.cpp:2570] Checking Socket{id=25769804272 addr=10.1.1.3:8700} (0x63100011dd40)
W1218 01:44:19.233170 37288 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E1014]Got EOF of Socket{id=17179869292fd=13 addr=10.1.4.3:8700:41300} (0x0x631000053140) [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869292 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869292 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869292
I1218 01:44:19.356912 37306 socket.cpp:2570] Checking Socket{id=17179869292 addr=10.1.4.3:8700} (0x631000053140)
W1218 01:44:20.134068 37239 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:44:20.226004 37288 input_messenger.cpp:381] Fail to read from Socket{id=17179869682 fd=12 addr=10.1.2.3:8700:33208} (0x63100011e2c0): Connection reset by peer [104]
W1218 01:44:20.228794 37288 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869682fd=12 addr=10.1.2.3:8700:33208} (0x0x63100011e2c0): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869682 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869682 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869682
I1218 01:44:20.360152 37283 socket.cpp:2570] Checking Socket{id=17179869682 addr=10.1.2.3:8700} (0x63100011e2c0)
W1218 01:44:23.794358 37306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272
W1218 01:44:24.308276 37306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869292 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869292 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869292 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=17179869292
W1218 01:44:25.322367 37306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869682 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869682 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869682 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869682
W1218 01:44:27.696053 37239 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:44:28.689908 37314 socket.cpp:2630] Revived Socket{id=17179869292 addr=10.1.4.3:8700} (0x631000053140) (Connectable)
W1218 01:44:28.936914 37283 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 79 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:44:28.916662 39562 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:44:29.015750 37306 server.cpp:296] Node stepped down : Majority of the group dies
W1218 01:44:29.030745 37306 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769804272
W1218 01:44:29.155016 39546 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:44:29.161718 39546 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:44:29.163731 39546 server.cpp:499] Fail to start Server
I1218 01:44:29.170390 37283 replicator.cpp:989] Group Atomic Replicator=5793910882318 is going to quit
I1218 01:44:29.172039 37283 replicator.cpp:1258] Replicator=5793910882318 is going to quit
I1218 01:44:29.217664 37283 replicator.cpp:989] Group Atomic Replicator=5652176961557 is going to quit
I1218 01:44:29.218886 37283 replicator.cpp:1258] Replicator=5652176961557 is going to quit
I1218 01:44:29.221448 37283 replicator.cpp:989] Group Atomic Replicator=5948529704965 is going to quit
I1218 01:44:29.222023 37283 replicator.cpp:1258] Replicator=5948529704965 is going to quit
I1218 01:44:29.272424 37283 replicator.cpp:989] Group Atomic Replicator=1391569403909 is going to quit
I1218 01:44:29.273190 37283 replicator.cpp:1258] Replicator=1391569403909 is going to quit

=================================================================
==39364==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7ff5327dd09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7ff5327dd09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7ff5327dd09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:44:34.980554 37307 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 79 start pre_vote
I1218 01:44:35.005398 37310 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 80 current_term 79 granted 1 rejected_by_lease 0
I1218 01:44:35.152124 37293 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 79 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:44:36.548345 37314 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 79 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:44:36.632607 37314 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 79 start vote and grant vote self
W1218 01:44:36.651440 37306 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 26 current_ctx_version 27
I1218 01:44:36.657613 37295 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.5.3:8700:0 in term 80 current_term 80 granted 1 rejected_by_lease 0
I1218 01:44:36.690899 37307 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 80 current_term 80 log_is_ok 1 votable_time 0
W1218 01:44:36.720993 37308 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 26 current_ctx_version 27
I1218 01:44:36.969866 37314 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 80 votedfor 10.1.3.3:8700:0 time: 85228
I1218 01:44:37.013240 37288 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 80 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:44:37.025918 37310 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 80 granted 0 rejected_by_lease 0 disrupted 0
W1218 01:44:37.123713 37239 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:44:37.197320 37314 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 80 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:44:37.410214 37293 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=80, status=Candidate receives message from new leader with the same term.}
W1218 01:44:37.708779 37295 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 9 current_ctx_version 10
I1218 01:44:38.089165 37295 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:44:40.643416 37283 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:44:40.961650 37283 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000072
I1218 01:44:40.985931 37283 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000072
I1218 01:44:40.998366 37283 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000070
I1218 01:44:41.109078 37283 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=72 last_included_term=80
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:45:00.035971 39841 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:45:00.135344 39841 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:45:00.147888 39841 server.cpp:499] Fail to start Server

=================================================================
==39841==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fe45759209a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fe45759209a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fe45759209a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:45:20.098981 40077 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:45:20.215718 40077 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:45:20.217561 40077 server.cpp:499] Fail to start Server
I1218 01:45:32.649783 37307 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 80 start pre_vote
I1218 01:45:32.703377 37306 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=80, status=Lost connection from leader 10.1.1.3:8700:0}
I1218 01:45:32.896065 37312 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:45:32.913875 37312 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 72 and last_snapshot_index 72 is less than 1, will clear bufferred logs and return success
I1218 01:45:33.037086 37312 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=80, status=Follower receives message from new leader with the same term.}
I1218 01:45:33.045636 37314 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 81 current_term 80 granted 1 rejected_by_lease 0
W1218 01:45:33.047596 37314 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=25769804059 fd=7 addr=10.1.2.3:49318:8700} (0x6310000a1300): Unknown error 1014 [1014]
I1218 01:45:33.059839 37295 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 81 current_term 80 granted 1 rejected_by_lease 0
W1218 01:45:33.061074 37295 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=17179869465 fd=9 addr=10.1.4.3:47324:8700} (0x6310000a0d80): Unknown error 1014 [1014]
W1218 01:45:33.068058 37279 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 29 current_ctx_version 31
I1218 01:45:33.073693 37293 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 81 current_term 80 log_is_ok 1 votable_time 0
W1218 01:45:33.080287 37278 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=8589934993 fd=10 addr=10.1.1.3:50066:8700} (0x6310000f57c0): Unknown error 1014 [1014]
I1218 01:45:33.082973 37312 server.cpp:309] Node stops following { leader_id=10.1.1.3:8700:0, term=80, status=Raft node receives higher term request_vote_request.}

=================================================================
==40077==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f931ed2509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
I1218 01:45:33.229719 37293 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 81 votedfor 0.0.0.0:0:0 time: 153077
I1218 01:45:33.250058 37280 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 73 time: 333385
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f931ed2509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

I1218 01:45:33.301311 37293 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 81 votedfor 10.1.2.3:8700:0 time: 30836
Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
I1218 01:45:33.368618 37287 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=81, status=Follower receives message from new leader with the same term.}
W1218 01:45:33.368750 37296 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=42949673799 fd=12 addr=10.1.2.3:47442:8700} (0x6310001a4d80): Unknown error 1014 [1014]
W1218 01:45:33.371428 37293 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=17179869287 fd=11 addr=10.1.2.3:47440:8700} (0x631000052380): Unknown error 1014 [1014]
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
I1218 01:45:33.420305 37288 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 82 current_term 81 granted 1 rejected_by_lease 0
I1218 01:45:33.421671 37280 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000070'
    #6 0x7f931ed2509a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:45:33.435715 37285 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 82 current_term 81 granted 1 rejected_by_lease 0
W1218 01:45:33.420451 37308 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=42949673799 fd=12 addr=10.1.2.3:47442:8700} (0x6310001a4d80): Unknown error 1014 [1014]
W1218 01:45:33.461202 37288 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=17179869572 fd=13 addr=10.1.2.3:47536:8700} (0x6310000f3400): Unknown error 1014 [1014]
W1218 01:45:33.464077 37310 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=42949673799 fd=12 addr=10.1.2.3:47442:8700} (0x6310001a4d80): Unknown error 1014 [1014]
W1218 01:45:33.895829 37316 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:45:34.154891 37294 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 82 current_term 81 granted 1 rejected_by_lease 0
W1218 01:45:34.211297 37294 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 29 current_ctx_version 35
I1218 01:45:34.404232 37285 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 82 current_term 81 log_is_ok 1 votable_time 0
I1218 01:45:34.411302 37280 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=81, status=Raft node receives higher term request_vote_request.}
I1218 01:45:34.435856 37285 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 82 votedfor 0.0.0.0:0:0 time: 28001
I1218 01:45:34.484385 37285 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 82 votedfor 10.1.2.3:8700:0 time: 46908
I1218 01:45:34.555054 37279 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 82 current_term 82 granted 1 rejected_by_lease 0
W1218 01:45:34.652187 37297 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 29 current_ctx_version 37
I1218 01:45:34.762094 37294 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 82 current_term 82 log_is_ok 1 votable_time 0
I1218 01:45:35.943250 37287 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=82, status=Follower receives message from new leader with the same term.}
I1218 01:45:36.653451 37279 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000073' with fd=8
I1218 01:45:36.706332 37279 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:45:36.725221 37279 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:45:37.733781 37239 sampler.cpp:192] bvar is busy at sampling for 2 seconds!

=================================================================
==39546==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f22ab01a09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f22ab01a09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f22ab01a09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:46:29.955598 40802 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:46:30.209775 40802 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:46:30.232967 40802 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:46:30.910053 40802 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:46:30.958163 40802 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 73 time: 18606
I1218 01:46:31.005059 40802 log.cpp:1115] load open segment, path: ./data/log first_index: 73
I1218 01:46:31.281241 40802 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:46:31.837492 40878 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:46:32.148131 40878 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 72 last_included_term: 80 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:46:32.165282 40802 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 82 votedfor 10.1.2.3:8700:0 time: 1004
I1218 01:46:32.216181 40802 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 82 last_log_id: (index=74,term=82) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:46:32.232949 40802 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:46:37.763739 40856 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 82 start pre_vote
W1218 01:46:38.371017 40856 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=93 addr=10.1.1.3:8700} (0x0x631000050800): Connection timed out
I1218 01:46:38.584731 40878 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 82 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:46:38.664870 40858 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 83 current_term 82 granted 1 rejected_by_lease 0
I1218 01:46:38.789227 40861 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 82 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:46:38.839213 40861 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 82 start vote and grant vote self
I1218 01:46:39.100257 40861 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 83 votedfor 10.1.3.3:8700:0 time: 75502
I1218 01:46:39.103106 40873 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:46:39.113695 40873 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 72 and last_snapshot_index 72 is less than 1, will clear bufferred logs and return success
I1218 01:46:39.120653 40878 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 83 current_term 83 log_is_ok 1 votable_time 0
I1218 01:46:39.130627 40874 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 83 granted 0 rejected_by_lease 0 disrupted 0
W1218 01:46:39.138327 40874 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.5.3:8700:0 ctx_version 2 current_ctx_version 3
I1218 01:46:39.216642 40858 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 83 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:46:39.297561 40878 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 83 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:46:39.396095 40861 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=83, status=Candidate receives message from new leader with the same term.}
W1218 01:46:39.613320 40874 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:46:40.446353 40852 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:46:40.467006 40852 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:46:40.468923 40852 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:46:51.679730 40828 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:47:07.415459 40856 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 83 start pre_vote
I1218 01:47:07.420430 40873 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=83, status=Lost connection from leader 10.1.2.3:8700:0}
W1218 01:47:07.919777 40878 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:47:08.057090 40858 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 83 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:47:08.093098 40874 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 83 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:47:08.096264 40874 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 83 start vote and grant vote self
W1218 01:47:08.118108 40852 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 5 current_ctx_version 6
W1218 01:47:08.325186 40861 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:47:08.339736 40874 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 84 votedfor 10.1.3.3:8700:0 time: 170922
I1218 01:47:08.414726 40878 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 84 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:47:08.416805 40858 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 84 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:47:08.418365 40858 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 84 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:47:08.413926 41170 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:47:08.495088 41170 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:47:08.497089 41170 server.cpp:499] Fail to start Server
I1218 01:47:08.469972 40858 replicator.cpp:143] Replicator=1159641169926@10.1.1.3:8700:0 is started, group Atomic
I1218 01:47:08.649495 40858 replicator.cpp:143] Replicator=1146756268037@10.1.2.3:8700:0 is started, group Atomic
I1218 01:47:08.680437 40858 replicator.cpp:143] Replicator=2207613190145@10.1.4.3:8700:0 is started, group Atomic
I1218 01:47:08.741672 40858 replicator.cpp:143] Replicator=2224793059329@10.1.5.3:8700:0 is started, group Atomic
W1218 01:47:08.863911 40883 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 3 current_ctx_version 4
W1218 01:47:08.863777 40852 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:47:09.057432 40861 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:47:09.087944 40861 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:47:09.221163 40852 server.cpp:291] Node becomes leader
I1218 01:47:09.223953 40858 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:47:09.780673 40858 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000076
I1218 01:47:09.782110 40858 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000076
I1218 01:47:09.875267 40858 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000072
I1218 01:47:10.042325 40858 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=76 last_included_term=84
W1218 01:47:11.898259 40852 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:47:14.939805 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:47:17.966241 40873 socket.cpp:2570] Checking Socket{id=8589934692 addr=10.1.4.3:8700} (0x631000051b40)
W1218 01:47:18.043169 40855 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934692 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934692 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934692 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934692
W1218 01:47:18.071394 40873 input_messenger.cpp:381] Fail to read from Socket{id=17179869279 fd=10 addr=10.1.2.3:8700:42004} (0x631000050d80): Connection reset by peer [104]
W1218 01:47:18.111570 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869279fd=10 addr=10.1.2.3:8700:42004} (0x0x631000050d80): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869279 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869279 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869279
W1218 01:47:18.073956 40854 input_messenger.cpp:381] Fail to read from Socket{id=8589934694 fd=9 addr=10.1.1.3:8700:41158} (0x6310000520c0): Connection reset by peer [104]
W1218 01:47:18.117022 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589934694fd=9 addr=10.1.1.3:8700:41158} (0x0x6310000520c0): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934694 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934694 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934694
W1218 01:47:18.092648 40871 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:47:18.241410 40856 socket.cpp:2570] Checking Socket{id=17179869279 addr=10.1.2.3:8700} (0x631000050d80)
I1218 01:47:18.267381 40854 socket.cpp:2570] Checking Socket{id=8589934694 addr=10.1.1.3:8700} (0x6310000520c0)
W1218 01:47:21.194231 40855 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:47:23.324106 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934694 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934694 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934694 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934694
W1218 01:47:23.324959 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934692 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934692 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934692 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934692
W1218 01:47:23.465327 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869279 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869279 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869279 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869279
W1218 01:47:24.052708 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:47:24.132324 40856 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 84 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:47:24.239921 40856 replicator.cpp:989] Group Atomic Replicator=1159641169926 is going to quit
I1218 01:47:24.241263 40856 replicator.cpp:1258] Replicator=1159641169926 is going to quit
I1218 01:47:24.245676 40856 replicator.cpp:989] Group Atomic Replicator=1146756268037 is going to quit
I1218 01:47:24.246321 40856 replicator.cpp:1258] Replicator=1146756268037 is going to quit
I1218 01:47:24.251179 40871 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:47:24.269107 40856 replicator.cpp:989] Group Atomic Replicator=2207613190145 is going to quit
I1218 01:47:24.270244 40856 replicator.cpp:1258] Replicator=2207613190145 is going to quit
I1218 01:47:24.272248 40856 replicator.cpp:989] Group Atomic Replicator=2224793059329 is going to quit
I1218 01:47:24.272908 40856 replicator.cpp:1258] Replicator=2224793059329 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:47:28.369745 41376 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:47:28.547201 41376 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:47:28.636819 41376 server.cpp:499] Fail to start Server

=================================================================
==41170==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f3cef21309a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f3cef21309a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f3cef21309a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:47:29.483474 40856 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 84 start pre_vote
W1218 01:47:30.001466 40854 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:47:30.312117 40873 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
I1218 01:47:30.344684 40873 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 84 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:47:30.393428 40854 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 84 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:47:30.396436 40854 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 84 start vote and grant vote self
W1218 01:47:30.512025 40856 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
W1218 01:47:30.529657 40856 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:47:30.647891 40854 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 85 votedfor 10.1.3.3:8700:0 time: 201210
I1218 01:47:30.717826 40856 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 85 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:47:30.822176 40873 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 85 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:47:30.843170 40873 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 85 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:47:30.891599 40873 replicator.cpp:143] Replicator=1159641169935@10.1.1.3:8700:0 is started, group Atomic
I1218 01:47:31.075009 40873 replicator.cpp:143] Replicator=6652904341521@10.1.2.3:8700:0 is started, group Atomic
I1218 01:47:31.099479 40873 replicator.cpp:143] Replicator=6661494276105@10.1.4.3:8700:0 is started, group Atomic
I1218 01:47:31.111593 40873 replicator.cpp:143] Replicator=6682969112577@10.1.5.3:8700:0 is started, group Atomic
W1218 01:47:31.216702 40855 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:47:31.497192 40870 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:47:31.500020 40870 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:47:31.547091 40870 server.cpp:291] Node becomes leader
W1218 01:47:34.186584 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:47:36.915519 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:47:39.424383 40854 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:47:39.535889 40854 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000077
I1218 01:47:39.537382 40854 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000077
I1218 01:47:39.565761 40854 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000076
I1218 01:47:39.618186 40854 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=77 last_included_term=85
I1218 01:47:39.705360 40851 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 77 time: 13894
W1218 01:47:39.900058 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:47:41.899770 40854 input_messenger.cpp:381] Fail to read from Socket{id=469 fd=12 addr=10.1.5.3:8700:58852} (0x631000141300): Connection reset by peer [104]
I1218 01:47:42.104830 40873 socket.cpp:2570] Checking Socket{id=469 addr=10.1.5.3:8700} (0x631000141300)
W1218 01:47:43.575637 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469

=================================================================
==41376==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f38db2bb09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f38db2bb09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f38db2bb09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:47:46.106184 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:47:48.640899 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:47:51.217272 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:47:53.764501 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:47:56.480697 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:01.049379 40876 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.4.3:8700
W1218 01:48:01.087321 40879 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.1.3:8700
W1218 01:48:01.527509 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:04.114185 40873 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=111, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:06.655174 40854 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=121, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:09.443035 40854 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:48:09.559484 40854 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 77 and last_snapshot_index 77 is less than 1, will clear bufferred logs and return success
I1218 01:48:09.574925 40871 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 78 time: 66955
I1218 01:48:09.589397 40871 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000073'
W1218 01:48:09.634393 40855 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=131, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:10.021843 40854 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415776
I1218 01:48:10.322980 40854 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:10.849638 40854 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415777
I1218 01:48:10.854056 40854 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:11.407174 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415778
I1218 01:48:11.455818 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:11.973842 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415779
I1218 01:48:11.985180 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:12.537777 40856 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415780
I1218 01:48:12.540046 40856 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:12.541261 40856 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:12.655014 40873 input_messenger.cpp:381] Fail to read from Socket{id=467 fd=10 addr=10.1.4.3:8700:44972} (0x631000140d80): Connection reset by peer [104]
W1218 01:48:12.688880 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=467fd=10 addr=10.1.4.3:8700:44972} (0x0x631000140d80): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=467 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=467 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=467
I1218 01:48:12.786070 40854 socket.cpp:2570] Checking Socket{id=467 addr=10.1.4.3:8700} (0x631000140d80)
I1218 01:48:13.046758 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415781
I1218 01:48:13.049199 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:13.084218 40856 input_messenger.cpp:381] Fail to read from Socket{id=8589934700 fd=8 addr=10.1.1.3:8700:35708} (0x631000053140): Connection reset by peer [104]
W1218 01:48:13.086947 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589934700fd=8 addr=10.1.1.3:8700:35708} (0x0x631000053140): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934700 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934700 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934700
W1218 01:48:13.101969 40854 input_messenger.cpp:381] Fail to read from Socket{id=465 fd=9 addr=10.1.2.3:8700:48614} (0x631000140800): Connection reset by peer [104]
W1218 01:48:13.104451 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=465fd=9 addr=10.1.2.3:8700:48614} (0x0x631000140800): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=465
I1218 01:48:13.192448 40854 socket.cpp:2570] Checking Socket{id=8589934700 addr=10.1.1.3:8700} (0x631000053140)
I1218 01:48:13.219990 40873 socket.cpp:2570] Checking Socket{id=465 addr=10.1.2.3:8700} (0x631000140800)
I1218 01:48:13.571946 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415782
I1218 01:48:13.587041 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:14.096604 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415783
I1218 01:48:14.109601 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:14.619125 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415784
I1218 01:48:14.621671 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:15.174208 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415785
I1218 01:48:15.180807 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:15.181810 40873 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:15.739857 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415786
I1218 01:48:15.762718 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:16.276736 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415787
I1218 01:48:16.301622 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:16.815743 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415788
I1218 01:48:16.818197 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:17.338729 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415789
I1218 01:48:17.341194 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:17.818004 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=467 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=467 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=467 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=467
I1218 01:48:17.852751 40854 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415790
I1218 01:48:17.893004 40854 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:17.894184 40854 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:18.211764 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=465 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=465 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=465 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=465
W1218 01:48:18.347718 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934700 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934700 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934700 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934700
I1218 01:48:18.402616 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415791
I1218 01:48:18.416407 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:18.964964 40854 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415792
I1218 01:48:18.978111 40854 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:19.487802 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415793
I1218 01:48:19.519726 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:48:19.745496 41871 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 01:48:20.788931 40851 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415794
I1218 01:48:20.827579 40872 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:21.311311 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=171, [E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=469 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:21.338814 40854 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415795
I1218 01:48:21.341998 40854 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
W1218 01:48:21.491047 40854 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 85 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:48:21.644383 40873 server.cpp:296] Node stepped down : Majority of the group dies
W1218 01:48:21.717178 41852 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:48:21.772971 40854 replicator.cpp:989] Group Atomic Replicator=1159641169935 is going to quit
E1218 01:48:21.780793 41852 server.cpp:1101] Fail to listen 0.0.0.0:8700
I1218 01:48:21.795079 40854 replicator.cpp:1258] Replicator=1159641169935 is going to quit
E1218 01:48:21.820899 41852 server.cpp:499] Fail to start Server
I1218 01:48:21.827685 40854 replicator.cpp:989] Group Atomic Replicator=6652904341521 is going to quit
I1218 01:48:21.828850 40854 replicator.cpp:1258] Replicator=6652904341521 is going to quit
I1218 01:48:21.829602 40854 replicator.cpp:989] Group Atomic Replicator=6661494276105 is going to quit
I1218 01:48:21.852483 40873 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 85 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415796
I1218 01:48:21.868530 40873 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E112]Not connected to 10.1.5.3:8700 yet, server_id=469
I1218 01:48:21.909207 40854 replicator.cpp:1258] Replicator=6661494276105 is going to quit
I1218 01:48:21.910651 40854 replicator.cpp:989] Group Atomic Replicator=6682969112577 is going to quit
I1218 01:48:21.911653 40854 replicator.cpp:1258] Replicator=6682969112577 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:49:01.262858 42291 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:49:01.296079 42291 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:49:01.297869 42291 server.cpp:499] Fail to start Server
I1218 01:49:04.873584 40870 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 85 start pre_vote
I1218 01:49:04.870267 40855 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:49:04.898089 40855 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 77 and last_snapshot_index 77 is less than 1, will clear bufferred logs and return success
I1218 01:49:05.329968 40856 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:05.505492 40854 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 85 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:05.560221 40854 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 85 start vote and grant vote self
I1218 01:49:05.876381 40854 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 86 votedfor 10.1.3.3:8700:0 time: 247426
W1218 01:49:05.878268 40873 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 9 current_ctx_version 10
I1218 01:49:05.918365 40856 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 86 current_term 86 granted 1 rejected_by_lease 0
W1218 01:49:05.935690 40851 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 9 current_ctx_version 10
I1218 01:49:05.963462 40855 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 86 granted 0 rejected_by_lease 0 disrupted 0
I1218 01:49:06.015954 40855 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 86 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:06.080713 40872 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 86 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:06.082403 40872 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 86 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:49:06.155488 40872 replicator.cpp:143] Replicator=6876242640937@10.1.1.3:8700:0 is started, group Atomic
I1218 01:49:06.305667 40872 replicator.cpp:143] Replicator=5579162517513@10.1.2.3:8700:0 is started, group Atomic
I1218 01:49:06.308944 40872 replicator.cpp:143] Replicator=5531917877326@10.1.4.3:8700:0 is started, group Atomic
I1218 01:49:06.367221 40872 replicator.cpp:143] Replicator=7700876361729@10.1.5.3:8700:0 is started, group Atomic
W1218 01:49:06.524075 40870 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 7 current_ctx_version 8
I1218 01:49:06.534255 40859 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000078' with fd=12
I1218 01:49:06.776247 40875 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:49:06.807109 40875 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:49:07.108626 40877 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 86 last_included_term 85 last_included_index 77 uri remote://10.1.3.3:8700/1435638386497415797
I1218 01:49:07.152063 40860 server.cpp:291] Node becomes leader
I1218 01:49:08.393666 40860 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 77 last_included_term 85 error: [E5][10.1.5.3:8700][E5]Fail to create snapshot writer
W1218 01:49:08.405086 40860 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E5][10.1.5.3:8700][E5]Fail to create snapshot writer
W1218 01:49:11.233065 40873 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==41852==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f83d547b09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f83d547b09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f83d547b09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:49:14.123010 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:17.075647 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:19.310737 40855 input_messenger.cpp:381] Fail to read from Socket{id=651 fd=7 addr=10.1.1.3:8700:44458} (0x63100017c800): Connection reset by peer [104]
W1218 01:49:19.329643 40872 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=651fd=7 addr=10.1.1.3:8700:44458} (0x0x63100017c800): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=651 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=651 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=651
I1218 01:49:19.456445 40854 socket.cpp:2570] Checking Socket{id=651 addr=10.1.1.3:8700} (0x63100017c800)
I1218 01:49:19.523205 40873 socket.cpp:2570] Checking Socket{id=8589935244 addr=10.1.2.3:8700} (0x63100017cac0)
W1218 01:49:19.718278 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935244 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935244 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935244 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935244
W1218 01:49:20.296408 40870 input_messenger.cpp:381] Fail to read from Socket{id=654 fd=9 addr=10.1.4.3:8700:53928} (0x63100017d040): Connection reset by peer [104]
W1218 01:49:20.455397 40856 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:20.472036 40851 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=654fd=9 addr=10.1.4.3:8700:53928} (0x0x63100017d040): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=654 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=654 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=654
I1218 01:49:20.488934 40856 socket.cpp:2570] Checking Socket{id=654 addr=10.1.4.3:8700} (0x63100017d040)
W1218 01:49:20.992125 40873 socket.cpp:1361] Fail to wait EPOLLOUT of fd=7: Connection timed out [110]

=================================================================
==42291==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fc284ba009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fc284ba009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fc284ba009a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:49:23.332628 40856 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:24.469498 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=651 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=651 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=651 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=651
W1218 01:49:25.001593 40870 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935244 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935244 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935244 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935244
W1218 01:49:25.625763 40851 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=654 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=654 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=654 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=654
W1218 01:49:26.138177 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:26.823885 40856 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 86 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:49:26.892685 40873 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:49:27.003065 40856 replicator.cpp:989] Group Atomic Replicator=6876242640937 is going to quit
I1218 01:49:27.006912 40856 replicator.cpp:1258] Replicator=6876242640937 is going to quit
I1218 01:49:27.053493 40856 replicator.cpp:989] Group Atomic Replicator=5579162517513 is going to quit
I1218 01:49:27.054745 40856 replicator.cpp:1258] Replicator=5579162517513 is going to quit
I1218 01:49:27.055982 40856 replicator.cpp:989] Group Atomic Replicator=5531917877326 is going to quit
I1218 01:49:27.056543 40856 replicator.cpp:1258] Replicator=5531917877326 is going to quit
I1218 01:49:27.057477 40856 replicator.cpp:989] Group Atomic Replicator=7700876361729 is going to quit
I1218 01:49:27.058029 40856 replicator.cpp:1258] Replicator=7700876361729 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:49:29.153890 42536 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:49:29.203374 42536 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:49:29.212498 42536 server.cpp:499] Fail to start Server
I1218 01:49:32.643496 40856 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 86 start pre_vote
W1218 01:49:32.809711 40854 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:49:32.911816 40873 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 86 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:33.028179 40856 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 86 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:33.030241 40856 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 86 start vote and grant vote self
W1218 01:49:33.267630 40854 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:49:33.383996 40856 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 87 votedfor 10.1.3.3:8700:0 time: 185541
I1218 01:49:33.401070 40873 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 87 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:49:33.428469 40873 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 11 current_ctx_version 12
I1218 01:49:33.431030 40856 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 87 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:33.456900 40856 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 87 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:49:33.597987 40856 replicator.cpp:143] Replicator=5579162517522@10.1.1.3:8700:0 is started, group Atomic
I1218 01:49:34.600206 40855 socket.cpp:2570] Checking Socket{id=17179869835 addr=10.1.1.3:8700} (0x63100017c800)
W1218 01:49:34.619863 40872 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E110]Fail to connect Socket{id=17179869835 addr=10.1.1.3:8700} (0x0x63100017c800): Connection timed out [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835
I1218 01:49:34.744290 40870 socket.cpp:2630] Revived Socket{id=17179869835 addr=10.1.1.3:8700} (0x63100017c800) (Connectable)
I1218 01:49:34.987818 40851 replicator.cpp:143] Replicator=1318554959905@10.1.2.3:8700:0 is started, group Atomic
I1218 01:49:35.055020 40851 replicator.cpp:143] Replicator=5630702125073@10.1.4.3:8700:0 is started, group Atomic
I1218 01:49:35.058403 40851 replicator.cpp:143] Replicator=5561982648349@10.1.5.3:8700:0 is started, group Atomic
W1218 01:49:35.263741 40873 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 9 current_ctx_version 10
I1218 01:49:35.265838 40856 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
W1218 01:49:35.349161 40871 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:49:35.515517 40855 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:49:35.518134 40855 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:49:35.844166 40855 server.cpp:291] Node becomes leader
I1218 01:49:36.121898 40855 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000079
I1218 01:49:36.149704 40855 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000079
I1218 01:49:36.158309 40855 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000077
I1218 01:49:36.226132 40855 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=79 last_included_term=87
W1218 01:49:38.197237 40872 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:41.027320 40872 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:41.121191 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835
W1218 01:49:41.105955 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935249 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935249 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935249 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935249
I1218 01:49:41.150962 40856 socket.cpp:2570] Checking Socket{id=8589935249 addr=10.1.2.3:8700} (0x63100017d880)
I1218 01:49:41.267416 40851 socket.cpp:2570] Checking Socket{id=17179869835 addr=10.1.1.3:8700} (0x63100017c800)
W1218 01:49:43.119963 40873 input_messenger.cpp:381] Fail to read from Socket{id=837 fd=10 addr=10.1.4.3:8700:51124} (0x6310001f4800): Connection reset by peer [104]
W1218 01:49:43.141362 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=837fd=10 addr=10.1.4.3:8700:51124} (0x0x6310001f4800): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=837 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=837 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=837
I1218 01:49:43.244513 40856 socket.cpp:2570] Checking Socket{id=837 addr=10.1.4.3:8700} (0x6310001f4800)
W1218 01:49:43.835289 40873 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:46.272141 40855 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869835
W1218 01:49:46.291528 40870 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935249 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935249 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935249 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=8589935249
W1218 01:49:47.215734 40873 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:48.407258 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=837 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=837 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=837 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=837
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:49:49.681548 42717 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:49:50.095844 40851 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:50.349388 40873 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 87 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:49:50.421777 40854 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:49:50.446246 40873 replicator.cpp:989] Group Atomic Replicator=5579162517522 is going to quit
I1218 01:49:50.449684 40873 replicator.cpp:1258] Replicator=5579162517522 is going to quit
I1218 01:49:50.469458 40873 replicator.cpp:989] Group Atomic Replicator=1318554959905 is going to quit
I1218 01:49:50.471206 40873 replicator.cpp:1258] Replicator=1318554959905 is going to quit
W1218 01:49:50.483448 40854 versioned_ref_with_id.h:598] Socket{id=17179869835 addr=10.1.1.3:8700} (0x0x63100017c800) was abandoned during revival
I1218 01:49:50.491369 40873 replicator.cpp:989] Group Atomic Replicator=5630702125073 is going to quit
I1218 01:49:50.492458 40873 replicator.cpp:1258] Replicator=5630702125073 is going to quit
I1218 01:49:50.493219 40873 replicator.cpp:989] Group Atomic Replicator=5561982648349 is going to quit
I1218 01:49:50.494128 40873 replicator.cpp:1258] Replicator=5561982648349 is going to quit
W1218 01:49:52.617676 42702 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:49:52.648425 42702 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:49:52.668071 42702 server.cpp:499] Fail to start Server
I1218 01:49:56.460305 40856 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 87 start pre_vote
W1218 01:49:57.076761 40851 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:49:57.389463 40870 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 87 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:57.393517 40855 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 88 current_term 87 granted 1 rejected_by_lease 0
I1218 01:49:57.545346 40851 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 87 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:49:57.548533 40851 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 87 start vote and grant vote self
W1218 01:49:57.623291 40871 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:49:57.645762 40851 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 88 votedfor 10.1.3.3:8700:0 time: 79522
I1218 01:49:57.756598 40871 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 88 granted 1 rejected_by_lease 0 disrupted 0

=================================================================
==42536==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
I1218 01:49:57.856806 40872 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 88 granted 1 rejected_by_lease 0 disrupted 0
    #5 0x7f664ecec09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
I1218 01:49:57.895327 40872 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 88 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f664ecec09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
I1218 01:49:57.976305 40872 replicator.cpp:143] Replicator=9917079486477@10.1.1.3:8700:0 is started, group Atomic
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
I1218 01:49:58.051744 40872 replicator.cpp:143] Replicator=5776731013157@10.1.2.3:8700:0 is started, group Atomic
I1218 01:49:58.091127 40872 replicator.cpp:143] Replicator=6983616823313@10.1.4.3:8700:0 is started, group Atomic
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f664ecec09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
I1218 01:49:58.094295 40872 replicator.cpp:143] Replicator=7722351198209@10.1.5.3:8700:0 is started, group Atomic
W1218 01:49:58.185362 40881 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:49:58.511533 40851 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 13 current_ctx_version 14
W1218 01:49:58.531352 40871 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 11 current_ctx_version 12
I1218 01:49:58.582746 40872 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:49:58.590984 40872 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:49:58.609130 40872 server.cpp:291] Node becomes leader
I1218 01:49:58.628798 40875 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 88 current_term 88 log_is_ok 0 votable_time 0
W1218 01:50:01.233212 40870 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:50:04.045390 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:50:05.518254 40854 input_messenger.cpp:381] Fail to read from Socket{id=17179869649 fd=11 addr=10.1.1.3:8700:50308} (0x631000140800): Connection reset by peer [104]
W1218 01:50:05.568856 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869649fd=11 addr=10.1.1.3:8700:50308} (0x0x631000140800): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649
I1218 01:50:05.621115 40873 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:50:05.767256 40855 socket.cpp:2570] Checking Socket{id=17179869649 addr=10.1.1.3:8700} (0x631000140800)
I1218 01:50:06.651878 40854 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000080
I1218 01:50:06.653877 40854 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000080
I1218 01:50:06.747822 40854 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000079
I1218 01:50:07.093132 40854 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=80 last_included_term=88
W1218 01:50:07.096506 40855 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:50:07.232399 40872 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 80 time: 40197
W1218 01:50:09.972286 40851 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==42702==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f3ffc2b609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f3ffc2b609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f3ffc2b609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:50:10.778234 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649
W1218 01:50:12.744309 40870 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:50:16.049312 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:50:16.184859 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649
W1218 01:50:18.781843 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:50:21.406234 40854 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649
W1218 01:50:21.477535 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:50:22.553203 40854 input_messenger.cpp:381] Fail to read from Socket{id=661 fd=14 addr=10.1.4.3:8700:41550} (0x63100017e380): Connection reset by peer [104]
W1218 01:50:22.576233 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=661fd=14 addr=10.1.4.3:8700:41550} (0x0x63100017e380): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=661 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=661 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=661
I1218 01:50:22.672511 40854 socket.cpp:2570] Checking Socket{id=661 addr=10.1.4.3:8700} (0x63100017e380)
W1218 01:50:24.289736 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:50:26.769779 40873 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869649
W1218 01:50:27.345944 40855 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:50:27.783389 40856 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=661 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=661 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=661 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=661
W1218 01:50:28.613828 40854 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 88 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:50:28.663872 40873 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:50:28.698065 40854 replicator.cpp:989] Group Atomic Replicator=9917079486477 is going to quit
I1218 01:50:28.699740 40854 replicator.cpp:1258] Replicator=9917079486477 is going to quit
I1218 01:50:28.734642 40854 replicator.cpp:989] Group Atomic Replicator=5776731013157 is going to quit
I1218 01:50:28.735616 40854 replicator.cpp:1258] Replicator=5776731013157 is going to quit
I1218 01:50:28.737390 40854 replicator.cpp:989] Group Atomic Replicator=6983616823313 is going to quit
I1218 01:50:28.776198 40854 replicator.cpp:1258] Replicator=6983616823313 is going to quit
I1218 01:50:28.777583 40854 replicator.cpp:989] Group Atomic Replicator=7722351198209 is going to quit
I1218 01:50:28.778136 40854 replicator.cpp:1258] Replicator=7722351198209 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:51:45.682324 43938 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:51:46.029222 43938 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:51:46.047480 43938 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:51:46.431849 43938 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:51:46.492549 43938 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 80 time: 58268
I1218 01:51:46.540905 43938 log.cpp:1115] load open segment, path: ./data/log first_index: 78
I1218 01:51:46.747154 43938 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:51:46.964928 43988 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:51:47.136570 43988 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 80 last_included_term: 88 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:51:47.236162 43938 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 88 votedfor 10.1.3.3:8700:0 time: 2470
I1218 01:51:47.291857 43938 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 88 last_log_id: (index=80,term=88) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:51:47.377802 43938 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:51:51.740826 43996 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:51:51.839049 43996 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 80 and last_snapshot_index 80 is less than 1, will clear bufferred logs and return success
I1218 01:51:52.385962 43991 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 81 time: 471019
I1218 01:51:52.479291 43991 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000078'
I1218 01:51:52.620873 43976 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 88 start pre_vote
W1218 01:51:53.151813 43996 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=93 addr=10.1.1.3:8700} (0x0x631000050800): Connection timed out
I1218 01:51:53.717414 43999 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:51:53.902007 43995 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 88 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:51:53.903932 43995 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 88 start vote and grant vote self
I1218 01:51:54.027057 43995 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 89 votedfor 10.1.3.3:8700:0 time: 64390
I1218 01:51:54.155475 43988 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 89 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:51:54.158131 44001 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 89 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:51:54.159608 44001 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 89 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:51:54.229132 44001 replicator.cpp:143] Replicator=3302829850625@10.1.1.3:8700:0 is started, group Atomic
I1218 01:51:54.323551 44001 replicator.cpp:143] Replicator=3320009719809@10.1.2.3:8700:0 is started, group Atomic
I1218 01:51:54.344776 44001 replicator.cpp:143] Replicator=3337189588993@10.1.4.3:8700:0 is started, group Atomic
I1218 01:51:54.359449 44001 replicator.cpp:143] Replicator=3354369458177@10.1.5.3:8700:0 is started, group Atomic
I1218 01:51:54.419059 43993 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000081' with fd=12
W1218 01:51:54.420112 43994 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 2 current_ctx_version 3
I1218 01:51:54.493752 43993 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 90 current_term 89 granted 0 rejected_by_lease 0
W1218 01:51:54.567369 44001 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 01:51:54.776280 43995 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:51:54.831215 43995 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:51:54.833925 43995 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:51:54.960232 44001 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 89 last_included_term 88 last_included_index 80 uri remote://10.1.3.3:8700/1545976577683897688
I1218 01:51:55.010718 44001 server.cpp:291] Node becomes leader
I1218 01:51:55.567617 43988 replicator.cpp:902] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 80 last_included_term 88 success.
W1218 01:51:57.063709 43991 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
I1218 01:51:57.100189 43991 socket.cpp:2570] Checking Socket{id=283 addr=10.1.4.3:8700} (0x6310000a1300)
W1218 01:52:02.274258 43991 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
W1218 01:52:07.369419 43996 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
W1218 01:52:12.108598 43996 input_messenger.cpp:381] Fail to read from Socket{id=281 fd=13 addr=10.1.2.3:8700:47854} (0x6310000a0d80): Connection reset by peer [104]
W1218 01:52:12.185936 43996 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=281fd=13 addr=10.1.2.3:8700:47854} (0x0x6310000a0d80): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=281
I1218 01:52:12.287961 43996 socket.cpp:2570] Checking Socket{id=281 addr=10.1.2.3:8700} (0x6310000a0d80)
W1218 01:52:12.527973 43991 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
W1218 01:52:16.055894 43991 input_messenger.cpp:381] Fail to read from Socket{id=279 fd=10 addr=10.1.1.3:8700:39984} (0x6310000a0800): Connection reset by peer [104]
W1218 01:52:16.140270 43991 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=279fd=10 addr=10.1.1.3:8700:39984} (0x0x6310000a0800): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=279
I1218 01:52:16.204277 43996 socket.cpp:2570] Checking Socket{id=279 addr=10.1.1.3:8700} (0x6310000a0800)
W1218 01:52:17.639938 43996 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
W1218 01:52:17.681051 43991 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=281
W1218 01:52:21.351346 43991 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=279 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=279
I1218 01:52:21.513029 43991 socket.cpp:2630] Revived Socket{id=281 addr=10.1.2.3:8700} (0x6310000a0d80) (Connectable)
I1218 01:52:21.855077 43991 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:52:22.266115 43976 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000081
I1218 01:52:22.275233 43976 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000081
I1218 01:52:22.294603 43976 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000080
I1218 01:52:22.327664 43976 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=81 last_included_term=89
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:52:22.296962 44288 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:52:22.398204 44288 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:52:22.437235 44288 server.cpp:499] Fail to start Server
W1218 01:52:22.827997 43991 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=283 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=283
I1218 01:52:24.537376 43996 socket.cpp:2630] Revived Socket{id=283 addr=10.1.4.3:8700} (0x6310000a1300) (Connectable)
I1218 01:52:25.355778 43991 socket.cpp:2630] Revived Socket{id=279 addr=10.1.1.3:8700} (0x6310000a0800) (Connectable)
W1218 01:52:27.051152 43996 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:52:32.615746 43976 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.1.3:8700
W1218 01:52:32.942207 43989 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:52:38.659945 43996 socket.cpp:2570] Checking Socket{id=281 addr=10.1.2.3:8700} (0x6310000a0d80)
W1218 01:52:38.661230 43976 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=281 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=281
W1218 01:52:38.715996 43972 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:52:40.013650 43974 input_messenger.cpp:381] Fail to read from Socket{id=285 fd=15 addr=10.1.5.3:8700:37606} (0x6310000a1880): Connection reset by peer [104]
I1218 01:52:40.146998 43991 socket.cpp:2570] Checking Socket{id=285 addr=10.1.5.3:8700} (0x6310000a1880)
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:53:33.584235 45023 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:53:34.406580 45023 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:53:34.422111 45023 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:53:34.638154 45023 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:53:34.660301 45023 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 81 time: 20424
I1218 01:53:34.680562 45023 log.cpp:1115] load open segment, path: ./data/log first_index: 81
I1218 01:53:34.871163 45023 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:53:35.173915 45095 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:53:35.211853 45095 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 81 last_included_term: 89 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:53:35.322211 45023 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 89 votedfor 10.1.3.3:8700:0 time: 1787
I1218 01:53:35.355919 45023 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 89 last_log_id: (index=81,term=89) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:53:35.437192 45023 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:53:40.541716 45100 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:53:40.953250 45100 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 81 and last_snapshot_index 81 is less than 1, will clear bufferred logs and return success
I1218 01:53:41.303225 45088 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 89 start pre_vote
I1218 01:53:41.336367 45100 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 82 time: 327844
I1218 01:53:41.392227 45100 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000081'
W1218 01:53:41.956277 45089 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=93 addr=10.1.1.3:8700} (0x0x631000050800): Connection timed out
I1218 01:53:42.270964 45095 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 89 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:53:42.340153 45102 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 90 current_term 89 granted 1 rejected_by_lease 0
I1218 01:53:42.353047 45118 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 90 current_term 89 granted 1 rejected_by_lease 0
I1218 01:53:42.564420 45085 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 90 current_term 89 log_is_ok 1 votable_time 0
I1218 01:53:42.609431 45085 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 90 votedfor 0.0.0.0:0:0 time: 28995
I1218 01:53:42.655524 45085 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 90 votedfor 10.1.2.3:8700:0 time: 15074
W1218 01:53:42.720620 45102 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 2 current_ctx_version 4
W1218 01:53:42.729106 45118 input_messenger.cpp:381] Fail to read from Socket{id=186 fd=7 addr=10.1.1.3:32938:8700} (0x631000078800): Connection reset by peer [104]
W1218 01:53:42.825362 45119 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.5.3:8700:0 ctx_version 2 current_ctx_version 4
I1218 01:53:43.056237 45102 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=90, status=Follower receives message from new leader with the same term.}
I1218 01:53:43.273800 45095 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000082' with fd=8
I1218 01:53:43.497336 45102 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:53:49.446892 45209 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:53:49.488747 45209 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:53:49.511585 45209 server.cpp:499] Fail to start Server
I1218 01:53:53.298292 45100 server.cpp:309] Node stops following { leader_id=10.1.2.3:8700:0, term=90, status=Lost connection from leader 10.1.2.3:8700:0}
I1218 01:53:53.326716 45089 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 90 start pre_vote
W1218 01:53:54.101711 45119 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
I1218 01:53:54.186041 45103 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 90 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:53:54.383119 45095 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:53:54.755091 45118 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 89 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:53:54.756567 45118 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 90 start vote and grant vote self
W1218 01:53:55.114835 45102 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:53:55.129179 45103 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
I1218 01:53:55.206496 45118 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 91 votedfor 10.1.3.3:8700:0 time: 162747
I1218 01:53:55.224390 45103 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 91 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:53:55.259130 45119 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 91 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:53:55.260251 45119 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 91 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:53:55.313383 45119 replicator.cpp:143] Replicator=4406636445702@10.1.1.3:8700:0 is started, group Atomic
I1218 01:53:55.456084 45119 replicator.cpp:143] Replicator=1138166333449@10.1.2.3:8700:0 is started, group Atomic
I1218 01:53:55.485739 45119 replicator.cpp:143] Replicator=2216203124737@10.1.4.3:8700:0 is started, group Atomic
I1218 01:53:55.534121 45119 replicator.cpp:143] Replicator=2233382993921@10.1.5.3:8700:0 is started, group Atomic
W1218 01:53:55.710978 45118 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:53:55.909888 45108 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:53:56.050654 45108 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:53:56.091902 45101 server.cpp:291] Node becomes leader
W1218 01:53:58.580247 45101 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:54:01.506157 45108 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:54:04.331758 45108 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:54:25.910017 45584 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:54:26.200606 45584 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:54:26.214694 45584 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:54:26.612221 45584 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:54:26.628378 45584 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 82 time: 2177
I1218 01:54:26.635324 45584 log.cpp:1115] load open segment, path: ./data/log first_index: 82
I1218 01:54:26.642294 45584 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:54:26.705123 45619 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:54:26.762836 45619 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 81 last_included_term: 89 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:54:26.877075 45584 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 91 votedfor 10.1.3.3:8700:0 time: 1185
I1218 01:54:26.879802 45584 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 91 last_log_id: (index=83,term=91) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:54:26.893205 45584 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:54:33.971509 45634 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 94 current_term 91 granted 1 rejected_by_lease 0
I1218 01:54:34.332123 45624 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.4.3:8700:0 in term 94 current_term 91 log_is_ok 1 votable_time 0
I1218 01:54:34.419893 45624 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 94 votedfor 0.0.0.0:0:0 time: 83148
I1218 01:54:34.448817 45624 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 94 votedfor 10.1.4.3:8700:0 time: 21418
I1218 01:54:34.756306 45620 server.cpp:312] Node start following { leader_id=10.1.4.3:8700:0, term=94, status=Follower receives message from new leader with the same term.}
I1218 01:54:35.495230 45634 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:54:35.497892 45634 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:54:35.519853 45634 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:54:35.531605 45634 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:54:44.292136 45632 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:54:45.544530 45632 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000085
I1218 01:54:45.621462 45632 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000085
I1218 01:54:45.646792 45632 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000081
I1218 01:54:45.770678 45632 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=85 last_included_term=94
I1218 01:55:05.143898 45620 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 94 start pre_vote
I1218 01:55:05.125108 45624 server.cpp:309] Node stops following { leader_id=10.1.4.3:8700:0, term=94, status=Lost connection from leader 10.1.4.3:8700:0}
W1218 01:55:05.333693 45636 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=8589934778 addr=10.1.1.3:8700} (0x0x631000078800): Connection refused
W1218 01:55:05.590282 45632 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:55:05.772845 45969 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:55:05.909071 45636 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
W1218 01:55:06.726366 45949 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:55:06.728590 45949 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:55:06.747187 45949 server.cpp:499] Fail to start Server
W1218 01:55:06.929523 45620 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E2][10.1.4.3:8700][E2]peer_id not exist
I1218 01:55:10.557210 45624 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 94 start pre_vote
W1218 01:55:11.100926 45634 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=372 addr=10.1.1.3:8700} (0x0x6310000dc800): Connection timed out
W1218 01:55:11.394089 45636 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:55:11.537071 45632 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 94 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:55:11.564288 45620 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 94 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:55:11.575637 45620 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 94 start vote and grant vote self
W1218 01:55:11.744053 45624 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:55:11.889084 45620 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 95 votedfor 10.1.3.3:8700:0 time: 204443
I1218 01:55:11.903976 45634 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 95 current_term 95 granted 0 rejected_by_lease 0
I1218 01:55:11.930466 45632 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 95 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:55:11.983580 45627 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 95 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:55:11.984879 45627 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 95 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:55:12.081053 45627 replicator.cpp:143] Replicator=1108101562369@10.1.1.3:8700:0 is started, group Atomic
I1218 01:55:12.405180 45627 replicator.cpp:143] Replicator=1125281431553@10.1.2.3:8700:0 is started, group Atomic
I1218 01:55:12.513083 45627 replicator.cpp:143] Replicator=1142461300737@10.1.4.3:8700:0 is started, group Atomic
I1218 01:55:12.533555 45627 replicator.cpp:143] Replicator=1159641169921@10.1.5.3:8700:0 is started, group Atomic
W1218 01:55:12.724678 45636 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 01:55:12.734036 45627 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:55:13.346038 45619 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:55:13.594774 45619 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:55:13.729950 45634 server.cpp:291] Node becomes leader
I1218 01:55:14.372642 45627 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:55:14.501849 45627 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000086
I1218 01:55:14.509064 45627 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000086
I1218 01:55:14.578972 45627 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000085
I1218 01:55:14.995816 45627 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=86 last_included_term=95
I1218 01:55:15.115463 45636 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 86 time: 24549
W1218 01:55:15.700668 45620 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:55:18.520376 45620 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:55:18.944064 45624 input_messenger.cpp:381] Fail to read from Socket{id=98 fd=11 addr=10.1.4.3:8700:56202} (0x6310000515c0): Connection reset by peer [104]
W1218 01:55:18.981750 45624 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=98fd=11 addr=10.1.4.3:8700:56202} (0x0x6310000515c0): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=98 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=98 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=98
I1218 01:55:19.082950 45620 socket.cpp:2570] Checking Socket{id=98 addr=10.1.4.3:8700} (0x6310000515c0)
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:55:48.224295 46425 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:55:48.827339 46408 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:55:49.071632 46408 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:55:49.076901 46408 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:55:49.553576 46408 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:55:49.573789 46408 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 86 time: 18764
I1218 01:55:49.609071 46408 log.cpp:1115] load open segment, path: ./data/log first_index: 82
I1218 01:55:49.856199 46408 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:55:50.066659 46465 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:55:50.122305 46465 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 86 last_included_term: 95 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:55:50.132406 46408 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 95 votedfor 10.1.3.3:8700:0 time: 968
I1218 01:55:50.133839 46408 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 95 last_log_id: (index=86,term=95) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:55:50.185925 46408 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:55:55.889024 46458 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 95 start pre_vote
W1218 01:55:56.321792 46448 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=186 addr=10.1.1.3:8700} (0x0x631000078800): Connection timed out
I1218 01:55:56.355434 46459 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:55:56.391130 46459 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 86 and last_snapshot_index 86 is less than 1, will clear bufferred logs and return success
W1218 01:55:56.449103 46467 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:55:56.453997 46459 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 87 time: 55855
I1218 01:55:56.469033 46465 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 95 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:55:56.480404 46459 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000082'
I1218 01:55:56.609495 46454 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 96 current_term 95 granted 1 rejected_by_lease 0
I1218 01:55:56.703276 46453 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 96 current_term 95 granted 1 rejected_by_lease 0
I1218 01:55:56.712477 46465 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.2.3:8700:0 in term 96 current_term 95 log_is_ok 1 votable_time 0
I1218 01:55:56.764420 46465 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 96 votedfor 0.0.0.0:0:0 time: 40199
I1218 01:55:56.821509 46465 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 96 votedfor 10.1.2.3:8700:0 time: 54923
I1218 01:55:56.855819 46454 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.4.3:8700:0 in term 96 current_term 96 log_is_ok 1 votable_time 0
W1218 01:55:56.868984 46467 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 2 current_ctx_version 4
I1218 01:55:57.225108 46465 server.cpp:312] Node start following { leader_id=10.1.2.3:8700:0, term=96, status=Follower receives message from new leader with the same term.}
I1218 01:55:59.633157 46453 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000087' with fd=8
I1218 01:56:00.041378 46467 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:56:52.591641 47103 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 01:56:53.660843 47103 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 01:56:53.719010 47103 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 01:56:54.077577 47103 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 01:56:54.082026 47103 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 87 time: 2327
I1218 01:56:54.104787 47103 log.cpp:1115] load open segment, path: ./data/log first_index: 87
I1218 01:56:54.111124 47103 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 01:56:54.216871 47172 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:56:54.308166 47172 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 86 last_included_term: 95 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 01:56:54.325657 47103 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 96 votedfor 10.1.2.3:8700:0 time: 773
I1218 01:56:54.340420 47103 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 96 last_log_id: (index=87,term=96) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 01:56:54.363798 47103 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 01:56:58.104275 47181 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:56:58.296955 47181 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 86 and last_snapshot_index 86 is less than 1, will clear bufferred logs and return success
I1218 01:56:58.928568 47161 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 97 current_term 96 granted 0 rejected_by_lease 0
I1218 01:57:04.911451 47172 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 96 start pre_vote
W1218 01:57:05.041694 47192 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=188 addr=10.1.2.3:8700} (0x0x631000078d80): Connection refused
W1218 01:57:05.052052 47192 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=190 addr=10.1.4.3:8700} (0x0x631000079300): Connection refused
W1218 01:57:05.048573 47172 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=186 addr=10.1.1.3:8700} (0x0x631000078800): Connection refused
I1218 01:57:05.155815 47183 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:57:05.982781 47283 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:57:06.048414 47283 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:57:06.062319 47283 server.cpp:499] Fail to start Server
I1218 01:57:10.030829 47192 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 96 start pre_vote
I1218 01:57:10.259945 47183 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.5.3:8700:0 term 1 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:10.442993 47183 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 96 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:10.445248 47183 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 96 start vote and grant vote self
I1218 01:57:11.927425 47183 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 97 votedfor 10.1.3.3:8700:0 time: 438048
W1218 01:57:12.071977 47172 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 3 current_ctx_version 4
W1218 01:57:12.083000 47161 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 3 current_ctx_version 4
I1218 01:57:12.086768 47181 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 97 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:12.092468 47192 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 97 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:12.094630 47192 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 97 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:57:12.192890 47192 replicator.cpp:143] Replicator=1142461300737@10.1.1.3:8700:0 is started, group Atomic
I1218 01:57:12.295392 47192 replicator.cpp:143] Replicator=1159641169921@10.1.2.3:8700:0 is started, group Atomic
I1218 01:57:12.308516 47192 replicator.cpp:143] Replicator=1176821039105@10.1.4.3:8700:0 is started, group Atomic
I1218 01:57:12.312908 47192 replicator.cpp:143] Replicator=1194000908289@10.1.5.3:8700:0 is started, group Atomic
I1218 01:57:12.771991 47172 socket.cpp:2570] Checking Socket{id=106 addr=10.1.5.3:8700} (0x631000052bc0)
W1218 01:57:12.775241 47177 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E110]Fail to connect Socket{id=106 addr=10.1.5.3:8700} (0x0x631000052bc0): Connection timed out [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=106 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=106 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=106
I1218 01:57:12.887215 47183 socket.cpp:2630] Revived Socket{id=106 addr=10.1.5.3:8700} (0x631000052bc0) (Connectable)
W1218 01:57:13.016098 47175 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.5.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 01:57:13.127871 47166 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 01:57:13.415946 47177 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:57:13.418118 47177 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:57:13.420636 47177 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:57:13.469794 47165 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 97 last_included_term 95 last_included_index 86 uri remote://10.1.3.3:8700/1657299931278732628
I1218 01:57:13.651598 47177 server.cpp:291] Node becomes leader
I1218 01:57:13.910212 47167 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 86 last_included_term 95 error: [E5][10.1.5.3:8700][E5]Fail to create snapshot writer
W1218 01:57:13.940418 47167 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E5][10.1.5.3:8700][E5]Fail to create snapshot writer
W1218 01:57:16.881789 47167 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:57:17.535552 47166 input_messenger.cpp:381] Fail to read from Socket{id=102 fd=9 addr=10.1.2.3:8700:49542} (0x6310000520c0): Connection reset by peer [104]
W1218 01:57:17.578220 47166 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=102fd=9 addr=10.1.2.3:8700:49542} (0x0x6310000520c0): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=102 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=102 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=102
I1218 01:57:17.648052 47183 socket.cpp:2570] Checking Socket{id=102 addr=10.1.2.3:8700} (0x6310000520c0)
W1218 01:57:18.135622 47165 input_messenger.cpp:381] Fail to read from Socket{id=104 fd=10 addr=10.1.4.3:8700:37314} (0x631000052640): Connection reset by peer [104]
W1218 01:57:18.144479 47165 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=104fd=10 addr=10.1.4.3:8700:37314} (0x0x631000052640): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=104 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=104 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=104
I1218 01:57:18.247969 47172 socket.cpp:2570] Checking Socket{id=104 addr=10.1.4.3:8700} (0x631000052640)
W1218 01:57:18.597199 47166 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E1014]Got EOF of Socket{id=100fd=8 addr=10.1.1.3:8700:40812} (0x0x631000051b40) [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=100 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=100 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=100
I1218 01:57:18.711248 47183 socket.cpp:2570] Checking Socket{id=100 addr=10.1.1.3:8700} (0x631000051b40)
W1218 01:57:19.809520 47183 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:57:22.883186 47183 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=102 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=102 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=102 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=102
W1218 01:57:23.073902 47192 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 97 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:57:23.393507 47161 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:57:23.396358 47181 server.cpp:296] Node stepped down : Majority of the group dies
W1218 01:57:23.420795 47172 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=104 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=104 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=104 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=104
I1218 01:57:23.507637 47192 replicator.cpp:989] Group Atomic Replicator=1142461300737 is going to quit
I1218 01:57:23.508952 47192 replicator.cpp:1258] Replicator=1142461300737 is going to quit
I1218 01:57:23.617419 47192 replicator.cpp:989] Group Atomic Replicator=1159641169921 is going to quit
I1218 01:57:23.618333 47192 replicator.cpp:1258] Replicator=1159641169921 is going to quit
I1218 01:57:23.656195 47192 replicator.cpp:989] Group Atomic Replicator=1176821039105 is going to quit
I1218 01:57:23.656911 47192 replicator.cpp:1258] Replicator=1176821039105 is going to quit
I1218 01:57:23.657965 47192 replicator.cpp:989] Group Atomic Replicator=1194000908289 is going to quit
I1218 01:57:23.717289 47192 replicator.cpp:1258] Replicator=1194000908289 is going to quit

=================================================================
==47283==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7ff006e1b09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7ff006e1b09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7ff006e1b09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:57:27.195518 47484 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:57:27.263396 47484 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:57:27.265163 47484 server.cpp:499] Fail to start Server
I1218 01:57:28.327662 47175 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:57:28.570961 47175 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000088
I1218 01:57:28.572396 47175 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000088
I1218 01:57:28.609145 47175 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000086
I1218 01:57:28.763224 47175 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=88 last_included_term=97
I1218 01:57:29.714295 47192 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 97 start pre_vote
W1218 01:57:29.945152 47161 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:57:30.006350 47161 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 97 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:30.044209 47181 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 97 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:30.045594 47181 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 97 start vote and grant vote self
I1218 01:57:30.117825 47181 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 98 votedfor 10.1.3.3:8700:0 time: 39842
W1218 01:57:30.272334 47183 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:57:30.488278 47181 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 98 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:30.491868 47181 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 98 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:30.492888 47181 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 98 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:57:30.507699 47181 replicator.cpp:143] Replicator=9934259355654@10.1.1.3:8700:0 is started, group Atomic
I1218 01:57:30.588927 47181 replicator.cpp:143] Replicator=9960029159425@10.1.2.3:8700:0 is started, group Atomic
I1218 01:57:30.623126 47181 replicator.cpp:143] Replicator=9977209028609@10.1.4.3:8700:0 is started, group Atomic
I1218 01:57:30.626170 47181 replicator.cpp:143] Replicator=9994388897793@10.1.5.3:8700:0 is started, group Atomic
W1218 01:57:30.761282 47192 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.2.3:8700:0 ctx_version 5 current_ctx_version 6
W1218 01:57:30.809888 47181 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:57:30.872987 47175 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 3 current_ctx_version 4
I1218 01:57:31.118852 47181 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:57:31.128763 47181 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:57:31.208106 47181 server.cpp:291] Node becomes leader
W1218 01:57:33.648895 47192 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:57:35.808418 47129 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:57:36.897389 47172 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:57:39.824095 47192 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:57:40.176630 47192 input_messenger.cpp:381] Fail to read from Socket{id=282 fd=12 addr=10.1.2.3:8700:49490} (0x63100012d040): Connection reset by peer [104]
W1218 01:57:40.256747 47192 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=282fd=12 addr=10.1.2.3:8700:49490} (0x0x63100012d040): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=282 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=282 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=282
I1218 01:57:40.304384 47161 socket.cpp:2570] Checking Socket{id=282 addr=10.1.2.3:8700} (0x63100012d040)
W1218 01:57:40.661278 47172 input_messenger.cpp:381] Fail to read from Socket{id=25769803873 fd=9 addr=10.1.1.3:8700:35638} (0x631000051300): Connection reset by peer [104]
W1218 01:57:40.664543 47172 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=25769803873fd=9 addr=10.1.1.3:8700:35638} (0x0x631000051300): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803873 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803873 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803873
I1218 01:57:40.764865 47192 socket.cpp:2570] Checking Socket{id=25769803873 addr=10.1.1.3:8700} (0x631000051300)
W1218 01:57:41.585960 47183 input_messenger.cpp:381] Fail to read from Socket{id=284 fd=13 addr=10.1.4.3:8700:42004} (0x63100012d5c0): Connection reset by peer [104]
W1218 01:57:41.588689 47183 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=284fd=13 addr=10.1.4.3:8700:42004} (0x0x63100012d5c0): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=284 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=284 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=284
I1218 01:57:41.713316 47192 socket.cpp:2570] Checking Socket{id=284 addr=10.1.4.3:8700} (0x63100012d5c0)
W1218 01:57:42.764194 47181 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==47484==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fb57a48f09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fb57a48f09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fb57a48f09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:57:45.376145 47192 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=282 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=282 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=282 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=282
W1218 01:57:45.544131 47161 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:57:45.829233 47192 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 98 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
W1218 01:57:45.895318 47181 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803873 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803873 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803873 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=25769803873
I1218 01:57:45.912078 47175 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:57:45.981458 47192 replicator.cpp:989] Group Atomic Replicator=9934259355654 is going to quit
I1218 01:57:46.018584 47192 replicator.cpp:1258] Replicator=9934259355654 is going to quit
I1218 01:57:46.069566 47192 replicator.cpp:989] Group Atomic Replicator=9960029159425 is going to quit
I1218 01:57:46.070371 47192 replicator.cpp:1258] Replicator=9960029159425 is going to quit
I1218 01:57:46.071975 47192 replicator.cpp:989] Group Atomic Replicator=9977209028609 is going to quit
I1218 01:57:46.072587 47192 replicator.cpp:1258] Replicator=9977209028609 is going to quit
I1218 01:57:46.074038 47192 replicator.cpp:989] Group Atomic Replicator=9994388897793 is going to quit
I1218 01:57:46.141112 47192 replicator.cpp:1258] Replicator=9994388897793 is going to quit
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:57:51.368472 47699 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:57:51.438748 47699 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:57:51.490831 47699 server.cpp:499] Fail to start Server
I1218 01:57:52.016772 47175 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 98 start pre_vote
W1218 01:57:52.781904 47172 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:57:53.027137 47181 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 98 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:53.140537 47192 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 98 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:53.142135 47192 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 98 start vote and grant vote self
I1218 01:57:53.500663 47192 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 99 votedfor 10.1.3.3:8700:0 time: 77981
W1218 01:57:53.528450 47172 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:57:53.610875 47175 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 7 current_ctx_version 8
I1218 01:57:53.621564 47181 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 99 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:53.681032 47183 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 99 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:57:53.682762 47183 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 99 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:57:53.715070 47183 replicator.cpp:143] Replicator=2263447765086@10.1.1.3:8700:0 is started, group Atomic
I1218 01:57:53.820822 47183 replicator.cpp:143] Replicator=9981503995929@10.1.2.3:8700:0 is started, group Atomic
I1218 01:57:53.923084 47183 replicator.cpp:143] Replicator=9951439224837@10.1.4.3:8700:0 is started, group Atomic
I1218 01:57:53.951843 47183 replicator.cpp:143] Replicator=1219770712089@10.1.5.3:8700:0 is started, group Atomic
W1218 01:57:54.057623 47175 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:57:54.289285 47161 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 5 current_ctx_version 6
I1218 01:57:54.437700 47161 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:57:54.474918 47161 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:57:54.625784 47161 server.cpp:291] Node becomes leader
W1218 01:57:56.800196 47192 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:57:58.390038 47172 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:57:58.717634 47172 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000090
I1218 01:57:58.723778 47172 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000090
I1218 01:57:58.737349 47172 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000088
I1218 01:57:58.784806 47172 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=90 last_included_term=99
I1218 01:57:58.821609 47192 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 89 time: 16167
W1218 01:57:59.556087 47161 input_messenger.cpp:381] Fail to read from Socket{id=8589934872 fd=8 addr=10.1.1.3:8700:47894} (0x63100012cac0): Connection reset by peer [104]
W1218 01:57:59.603667 47161 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589934872fd=8 addr=10.1.1.3:8700:47894} (0x0x63100012cac0): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872
I1218 01:57:59.696784 47192 socket.cpp:2570] Checking Socket{id=8589934872 addr=10.1.1.3:8700} (0x63100012cac0)
W1218 01:57:59.965114 47183 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:02.752537 47172 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:04.725833 47192 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872
W1218 01:58:06.032860 47175 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==47699==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f0e9055f09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f0e9055f09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f0e9055f09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:58:08.863829 47161 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:09.872824 47183 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=21, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872
W1218 01:58:11.619859 47172 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:14.590304 47181 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=71, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:15.005462 47161 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=31, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872
W1218 01:58:17.796154 47175 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=81, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:20.354897 47183 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=41, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872
W1218 01:58:20.572986 47192 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=91, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:23.429682 47192 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=101, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:25.503209 47175 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=51, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872
W1218 01:58:26.301093 47161 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=111, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:28.559921 47183 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:58:28.562829 47183 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 90 and last_snapshot_index 90 is less than 1, will clear bufferred logs and return success
W1218 01:58:28.577379 47172 input_messenger.cpp:381] Fail to read from Socket{id=25769803871 fd=10 addr=10.1.4.3:8700:57052} (0x631000050d80): Connection reset by peer [104]
I1218 01:58:28.611758 47175 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 91 time: 47367
I1218 01:58:28.642309 47175 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000087'
W1218 01:58:28.645541 47172 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=25769803871fd=10 addr=10.1.4.3:8700:57052} (0x0x631000050d80): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769803871 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769803871 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769803871
I1218 01:58:28.680599 47192 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732629
I1218 01:58:28.732606 47183 socket.cpp:2570] Checking Socket{id=25769803871 addr=10.1.4.3:8700} (0x631000050d80)
I1218 01:58:28.747473 47181 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:29.276602 47181 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732630
I1218 01:58:29.320504 47161 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:29.321347 47161 replicator.cpp:884] Group Atomic Fail to install snapshot at peer=10.1.5.3:8700:0, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:29.874065 47192 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732631
I1218 01:58:29.911798 47175 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:30.425460 47183 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732632
I1218 01:58:30.454166 47181 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:30.620398 47172 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=61, [E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934872
I1218 01:58:31.498594 47181 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732633
I1218 01:58:31.747031 47172 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:32.264751 47161 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732634
I1218 01:58:32.312135 47172 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:32.834230 47192 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732635
W1218 01:58:32.853477 47192 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=131, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:32.885370 47172 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:33.417088 47161 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732636
I1218 01:58:33.456187 47172 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:33.773355 47172 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=25769803871 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769803871 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769803871 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=25769803871
I1218 01:58:33.974349 47161 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732637
I1218 01:58:34.011260 47192 replicator.cpp:882] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 90 last_included_term 99 error: [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:58:34.535223 47172 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 99 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:58:34.538159 47192 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 99 last_included_term 99 last_included_index 90 uri remote://10.1.3.3:8700/1657299931278732638
I1218 01:58:34.564301 47181 server.cpp:296] Node stepped down : Majority of the group dies
I1218 01:58:34.580307 47172 replicator.cpp:989] Group Atomic Replicator=2263447765086 is going to quit
I1218 01:58:34.581925 47172 replicator.cpp:1258] Replicator=2263447765086 is going to quit
I1218 01:58:34.592376 47172 replicator.cpp:989] Group Atomic Replicator=9981503995929 is going to quit
I1218 01:58:34.593551 47172 replicator.cpp:1258] Replicator=9981503995929 is going to quit
I1218 01:58:34.594326 47172 replicator.cpp:989] Group Atomic Replicator=9951439224837 is going to quit
I1218 01:58:34.597633 47172 replicator.cpp:1258] Replicator=9951439224837 is going to quit
I1218 01:58:34.665844 47181 replicator.cpp:989] Group Atomic Replicator=1219770712089 is going to quit
I1218 01:58:34.667256 47181 replicator.cpp:1258] Replicator=1219770712089 is going to quit
I1218 01:58:40.188695 47183 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 99 start pre_vote
W1218 01:58:40.357793 47161 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=34359738559 addr=10.1.1.3:8700} (0x0x6310000795c0): Connection refused
W1218 01:58:40.388590 47181 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=467 addr=10.1.4.3:8700} (0x0x631000154d80): Connection refused
I1218 01:58:40.450035 47175 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 99 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:58:40.536612 47183 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:58:46.381932 47175 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 99 start pre_vote
W1218 01:58:46.780745 47181 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=8589935057 addr=10.1.1.3:8700} (0x0x631000154800): Connection timed out
W1218 01:58:46.830699 47192 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=8589935058 addr=10.1.2.3:8700} (0x0x631000154ac0): Connection refused
W1218 01:58:46.831782 47161 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=25769804058 addr=10.1.4.3:8700} (0x0x63100012d040): Connection refused
W1218 01:58:46.841707 47183 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:58:52.508276 47181 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 99 start pre_vote
W1218 01:58:52.533053 47192 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=17179869649 addr=10.1.1.3:8700} (0x0x631000154800): Connection refused
W1218 01:58:52.569198 47172 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
W1218 01:58:52.570760 47192 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=8589934965 addr=10.1.4.3:8700} (0x0x631000140ac0): Connection refused
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:58:53.205113 48298 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 01:58:53.960393 47172 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E2][10.1.2.3:8700][E2]peer_id not exist
W1218 01:58:54.288491 48278 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:58:54.290182 48278 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:58:54.318709 48278 server.cpp:499] Fail to start Server
I1218 01:58:57.796591 47183 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 99 start pre_vote
W1218 01:58:58.245767 47161 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:58:58.335649 47172 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 99 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:58:58.440519 47183 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 99 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:58:58.459344 47183 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 99 start vote and grant vote self
W1218 01:58:58.623382 47175 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 01:58:58.759729 47183 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 100 votedfor 10.1.3.3:8700:0 time: 209046
W1218 01:58:58.773124 47181 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 12 current_ctx_version 13
I1218 01:58:58.807884 47192 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:58:58.855216 47192 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 90 and last_snapshot_index 90 is less than 1, will clear bufferred logs and return success
I1218 01:58:58.886634 47175 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 100 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:58:58.895361 47161 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 100 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:58:58.896641 47161 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 100 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:58:58.944753 47161 replicator.cpp:143] Replicator=8890582302726@10.1.1.3:8700:0 is started, group Atomic
I1218 01:58:58.991237 47161 replicator.cpp:143] Replicator=7868380086281@10.1.2.3:8700:0 is started, group Atomic
I1218 01:58:58.996717 47161 replicator.cpp:143] Replicator=2233382994005@10.1.4.3:8700:0 is started, group Atomic
I1218 01:58:59.001749 47161 replicator.cpp:143] Replicator=7812545511481@10.1.5.3:8700:0 is started, group Atomic
W1218 01:58:59.063613 47175 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 7 current_ctx_version 8
W1218 01:58:59.217917 47181 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 01:58:59.219609 47172 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000091' with fd=8
I1218 01:58:59.303238 47183 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:58:59.398968 47183 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:58:59.479125 47183 server.cpp:291] Node becomes leader
W1218 01:59:02.072890 47175 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:59:05.105794 47192 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:59:07.230785 47183 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.2.3:8700
W1218 01:59:07.914343 47181 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 01:59:09.009753 47172 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.4.3:8700
W1218 01:59:11.129814 47183 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==48278==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fa8027af09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fa8027af09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fa8027af09a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 01:59:14.096297 47181 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 100 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:59:14.132346 47172 server.cpp:296] Node stepped down : Majority of the group dies
W1218 01:59:14.112210 47161 input_messenger.cpp:381] Fail to read from Socket{id=42949673151 fd=12 addr=10.1.5.3:8700:36938} (0x6310000795c0): Connection reset by peer [104]
W1218 01:59:14.144006 47192 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E104]Fail to read from Socket{id=42949673151fd=12 addr=10.1.5.3:8700:36938} (0x0x6310000795c0): Connection reset by peer [R1][E112]Not connected to 10.1.5.3:8700 yet, server_id=42949673151 [R2][E112]Not connected to 10.1.5.3:8700 yet, server_id=42949673151 [R3][E112]Not connected to 10.1.5.3:8700 yet, server_id=42949673151
I1218 01:59:14.161747 47181 replicator.cpp:989] Group Atomic Replicator=8890582302726 is going to quit
I1218 01:59:14.163821 47181 replicator.cpp:1258] Replicator=8890582302726 is going to quit
I1218 01:59:14.232600 47181 replicator.cpp:989] Group Atomic Replicator=7868380086281 is going to quit
I1218 01:59:14.233680 47181 replicator.cpp:1258] Replicator=7868380086281 is going to quit
I1218 01:59:14.256681 47183 socket.cpp:2570] Checking Socket{id=42949673151 addr=10.1.5.3:8700} (0x6310000795c0)
I1218 01:59:14.291476 47181 replicator.cpp:989] Group Atomic Replicator=2233382994005 is going to quit
I1218 01:59:14.293933 47181 replicator.cpp:1258] Replicator=2233382994005 is going to quit
I1218 01:59:14.321508 47181 replicator.cpp:989] Group Atomic Replicator=7812545511481 is going to quit
I1218 01:59:14.323189 47181 replicator.cpp:1258] Replicator=7812545511481 is going to quit
I1218 01:59:19.721819 47181 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 100 start pre_vote
W1218 01:59:19.769032 47172 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=17179869463 addr=10.1.5.3:8700} (0x0x63100012c800): Connection refused
I1218 01:59:19.814244 47175 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 100 granted 1 rejected_by_lease 0 disrupted 0
W1218 01:59:24.796048 47192 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E1008]Reached timeout=5000ms @10.1.4.3:8700
W1218 01:59:24.779247 47161 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E1008]Reached timeout=5000ms @10.1.2.3:8700
I1218 01:59:25.213132 47161 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 100 start pre_vote
W1218 01:59:25.627236 47192 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=17179869288 addr=10.1.5.3:8700} (0x0x631000052640): Connection refused
I1218 01:59:25.921092 47181 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 100 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:59:28.865856 47175 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 01:59:29.394280 47175 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000091
I1218 01:59:29.396818 47175 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000091
I1218 01:59:29.447474 47175 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000090
W1218 01:59:29.458355 47183 input_messenger.cpp:381] Fail to read from Socket{id=8589934702 fd=10 addr=10.1.4.3:8700:59394} (0x6310000536c0): Connection reset by peer [104]
W1218 01:59:29.470937 47183 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E104]Fail to read from Socket{id=8589934702fd=10 addr=10.1.4.3:8700:59394} (0x0x6310000536c0): Connection reset by peer
I1218 01:59:29.549156 47175 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=91 last_included_term=100
W1218 01:59:30.512274 47161 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E1008]Reached timeout=5000ms @10.1.2.3:8700
I1218 01:59:30.820634 47175 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 100 start pre_vote
W1218 01:59:30.892468 47172 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=8589935066 addr=10.1.5.3:8700} (0x0x6310001560c0): Connection refused
W1218 01:59:30.898694 47192 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=25769803869 addr=10.1.1.3:8700} (0x0x631000050800): Connection refused
W1218 01:59:30.900177 47183 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=25769804242 addr=10.1.4.3:8700} (0x0x631000154ac0): Connection refused
W1218 01:59:31.291406 47181 input_messenger.cpp:381] Fail to read from Socket{id=25769804057 fd=9 addr=10.1.2.3:8700:59504} (0x63100012cd80): Connection reset by peer [104]
W1218 01:59:31.293608 47181 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E104]Fail to read from Socket{id=25769804057fd=9 addr=10.1.2.3:8700:59504} (0x0x63100012cd80): Connection reset by peer
I1218 01:59:36.041230 47161 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 100 start pre_vote
W1218 01:59:36.305122 47175 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=34359738466 addr=10.1.1.3:8700} (0x0x6310000515c0): Connection refused
W1218 01:59:36.313232 47181 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=559 addr=10.1.2.3:8700} (0x0x631000168ac0): Connection refused
W1218 01:59:36.315623 47181 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=561 addr=10.1.4.3:8700} (0x0x631000169040): Connection refused
W1218 01:59:36.316733 47181 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=563 addr=10.1.5.3:8700} (0x0x6310001695c0): Connection refused
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 01:59:40.678975 48736 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 01:59:40.752131 48736 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 01:59:40.754103 48736 server.cpp:499] Fail to start Server
I1218 01:59:41.172770 47172 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 100 start pre_vote
W1218 01:59:41.276629 47175 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=8589934880 addr=10.1.5.3:8700} (0x0x63100012e0c0): Connection refused
I1218 01:59:41.760535 47183 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 100 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:59:41.964334 47172 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 100 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:59:41.965763 47172 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 100 start vote and grant vote self
I1218 01:59:42.076224 47172 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 101 votedfor 10.1.3.3:8700:0 time: 61476
I1218 01:59:42.211963 47175 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 101 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:59:42.437777 47183 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.4.3:8700:0 term 101 granted 1 rejected_by_lease 0 disrupted 0
I1218 01:59:42.445006 47183 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 101 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 01:59:42.468804 47183 replicator.cpp:143] Replicator=1211180777578@10.1.1.3:8700:0 is started, group Atomic
I1218 01:59:42.676929 47183 replicator.cpp:143] Replicator=2263447765094@10.1.2.3:8700:0 is started, group Atomic
I1218 01:59:42.712705 47183 replicator.cpp:143] Replicator=10002978832461@10.1.4.3:8700:0 is started, group Atomic
I1218 01:59:42.740234 47183 replicator.cpp:143] Replicator=8808977924133@10.1.5.3:8700:0 is started, group Atomic
W1218 01:59:42.999653 47181 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.1.3:8700:0 ctx_version 9 current_ctx_version 10
W1218 01:59:43.015208 47192 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 18 current_ctx_version 19
I1218 01:59:43.090066 47165 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:59:43.117348 47165 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 01:59:43.273738 47167 server.cpp:291] Node becomes leader
W1218 02:00:07.907409 47159 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E2][10.1.5.3:8700][E2]peer_id not exist
I1218 02:00:07.908768 47177 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
W1218 02:00:08.028577 47166 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.5.3:8700
W1218 02:00:08.100193 47195 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 101 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:00:08.204124 47180 server.cpp:296] Node stepped down : Majority of the group dies
W1218 02:00:08.262214 47167 input_messenger.cpp:381] Fail to read from Socket{id=51539607740 fd=14 addr=10.1.4.3:8700:42264} (0x631000078d80): Connection reset by peer [104]
I1218 02:00:08.336221 47195 replicator.cpp:989] Group Atomic Replicator=1211180777578 is going to quit
I1218 02:00:08.338030 47195 replicator.cpp:1258] Replicator=1211180777578 is going to quit
W1218 02:00:08.349313 47180 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=51539607740fd=14 addr=10.1.4.3:8700:42264} (0x0x631000078d80): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=51539607740 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=51539607740 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=51539607740
I1218 02:00:08.402309 47195 replicator.cpp:989] Group Atomic Replicator=2263447765094 is going to quit
I1218 02:00:08.457330 47161 socket.cpp:2570] Checking Socket{id=51539607740 addr=10.1.4.3:8700} (0x631000078d80)
I1218 02:00:08.457530 47195 replicator.cpp:1258] Replicator=2263447765094 is going to quit
I1218 02:00:08.459446 47195 replicator.cpp:989] Group Atomic Replicator=10002978832461 is going to quit
I1218 02:00:08.463999 47195 replicator.cpp:1258] Replicator=10002978832461 is going to quit
I1218 02:00:08.516980 47195 replicator.cpp:989] Group Atomic Replicator=8808977924133 is going to quit
I1218 02:00:08.522264 47195 replicator.cpp:1258] Replicator=8808977924133 is going to quit
I1218 02:00:08.645779 47159 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.2.3:8700:0 in term 102 current_term 101 granted 1 rejected_by_lease 0
I1218 02:00:08.852025 47180 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 102 current_term 101 granted 1 rejected_by_lease 0
I1218 02:00:08.884615 47165 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000092
I1218 02:00:08.886355 47165 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000092
I1218 02:00:08.932821 47165 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000091
I1218 02:00:08.979691 47177 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.1.3:8700:0 in term 102 current_term 101 log_is_ok 1 votable_time 0
I1218 02:00:09.038760 47177 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 102 votedfor 0.0.0.0:0:0 time: 57415
I1218 02:00:09.185636 47177 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 102 votedfor 10.1.1.3:8700:0 time: 144106
I1218 02:00:09.192384 47165 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=92 last_included_term=101
I1218 02:00:09.246987 47165 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 92 time: 30265
I1218 02:00:10.012456 47177 server.cpp:312] Node start following { leader_id=10.1.1.3:8700:0, term=102, status=Follower receives message from new leader with the same term.}
I1218 02:00:11.004838 47167 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0

=================================================================
==48736==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fdd6062409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fdd6062409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fdd6062409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 02:01:08.065986 49730 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 02:01:08.849929 49730 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 02:01:08.877403 49730 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 02:01:09.245172 49730 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 02:01:09.267982 49730 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 92 time: 21526
I1218 02:01:09.274302 49730 log.cpp:1115] load open segment, path: ./data/log first_index: 91
I1218 02:01:09.387176 49730 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 02:01:09.577576 49775 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:01:09.699035 49775 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 92 last_included_term: 101 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 02:01:09.709517 49730 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 102 votedfor 10.1.1.3:8700:0 time: 724
I1218 02:01:09.722043 49730 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 102 last_log_id: (index=93,term=102) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 02:01:09.741184 49730 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 02:01:53.757400 49786 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 102 start pre_vote
I1218 02:01:53.953176 49775 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 02:01:54.695065 49775 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 92 and last_snapshot_index 92 is less than 1, will clear bufferred logs and return success
W1218 02:01:55.196067 49775 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E110]Fail to connect Socket{id=186 addr=10.1.1.3:8700} (0x0x631000078800): Connection timed out
I1218 02:01:55.295801 49777 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 93 time: 485085
W1218 02:01:55.400249 49771 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=188 addr=10.1.2.3:8700} (0x0x631000078d80): Connection refused
I1218 02:01:55.401057 49777 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
I1218 02:01:55.499970 49771 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
W1218 02:01:55.521059 49771 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=96 fd=11 addr=10.1.1.3:42978:8700} (0x631000051040): Unknown error 1014 [1014]
W1218 02:01:55.520812 49777 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=94 fd=9 addr=10.1.1.3:57068:8700} (0x631000050ac0): Unknown error 1014 [1014]
I1218 02:01:55.539268 49775 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
I1218 02:01:55.542388 49780 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
I1218 02:01:55.543865 49786 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
W1218 02:01:55.543918 49780 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=97 fd=12 addr=10.1.1.3:42982:8700} (0x631000051300): Unknown error 1014 [1014]
W1218 02:01:55.565119 49786 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=95 fd=10 addr=10.1.1.3:57074:8700} (0x631000050d80): Unknown error 1014 [1014]
I1218 02:01:55.588842 49773 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
W1218 02:01:55.589092 49776 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=190 addr=10.1.4.3:8700} (0x0x631000079300): Connection refused
W1218 02:01:55.589895 49773 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=93 fd=8 addr=10.1.1.3:34814:8700} (0x631000050800): Unknown error 1014 [1014]
I1218 02:01:55.618062 49770 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
W1218 02:01:55.635113 49770 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=99 fd=14 addr=10.1.1.3:46158:8700} (0x631000051880): Unknown error 1014 [1014]
W1218 02:01:55.627205 49775 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=98 fd=13 addr=10.1.1.3:58722:8700} (0x6310000515c0): Unknown error 1014 [1014]
W1218 02:01:55.655619 49767 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=192 addr=10.1.5.3:8700} (0x0x631000079880): Connection refused
I1218 02:01:56.418927 49781 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
I1218 02:02:00.311264 49777 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 102 start pre_vote
W1218 02:02:00.414994 49767 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=103 addr=10.1.4.3:8700} (0x0x631000052380): Connection refused
W1218 02:02:00.415108 49770 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=101 addr=10.1.2.3:8700} (0x0x631000051e00): Connection refused
W1218 02:02:00.429494 49778 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=105 addr=10.1.5.3:8700} (0x0x631000052900): Connection refused
I1218 02:02:00.709545 49776 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 102 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:02:01.460247 49780 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.1.3:8700:0 in term 103 current_term 102 granted 1 rejected_by_lease 0
I1218 02:02:05.853646 49777 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 102 start pre_vote
W1218 02:02:06.423147 49771 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.1.3:8700:0 error: [E111]Fail to connect Socket{id=8589934690 addr=10.1.1.3:8700} (0x0x6310000515c0): Connection refused
W1218 02:02:06.463647 49776 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.2.3:8700:0 error: [E111]Fail to connect Socket{id=279 addr=10.1.2.3:8700} (0x0x6310000b4800): Connection refused
W1218 02:02:06.548163 49767 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.4.3:8700:0 error: [E111]Fail to connect Socket{id=281 addr=10.1.4.3:8700} (0x0x6310000b4d80): Connection refused
W1218 02:02:06.548338 49773 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E111]Fail to connect Socket{id=283 addr=10.1.5.3:8700} (0x0x6310000b5300): Connection refused
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 02:02:09.696831 50420 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 02:02:09.756155 50420 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 02:02:09.824296 50420 server.cpp:499] Fail to start Server
I1218 02:02:12.376821 49777 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 102 start pre_vote
I1218 02:02:12.842728 49767 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.4.3:8700:0 term 101 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:02:12.846033 49770 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 102 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:02:12.847923 49770 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 102 start vote and grant vote self
I1218 02:02:13.112951 49770 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 103 votedfor 10.1.3.3:8700:0 time: 183528
W1218 02:02:13.120461 49776 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.1.3:8700:0 ctx_version 5 current_ctx_version 6
W1218 02:02:13.122246 49767 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.5.3:8700:0 ctx_version 5 current_ctx_version 6
I1218 02:02:13.270740 49778 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 term 103 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:02:13.274055 49781 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 103 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:02:13.275718 49781 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 103 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 02:02:13.293552 49781 replicator.cpp:143] Replicator=1103806595077@10.1.1.3:8700:0 is started, group Atomic
I1218 02:02:13.411986 49781 replicator.cpp:143] Replicator=5510443040769@10.1.2.3:8700:0 is started, group Atomic
I1218 02:02:13.436105 49781 replicator.cpp:143] Replicator=5527622909953@10.1.4.3:8700:0 is started, group Atomic
I1218 02:02:13.439512 49781 replicator.cpp:143] Replicator=5544802779137@10.1.5.3:8700:0 is started, group Atomic
W1218 02:02:13.664140 49778 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.2.3:8700:0 ctx_version 1 current_ctx_version 2
W1218 02:02:13.667275 49773 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 1 current_ctx_version 2
I1218 02:02:13.885632 49771 replicator.cpp:835] node Atomic:10.1.3.3:8700:0 send InstallSnapshotRequest to 10.1.5.3:8700:0 term 103 last_included_term 101 last_included_index 92 uri remote://10.1.3.3:8700/1749764461384210337
I1218 02:02:14.034032 49775 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:02:14.160099 49775 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:02:14.249226 49775 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:02:14.359700 49775 server.cpp:291] Node becomes leader
I1218 02:02:14.680150 49771 replicator.cpp:902] received InstallSnapshotResponse from Atomic:10.1.5.3:8700:0 last_included_index 92 last_included_term 101 success.
W1218 02:02:20.322233 49773 baidu_rpc_protocol.cpp:349] Fail to write into Socket{id=17179869292 fd=10 addr=10.1.1.3:54940:8700} (0x631000053140): Unknown error 1014 [1014]
I1218 02:02:25.012591 49786 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 02:02:25.467890 49786 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000095
I1218 02:02:25.469662 49786 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000095
W1218 02:02:25.695626 49745 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
I1218 02:02:25.720906 49786 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000092
W1218 02:02:26.333236 49775 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E1008]Reached timeout=2500ms @10.1.2.3:8700
I1218 02:02:26.338143 49786 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=95 last_included_term=103

=================================================================
==50420==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7fd04912609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7fd04912609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7fd04912609a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 02:02:30.988940 49745 sampler.cpp:192] bvar is busy at sampling for 2 seconds!
W1218 02:02:32.336226 49786 input_messenger.cpp:381] Fail to read from Socket{id=373 fd=9 addr=10.1.2.3:8700:43810} (0x6310000f0ac0): Connection reset by peer [104]
I1218 02:02:32.657655 49777 socket.cpp:2570] Checking Socket{id=373 addr=10.1.2.3:8700} (0x6310000f0ac0)
W1218 02:02:33.803761 49773 input_messenger.cpp:381] Fail to read from Socket{id=375 fd=11 addr=10.1.4.3:8700:57116} (0x6310000f1040): Connection reset by peer [104]
W1218 02:02:33.806402 49773 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=375fd=11 addr=10.1.4.3:8700:57116} (0x0x6310000f1040): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=375
I1218 02:02:33.925678 49775 socket.cpp:2570] Checking Socket{id=375 addr=10.1.4.3:8700} (0x6310000f1040)
W1218 02:02:34.972005 49781 input_messenger.cpp:381] Fail to read from Socket{id=17179869377 fd=8 addr=10.1.1.3:8700:56970} (0x631000079b40): Connection reset by peer [104]
W1218 02:02:34.975045 49781 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869377fd=8 addr=10.1.1.3:8700:56970} (0x0x631000079b40): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377
I1218 02:02:35.079617 49777 socket.cpp:2570] Checking Socket{id=17179869377 addr=10.1.1.3:8700} (0x631000079b40)
W1218 02:02:36.497328 49778 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=373 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=373 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=373 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=373
W1218 02:02:38.920477 49777 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=375
I1218 02:02:38.935204 49776 socket.cpp:2630] Revived Socket{id=373 addr=10.1.2.3:8700} (0x6310000f0ac0) (Connectable)
I1218 02:02:40.044757 49778 socket.cpp:2630] Revived Socket{id=375 addr=10.1.4.3:8700} (0x6310000f1040) (Connectable)
W1218 02:02:40.122203 49777 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 02:02:40.551723 50695 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 02:02:40.577023 50695 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 02:02:40.578877 50695 server.cpp:499] Fail to start Server
W1218 02:02:42.667969 49773 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 02:02:44.385027 49786 socket.cpp:2630] Revived Socket{id=17179869377 addr=10.1.1.3:8700} (0x631000079b40) (Connectable)
W1218 02:02:49.110015 49786 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 02:02:52.273072 49775 input_messenger.cpp:381] Fail to read from Socket{id=375 fd=9 addr=10.1.4.3:8700:54678} (0x6310000f1040): Connection reset by peer [104]
W1218 02:02:52.321326 49775 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=375fd=9 addr=10.1.4.3:8700:54678} (0x0x6310000f1040): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=375
I1218 02:02:52.562716 49775 socket.cpp:2570] Checking Socket{id=375 addr=10.1.4.3:8700} (0x6310000f1040)
W1218 02:02:53.028280 49775 input_messenger.cpp:381] Fail to read from Socket{id=17179869377 fd=10 addr=10.1.1.3:8700:42306} (0x631000079b40): Connection reset by peer [104]
W1218 02:02:53.042183 49775 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869377fd=10 addr=10.1.1.3:8700:42306} (0x0x631000079b40): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377
I1218 02:02:53.375182 49771 socket.cpp:2570] Checking Socket{id=17179869377 addr=10.1.1.3:8700} (0x631000079b40)
W1218 02:02:53.798743 49786 input_messenger.cpp:381] Fail to read from Socket{id=373 fd=8 addr=10.1.2.3:8700:55390} (0x6310000f0ac0): Connection reset by peer [104]
W1218 02:02:53.804009 49786 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=373fd=8 addr=10.1.2.3:8700:55390} (0x0x6310000f0ac0): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=373 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=373 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=373
I1218 02:02:54.016105 49786 socket.cpp:2570] Checking Socket{id=373 addr=10.1.2.3:8700} (0x6310000f0ac0)
W1218 02:02:54.818038 49775 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 02:02:55.128430 49775 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 02:02:55.190210 49775 snapshot_executor.cpp:154] node Atomic:10.1.3.3:8700:0 the gap between fsm applied index 95 and last_snapshot_index 95 is less than 1, will clear bufferred logs and return success
I1218 02:02:55.242339 49777 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 96 time: 45139
I1218 02:02:55.280966 49777 log.cpp:608] Unlinked segment `./data/log/log_inprogress_00000000000000000091'
W1218 02:02:57.690352 49786 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=375 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=375
W1218 02:02:58.264318 49771 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=17179869377
W1218 02:02:58.963333 49777 node.cpp:796] node Atomic:10.1.3.3:8700:0 term 103 steps down when alive nodes don't satisfy quorum dead_nodes: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:02:59.173082 49775 server.cpp:296] Node stepped down : Majority of the group dies
I1218 02:02:59.320170 49777 replicator.cpp:989] Group Atomic Replicator=1103806595077 is going to quit
I1218 02:02:59.321952 49777 replicator.cpp:1258] Replicator=1103806595077 is going to quit
W1218 02:02:59.348901 49775 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=11, [E112]Not connected to 10.1.2.3:8700 yet, server_id=373 [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=373 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=373 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=373
I1218 02:02:59.397145 49777 replicator.cpp:989] Group Atomic Replicator=5510443040769 is going to quit
I1218 02:02:59.398712 49777 replicator.cpp:1258] Replicator=5510443040769 is going to quit
I1218 02:02:59.399571 49777 replicator.cpp:989] Group Atomic Replicator=5527622909953 is going to quit
I1218 02:02:59.400669 49777 replicator.cpp:1258] Replicator=5527622909953 is going to quit
I1218 02:02:59.401703 49777 replicator.cpp:989] Group Atomic Replicator=5544802779137 is going to quit
I1218 02:02:59.486076 49777 replicator.cpp:1258] Replicator=5544802779137 is going to quit

=================================================================
==50695==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f936632409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f936632409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f936632409a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
WARNING: Logging before InitGoogleLogging() is written to STDERR
I1218 02:03:05.167098 49775 node.cpp:1587] node Atomic:10.1.3.3:8700:0 term 103 start pre_vote
W1218 02:03:05.144532 50887 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
E1218 02:03:05.169895 50887 server.cpp:1101] Fail to listen 0.0.0.0:8700
E1218 02:03:05.183076 50887 server.cpp:499] Fail to start Server
W1218 02:03:05.312289 49781 node.cpp:1567] node Atomic:10.1.3.3:8700:0 request PreVote from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 02:03:05.556243 49778 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.1.3:8700:0 term 103 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:03:05.651130 49773 node.cpp:1512] node Atomic:10.1.3.3:8700:0 received PreVoteResponse from 10.1.2.3:8700:0 term 103 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:03:05.652494 49773 node.cpp:1653] node Atomic:10.1.3.3:8700:0 term 103 start vote and grant vote self
W1218 02:03:05.770274 49780 node.cpp:1454] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.5.3:8700:0 error: [E22][10.1.5.3:8700][E22]Invalid argument
I1218 02:03:05.835722 49773 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 104 votedfor 10.1.3.3:8700:0 time: 108369
I1218 02:03:05.893324 49780 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.2.3:8700:0 term 104 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:03:05.936172 49778 node.cpp:1403] node Atomic:10.1.3.3:8700:0 received RequestVoteResponse from 10.1.1.3:8700:0 term 104 granted 1 rejected_by_lease 0 disrupted 0
I1218 02:03:05.937387 49778 node.cpp:1908] node Atomic:10.1.3.3:8700:0 term 104 become leader of group 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 
I1218 02:03:06.005143 49778 replicator.cpp:143] Replicator=2418066587678@10.1.1.3:8700:0 is started, group Atomic
I1218 02:03:06.066779 49778 replicator.cpp:143] Replicator=3418793967625@10.1.2.3:8700:0 is started, group Atomic
I1218 02:03:06.072791 49778 replicator.cpp:143] Replicator=1288490188809@10.1.4.3:8700:0 is started, group Atomic
I1218 02:03:06.082007 49778 replicator.cpp:143] Replicator=2323577307145@10.1.5.3:8700:0 is started, group Atomic
W1218 02:03:06.158754 49776 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=1, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 02:03:06.227273 49780 log.cpp:114] Created new segment `./data/log/log_inprogress_00000000000000000096' with fd=7
I1218 02:03:06.323596 49767 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:03:06.332325 49767 node.cpp:3310] node Atomic:10.1.3.3:8700:0 reset ConfigurationCtx, new_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0, old_peers: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:03:06.430627 49771 server.cpp:291] Node becomes leader
W1218 02:03:06.744309 49781 node.cpp:1370] node Atomic:10.1.3.3:8700:0 received invalid RequestVoteResponse from 10.1.4.3:8700:0 ctx_version 3 current_ctx_version 4
W1218 02:03:06.760839 49781 node.cpp:1479] node Atomic:10.1.3.3:8700:0 received invalid PreVoteResponse from 10.1.4.3:8700:0 ctx_version 7 current_ctx_version 8
W1218 02:03:09.333627 49778 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=11, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 02:03:12.207331 49778 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=21, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 02:03:15.313584 49780 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=31, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 02:03:18.077951 49767 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=41, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR

=================================================================
==50887==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaacffa in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:903:22
    #2 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #3 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #4 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #5 0x7f20fad5909a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Direct leak of 8 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xaa7f39 in brpc::ServerOptions::ServerOptions() /opt/fs/brpc/src/brpc/server.cpp:155:30
    #2 0xaa94d1 in brpc::Server::Server(brpc::ProfilerLinker) /opt/fs/brpc/src/brpc/server.cpp:409:9
    #3 0x740625 in main /opt/fs/braft/example/atomic/server.cpp:474:18
    #4 0x7f20fad5909a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

Indirect leak of 88 byte(s) in 1 object(s) allocated from:
    #0 0x73d63d in operator new(unsigned long) (/opt/fs/braft/example/atomic/atomic_server+0x73d63d)
    #1 0xba3588 in bthread_keytable_pool_init /opt/fs/brpc/src/bthread/key.cpp:446:18
    #2 0xaad009 in brpc::Server::StartInternal(butil::EndPoint const&, brpc::PortRange const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:904:9
    #3 0xaafd3f in brpc::Server::Start(butil::EndPoint const&, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1225:12
    #4 0xaafd3f in brpc::Server::Start(int, brpc::ServerOptions const*) /opt/fs/brpc/src/brpc/server.cpp:1244:12
    #5 0x740915 in main /opt/fs/braft/example/atomic/server.cpp:498:16
    #6 0x7f20fad5909a in __libc_start_main /build/reproducible-path/glibc-2.28/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: 184 byte(s) leaked in 3 allocation(s).
W1218 02:03:20.962009 49770 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=51, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
W1218 02:03:23.741703 49781 replicator.cpp:397] Group Atomic fail to issue RPC to 10.1.5.3:8700:0 _consecutive_error_times=61, [E22][10.1.5.3:8700][E22]node Atomic:10.1.5.3:8700:0 is not in active state, state ERROR
I1218 02:03:25.207521 49786 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
W1218 02:03:25.737325 49776 input_messenger.cpp:381] Fail to read from Socket{id=558 fd=13 addr=10.1.5.3:8700:41448} (0x631000118800): Connection reset by peer [104]
I1218 02:03:25.876232 49786 socket.cpp:2570] Checking Socket{id=558 addr=10.1.5.3:8700} (0x631000118800)
I1218 02:03:26.075699 49775 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000096
I1218 02:03:26.077438 49775 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000096
I1218 02:03:26.227581 49775 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000095
W1218 02:03:26.375639 49777 input_messenger.cpp:381] Fail to read from Socket{id=8589934783 fd=12 addr=10.1.4.3:8700:33526} (0x6310000795c0): Connection reset by peer [104]
W1218 02:03:26.378156 49777 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.4.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589934783fd=12 addr=10.1.4.3:8700:33526} (0x0x6310000795c0): Connection reset by peer [R1][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934783 [R2][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934783 [R3][E112]Not connected to 10.1.4.3:8700 yet, server_id=8589934783
I1218 02:03:26.495527 49777 socket.cpp:2570] Checking Socket{id=8589934783 addr=10.1.4.3:8700} (0x6310000795c0)
I1218 02:03:26.628947 49775 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=96 last_included_term=104
W1218 02:03:26.705694 49786 input_messenger.cpp:381] Fail to read from Socket{id=17179869464 fd=10 addr=10.1.2.3:8700:38092} (0x6310000b4ac0): Connection reset by peer [104]
W1218 02:03:26.727993 49786 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.2.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=17179869464fd=10 addr=10.1.2.3:8700:38092} (0x0x6310000b4ac0): Connection reset by peer [R1][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869464 [R2][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869464 [R3][E112]Not connected to 10.1.2.3:8700 yet, server_id=17179869464
I1218 02:03:26.859719 49786 socket.cpp:2570] Checking Socket{id=17179869464 addr=10.1.2.3:8700} (0x6310000b4ac0)
W1218 02:03:26.921425 49776 input_messenger.cpp:381] Fail to read from Socket{id=8589934878 fd=8 addr=10.1.1.3:8700:45768} (0x6310000b5b40): Connection reset by peer [104]
W1218 02:03:26.955787 49776 replicator.cpp:297] Group Atomic fail to issue RPC to 10.1.1.3:8700:0 _consecutive_error_times=1, [E104]Fail to read from Socket{id=8589934878fd=8 addr=10.1.1.3:8700:45768} (0x0x6310000b5b40): Connection reset by peer [R1][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934878 [R2][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934878 [R3][E112]Not connected to 10.1.1.3:8700 yet, server_id=8589934878
I1218 02:03:27.024398 49786 socket.cpp:2570] Checking Socket{id=8589934878 addr=10.1.1.3:8700} (0x6310000b5b40)
WARNING: Logging before InitGoogleLogging() is written to STDERR
W1218 02:03:59.938045 51448 bthread.cpp:409] Fail to set concurrency by tag: 0, tag concurrency must larger than old oncurrency. old concurrency: 24, new concurrency: 9
I1218 02:04:01.661123 51448 server.cpp:1208] Server[braft::RaftStatImpl+braft::FileServiceImpl+braft::RaftServiceImpl+braft::CliServiceImpl+example::AtomicServiceImpl] is serving on port=8700.
I1218 02:04:01.696065 51448 server.cpp:1211] Check out http://n3:8700 in web browser.
I1218 02:04:02.414176 51448 log.cpp:691] Use murmurhash32 as the checksum type of appending entries
I1218 02:04:02.435787 51448 log.cpp:1175] log load_meta ./data/log/log_meta first_log_index: 96 time: 19948
I1218 02:04:02.437728 51448 log.cpp:1115] load open segment, path: ./data/log first_index: 96
I1218 02:04:02.443907 51448 snapshot.cpp:465] Deleting ./data/snapshot/temp
I1218 02:04:02.641099 51505 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:04:02.671289 51505 snapshot_executor.cpp:264] node Atomic:10.1.3.3:8700:0 snapshot_load_done, last_included_index: 96 last_included_term: 104 peers: "10.1.1.3:8700:0" peers: "10.1.2.3:8700:0" peers: "10.1.3.3:8700:0" peers: "10.1.4.3:8700:0" peers: "10.1.5.3:8700:0"
I1218 02:04:02.710342 51448 raft_meta.cpp:521] Loaded single stable meta, path ./data/raft_meta term 104 votedfor 10.1.3.3:8700:0 time: 919
I1218 02:04:02.764225 51448 node.cpp:608] node Atomic:10.1.3.3:8700:0 init, term: 104 last_log_id: (index=96,term=104) conf: 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0 old_conf: 
I1218 02:04:02.923563 51448 server.cpp:509] Atomic service is running on 0.0.0.0:8700
I1218 02:04:06.319573 51507 node.cpp:2129] node Atomic:10.1.3.3:8700:0 received PreVote from 10.1.4.3:8700:0 in term 105 current_term 104 granted 1 rejected_by_lease 0
I1218 02:04:06.743589 51511 node.cpp:2211] node Atomic:10.1.3.3:8700:0 received RequestVote from 10.1.4.3:8700:0 in term 105 current_term 104 log_is_ok 1 votable_time 0
I1218 02:04:06.813995 51511 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 105 votedfor 0.0.0.0:0:0 time: 67888
I1218 02:04:06.873612 51511 raft_meta.cpp:546] Saved single stable meta, path ./data/raft_meta term 105 votedfor 10.1.4.3:8700:0 time: 20371
I1218 02:04:07.127213 51507 server.cpp:312] Node start following { leader_id=10.1.4.3:8700:0, term=105, status=Follower receives message from new leader with the same term.}
I1218 02:04:08.364807 51508 server.cpp:306] Configuration of this group is 10.1.1.3:8700:0,10.1.2.3:8700:0,10.1.3.3:8700:0,10.1.4.3:8700:0,10.1.5.3:8700:0
I1218 02:04:22.828410 51502 node.cpp:949] node Atomic:10.1.3.3:8700:0 starts to do snapshot
I1218 02:04:23.276510 51502 snapshot.cpp:647] Deleting ./data/snapshot/snapshot_00000000000000000097
I1218 02:04:23.283409 51502 snapshot.cpp:653] Renaming ./data/snapshot/temp to ./data/snapshot/snapshot_00000000000000000097
I1218 02:04:23.303627 51502 snapshot.cpp:523] Deleting ./data/snapshot/snapshot_00000000000000000096
I1218 02:04:23.346071 51502 snapshot_executor.cpp:234] node Atomic:10.1.3.3:8700:0 snapshot_save_done, last_included_index=97 last_included_term=105
I1218 02:04:23.385573 51502 log.cpp:1153] log save_meta ./data/log/log_meta first_log_index: 97 time: 19551
